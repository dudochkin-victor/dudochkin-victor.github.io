+++
title = "Валидация на Edgeware"
sort_by = "weight"
updated = 2022-10-02T15:00:00Z
+++

Добро пожаловать в официальное подробное руководство Edgeware по проверке. Мы рады, что вы заинтересованы в проверке Edgeware, и мы сделаем все возможное, чтобы предоставить подробную документацию по описанному ниже процессу. Как всегда, обращайтесь в [Discord](https://discord.gg/CJRfb3) или [Telegram](https://t.me/heyedgeware), если у вас есть вопросы о проекте.

Этот документ содержит всю информацию, необходимую для начала проверки в Edgeware с использованием [**пользовательского интерфейса polkadot-js/apps**](https://polkadot.js.org/apps/#/). Мы начнем с настройки своего узла и перейдем к управлению ключами и мониторингу. Для начала мы будем использовать следующую терминологию ключей для руководства:

- _**stash**_ - пара ключей тайника, где должна находиться большая часть ваших средств. При необходимости его можно хранить в холодильнике.
- _**controller**_ — контроллер — это пара ключей, которая будет управлять настройками вашего валидатора. Он должен иметь меньший баланс, например. 10-100 ЭДГ
- _**session**_ — 3 пары ключей сеанса — это горячие клавиши, которые хранятся на вашем узле валидатора. Им не нужны балансы.

## Требования

1. У вас должны быть остатки на счетах `stash` (ed25519 или sr25519\) и `controller` (ed25519 или sr25519\).
2. Инструкции по настройке узла находятся [здесь](https://github.com/hicommonwealth/edgeware-node/wiki/Setting-up-a-Node). Вам нужно будет дополнительно добавить флаг `--validator`, чтобы запустить узел проверки.
3. У вас должен быть кошелек, например, расширение `polkadot-js`, установленное в вашем браузере с парами ключей тайника и контроллера. Если у вас его нет, получите [здесь](https://github.com/polkadot-js/extension).

Если вам нужно запросить баланс тестовой сети EDG, просто спросите в [Discord](https://github.com/Edgeware-Network/edgeware-documentation/tree/815a72388a9df65c3db9f048eaed42ea8f645780/docs/advanced-topics/1/README.md).

### 

1. Установите узел Edgeware

Если вы запускаете узел валидатора, который должен работать, мы рекомендуем [следовать инструкциям по умолчанию](https://github.com/hicommonwealth/edgeware-node/wiki/Setting-up-a-Node) и [настроить мониторинг](https://github.com/hicommonwealth/edgeware-node/wiki/Setting-up-monitoring).

Затем вы должны перейти к строке, где вызывается `target/release/edgeware` в `/etc/systemd/system/edgeware.service`, и добавить флаг `--validator`. Перезагрузите конфигурацию службы и проверьте, правильно ли запущен узел:

```
systemctl daemon-reload
systemctl restart edgeware
systemctl status edgeware
```

Вы должны увидеть этот вывод:

```
2019-10-03 10:28:59 Edgeware
2019-10-03 10:28:59   version 1.0.0-3f34fba-x86_64-macos
2019-10-03 10:28:59   by Commonwealth Labs, 2018-2019
2019-10-03 10:28:59 Chain specification: Edgeware
2019-10-03 10:28:59 Node name: naughty-light-7646
2019-10-03 10:28:59 Roles: AUTHORITY
```

**Убедитесь, что спецификация цепочки верна, и узел работает с `Roles: AUTHORITY`.** Если вы не видите правильную цепочку, вы должны указать правильный параметр `--chain`, а если вы не Если вы не видите роли Authority, вам следует убедиться, что вы действительно используете Edgeware с флагом `--validator`.

**Убедитесь, что вы можете получить доступ к узлу через командную строку.** Если вы введете команду `curl` ниже, вы должны увидеть этот вывод:

```
curl --include --no-buffer --header "Connection: Upgrade" --header "Upgrade: websocket" --header "Sec-WebSocket-Key: SGVsbG8sIHdvcmxkIQ==" --header "Sec-WebSocket-Version: 13" localhost:9944

HTTP/1.1 101 Switching Protocols
Connection: Upgrade
Sec-WebSocket-Accept: qGEgH3En71di5rrssAZTmtRTyFk=
Upgrade: websocket
```

**Проверьте** [**панель телеметрии**](https://github.com/hicommonwealth/edgeware-node/wiki)** и убедитесь, что ваш узел синхронизируется с последним блоком.** Если какой-либо из эти шаги не проверяются, остановитесь сейчас; вы не сможете проверить, пока они не будут исправлены.

### 2. Подключаемся через интерфейс

Перейдите в [веб-интерфейс polkadot-js](https://polkadot.js.org/apps/#/settings) и подключитесь к пользовательскому узлу, например. testnet1.edgewa.re, testnet2.edgewa.re или testnet3.edgewa.re.

Интерфейс должен показывать правильный последний блок.

### 3. Создайте ставку

Перейдите на вкладку **Стейкинг** и выберите **Действия с аккаунтом** вверху. Нажмите **Новая ставка**.

Выберите свой контроллер и тайник. Укажите, какую часть вашего кошелька вы хотите поставить. Оставьте несколько EDG свободными, иначе вы не сможете отправлять транзакции со счета.

Вы также можете выбрать, куда будут депонированы ваши вознаграждения валидатора \(в тайник или контроллер\) и должны ли вознагражденные EDG автоматически повторно размещаться.

![Enter stake amount](https://user-images.githubusercontent.com/1273926/66247046-d5227480-e6cd-11e9-9ddf-45af83a102d4.png)

Подпишите и отправьте транзакцию.

### 4. Установите ключи сеанса с помощью `rotateKeys`

Нажмите **Установить сеансовые ключи** на ставке, которую вы только что создали выше.

Перейдите в командную строку, где работает ваш валидатор \(например, SSH на сервер и т. д.\) и введите эту команду. Он скажет вашему валидатору сгенерировать новый набор сеансовых ключей:

```
curl -H 'Content-Type: application/json' --data '{ "jsonrpc":"2.0", "method":"author_rotateKeys", "id":1 }' localhost:9933
```

Вывод должен выглядеть так:

```
{"jsonrpc":"2.0","result":"0x0ca0fbf245e4abca3328f8bba4a286d6cb1796516fcc68864cab580f175e6abd2b9107003014fc6baab7fd8caf4607b34222df62f606248a8a592bcba86ff9eec6e838ae8eb757eb77dffc748f1443e60c4f7617c9ea7905f0dd09ab758a8063","id":1}
```

Скопируйте шестнадцатеричный ключ из объекта JSON и вставьте его в веб-интерфейс.

![rotateKeys input](https://user-images.githubusercontent.com/1273926/66247154-ca1c1400-e6ce-11e9-9a50-11b9a6734867.png)

Подпишите и отправьте транзакцию.

### 5. Начните проверку

![Validate or nominate](https://user-images.githubusercontent.com/1273926/66247159-cf795e80-e6ce-11e9-888b-63f870c301e9.png)

Теперь вы должны увидеть кнопку **Подтвердить** на ставке. Нажмите на нее и введите комиссию, которую вы хотите взимать в качестве валидатора. Подпишите и отправьте транзакцию.

Теперь вы должны увидеть свой валидатор в разделе **Далее** на вкладке ставок.

В начале следующей **эры**, если есть открытые слоты и ваш валидатор имеет адекватную поддержку, ваш валидатор присоединится к набору активных валидаторов и автоматически начнет производить блоки. \(В тестовой сети сеансы длятся 100 блоков или 10 минут, а эры - 300 блоков или 30 минут.\)

Активные валидаторы получают вознаграждение в конце каждой эпохи. Слэшинг также происходит в конце каждой эпохи:

![Reward](https://user-images.githubusercontent.com/1273926/66247183-e455f200-e6ce-11e9-93ba-5eee38b7c606.png)

Ваш валидатор не производит блоки?

- Убедитесь, что он является частью активного набора валидаторов. Вам нужно будет подождать, пока ваш валидатор не сменится; это может занять больше времени в зависимости от наличия свободных слотов.
- Убедитесь, что он запущен с флагом `--validator`.
- Убедитесь, что ваши сеансовые ключи установлены правильно. Используйте `curl`, чтобы снова сменить сеансовые ключи, а затем отправьте еще одну транзакцию в сеть, чтобы установить новые ключи.

### 6. Прекратите проверку

Если вы хотите прекратить проверку, вы должны использовать кнопку **Остановить проверку** на своей ставке, чтобы отправить «холодную» транзакцию. Это вступит в силу, когда произойдет следующая ротация валидатора, после чего вы можете закрыть свой валидатор.

После того, как вы прекратите проверку, вы можете отправить транзакцию, чтобы разблокировать свои средства. Затем вы можете **погасить** свои несвязанные средства после того, как период развязки прошел.

![Unbond](https://user-images.githubusercontent.com/1273926/66247294-ee2c2500-e6cf-11e9-93a1-89e9fa532367.png)

![Redeem unbonded funds](https://user-images.githubusercontent.com/1273926/66247295-eec4bb80-e6cf-11e9-96a8-92ecbdc932d1.png)
