+++
title = "–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ Rust"
description = "–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ Rust"
weight = 1
+++

[–ü–µ—Ä–µ–≤–æ–¥](https://fettblog.eu/rust-error-handling/)

–Ø –Ω–∞—á–∞–ª —á–∏—Ç–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å–∫–∏–µ –ª–µ–∫—Ü–∏–∏ –ø–æ Rust, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Å–µ–º–∏–Ω–∞—Ä—ã –∏ —Ç—Ä–µ–Ω–∏–Ω–≥–∏. –û–¥–Ω–æ–π –∏–∑ —á–∞—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∞—Å—å –∏–∑ –ø–∞—Ä—ã —Å–ª–∞–π–¥–æ–≤ –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å–µ–∞–Ω—Å, –±—ã–ª–æ –≤—Å–µ, —á—Ç–æ –∫–∞—Å–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ Rust, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —Ö–æ—Ä–æ—à–æ!

–≠—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å–¥–µ–ª–∞—Ç—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º–∏, –Ω–æ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∞–∫ –º–Ω–æ–≥–æ –¥–µ—Ç–∞–ª–µ–π, —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ - –∫–∞–∫ –∏ –≤—Å–µ –≤ Rust - —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—á–µ–Ω—å —ç—Ä–≥–æ–Ω–æ–º–∏—á–Ω–æ–π –∏ –ø—Ä–æ—Å—Ç–æ–π –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## –î–µ–ª–∞–µ–º –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º–∏

–í Rust –Ω–µ—Ç —Ç–∞–∫–∏—Ö –≤–µ—â–µ–π, –∫–∞–∫ undefined –∏–ª–∏ null, –∏ —É –≤–∞—Å –Ω–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–π, –∫–∞–∫ –≤—ã –∑–Ω–∞–µ—Ç–µ –∏–∑ —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Ç–∞–∫–∏—Ö –∫–∞–∫ Java –∏–ª–∏ C#. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è:

- Option<T> –¥–ª—è –ø—Ä–∏–≤—è–∑–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –Ω–µ –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, Some(x) –∏–ª–∏ None)
- Result<T, E> –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Ok(val) vs Err(error))

–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –Ω–∏–º–∏ –æ—á–µ–Ω—å —Ç–æ–Ω–∫–∞—è –∏ –≤–æ –º–Ω–æ–≥–æ–º –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ–º–∞–Ω—Ç–∏–∫–∏ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞. –û–¥–Ω–∞–∫–æ —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã –æ–±–æ–∏—Ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–π –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂. –ù–∞ –º–æ–π –≤–∑–≥–ª—è–¥, –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã–º —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –æ–±–∞ —Ç–∏–ø–∞ –ø—Ä–æ—Å—è—Ç –≤–∞—Å —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –Ω–∏–º–∏. –õ–∏–±–æ —è–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—è –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ª–∏–±–æ —è–≤–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∏—Ö.

–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —è —Ö–æ—á—É —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ Result<T, E>, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏.

Result<T, E> - —ç—Ç–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ —Å –¥–≤—É–º—è –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏: 

```rust
enum Result<T, E> {
    Ok(T),
    Err(E),
}
```
T, E —è–≤–ª—è—é—Ç—Å—è –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏. T –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º, E –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π –æ—à–∏–±–∫–æ–π. –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ Ok –∏ Err –¥–æ—Å—Ç—É–ø–Ω—ã –≤–æ –≤—Å–µ–º –º–∏—Ä–µ.

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Result<T, E>`, –∫–æ–≥–¥–∞ —É –≤–∞—Å –µ—Å—Ç—å —á—Ç–æ-—Ç–æ, —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫. –û–∂–∏–¥–∞–µ—Ç—Å—è, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç —É—Å–ø–µ—à–Ω–æ–π, –Ω–æ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ —ç—Ç–æ –Ω–µ —É–¥–∞–µ—Ç—Å—è. –ö–æ–≥–¥–∞ —É –≤–∞—Å –µ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ Result, –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:

- –†–∞–∑–±–µ—Ä–∏—Ç–µ—Å—å —Å –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞–º–∏!
- –ò–≥–Ω–æ—Ä–∏—Ä—É–π —ç—Ç–æ
- –ü–∞–Ω–∏–∫–∞!
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–ø–∞—Å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
- –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å –æ—à–∏–±–∫–∏

–î–∞–≤–∞–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ —è –∏–º–µ—é –≤ –≤–∏–¥—É.

## –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—à–∏–±–∫–∏

–ù–∞–ø–∏—à–µ–º –Ω–µ–±–æ–ª—å—à–æ–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å—Ç—Ä–æ–∫—É –∏–∑ —Ñ–∞–π–ª–∞. –≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç –Ω–∞—Å

1. –ü—Ä–æ—á—Ç–∏—Ç–µ —Ñ–∞–π–ª
2. –ü—Ä–æ—á—Ç–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞.

–û–±–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É std::io::Error, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–æ–µ (—Ñ–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –µ–≥–æ –Ω–µ–ª—å–∑—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏ —Ç.–¥.). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –º—ã –ø–∏—à–µ–º, –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ª–∏–±–æ String, –ª–∏–±–æ io::Error. 

```rust
use std::io;
use std::fs::File;

fn read_username_from_file(path: &str) -> Result<String, io::Error> {
    let f = File::open(path);

    /* 1 */
    let mut f = match f {
        Ok(file) => file,
        Err(e) => return Err(e),
    };

    let mut s = String::new();

    /* 2 */
    match f.read_to_string(&mut s) {
        Ok(_) => Ok(s),
        Err(err) => Err(err),
    }
}
```

–í–æ—Ç —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. –ö–æ–≥–¥–∞ –º—ã –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –ø–æ –ø—É—Ç–∏, –æ–Ω –ª–∏–±–æ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Ñ–∞–π–ª–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Ok(—Ñ–∞–π–ª), –ª–∏–±–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É Err(e). –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ match f –º—ã –≤—ã–Ω—É–∂–¥–µ–Ω—ã –∏–º–µ—Ç—å –¥–µ–ª–æ —Å –¥–≤—É–º—è –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏. –õ–∏–±–æ –º—ã –Ω–∞–∑–Ω–∞—á–∞–µ–º –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Ñ–∞–π–ª–∞ f (–æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∑–∞—Ç–µ–Ω–µ–Ω–∏–µ f), –ª–∏–±–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –≤–æ–∑–≤—Ä–∞—â–∞—è –æ—à–∏–±–∫—É. –û–ø–µ—Ä–∞—Ç–æ—Ä return –∑–¥–µ—Å—å –≤–∞–∂–µ–Ω, –ø–æ—Å–∫–æ–ª—å–∫—É –º—ã —Ö–æ—Ç–∏–º –≤—ã–π—Ç–∏ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏.
2. –ó–∞—Ç–µ–º –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ s. –û–Ω —Å–Ω–æ–≤–∞ –º–æ–∂–µ—Ç –ª–∏–±–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ, –ª–∏–±–æ –≤—ã–¥–∞—Ç—å –æ—à–∏–±–∫—É. –§—É–Ω–∫—Ü–∏—è f.read_to_string –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–ª–∏–Ω—É –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –±–∞–π—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É –º—ã –º–æ–∂–µ–º —Å–ø–æ–∫–æ–π–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –≤–µ—Ä–Ω—É—Ç—å Ok(s) —Å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –º—ã –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç—É –∂–µ –æ—à–∏–±–∫—É. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —è –Ω–µ —Å—Ç–∞–≤–∏–ª —Ç–æ—á–∫—É —Å –∑–∞–ø—è—Ç–æ–π –≤ –∫–æ–Ω—Ü–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è. –ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, —ç—Ç–æ —Ç–æ, —á—Ç–æ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç.

–≠—Ç–æ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –æ—á–µ–Ω—å –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω—ã–º (—ç—Ç–æ‚Ä¶), –Ω–æ –≤—ã –≤–∏–¥–∏—Ç–µ –¥–≤–∞ –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:

1. –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –æ–∂–∏–¥–∞–µ—Ç—Å—è, —á—Ç–æ –≤—ã –±—É–¥–µ—Ç–µ –∏–º–µ—Ç—å –¥–µ–ª–æ —Å –¥–≤—É–º—è –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–µ—Ç–µ
2. –¢–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–∞–∫ –∑–∞—Ç–µ–Ω–µ–Ω–∏–µ (–ø—Ä–∏–≤—è–∑–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –∏–º–µ–Ω–∏) –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, –ø–æ–∑–≤–æ–ª—è—é—Ç –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–∂–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π –∫–æ–¥.

–û–ø–µ—Ä–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –º—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–¥–µ–ª–∞–ª–∏, —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ–º. –ü–æ—Ç–æ–º—É —á—Ç–æ –≤—ã —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∑–∞–∫–ª—é—á–µ–Ω–Ω–æ–µ –≤–Ω—É—Ç—Ä–∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è.

–ö—Å—Ç–∞—Ç–∏ –æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–∏‚Ä¶

## –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏

–ï—Å–ª–∏ –≤—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –≤–∞—à–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –ø–æ—Ç–µ—Ä–ø–∏—Ç –Ω–µ—É–¥–∞—á—É, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ .unwrap() —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: 

```rust
fn read_username_from_file(path: &str) -> Result<String, io::Error> {
    let mut f = File::open(path).unwrap(); /* 1 */
    let mut s = String::new();
    f.read_to_string(&mut s).unwrap(); /* 1 */
    Ok(s) /* 2 */
}
```

–í–æ—Ç —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. –í–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É, –º—ã –≤—ã–∑—ã–≤–∞–µ–º unwrap(), —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
2. –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–∞—Ä–∏–∞–Ω—Ç Ok, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ–º. –ú—ã –º–æ–≥–ª–∏ –±—ã –ø—Ä–æ—Å—Ç–æ –≤–µ—Ä–Ω—É—Ç—å s –∏ –æ—Å—Ç–∞–≤–∏—Ç—å Result<T, E> –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ –Ω–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏. –ú—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–Ω–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö.

–°–∞–º–∞ —Ñ—É–Ω–∫—Ü–∏—è unwrap() –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∞ –Ω–∞ —Ç–æ, —á—Ç–æ –º—ã –¥–µ–ª–∞–ª–∏ –Ω–∞ –ø–µ—Ä–≤–æ–º —à–∞–≥–µ, –∫–æ–≥–¥–∞ –º—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Å–æ –≤—Å–µ–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏: 

```rust
// result.rs

impl<T, E: fmt::Debug> Result<T, E> {
    // ...

    pub fn unwrap(&self) -> T {
        match self {
            Ok(t) => t,
            Err(e) => unwrap_failed("called `Result::unwrap()` on an `Err` value", &e),
        }
    }

    // ...
}
```
unwrap_failed - —ç—Ç–æ —è—Ä–ª—ã–∫ –∫ –ø–∞–Ω–∏–∫–µ! –º–∞–∫—Ä–æ—Å. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ .unwrap() –∏ –Ω–µ –ø–æ–ª—É—á–∏—Ç–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –≤–∞—à–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –≤—ã–π–¥–µ—Ç –∏–∑ —Å—Ç—Ä–æ—è.

–í—ã –º–æ–∂–µ—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å —Å–µ–±—è: —á–µ–º —ç—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ —Å–±–æ—é –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è? –û—Ç–≤–µ—Ç –ø—Ä–æ—Å—Ç: –≤—ã –¥–æ–ª–∂–Ω—ã —á–µ—Ç–∫–æ –∑–∞—è–≤–∏—Ç—å –æ–± —ç—Ç–æ–º. Rust —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã –≤—ã —á—Ç–æ-—Ç–æ –¥–µ–ª–∞–ª–∏, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω —è–≤–Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∞–Ω–∏–∫–æ–≤–∞—Ç—å.

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π .unwrap_, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö. –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ–¥–∏–Ω –∏–ª–∏ –¥–≤–∞ –∏–∑ –Ω–∏—Ö –¥–∞–ª—å—à–µ.

## –ü–∞–Ω–∏–∫–∞!

–ì–æ–≤–æ—Ä—è –æ –ø–∞–Ω–∏–∫–µ, –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø–∞–Ω–∏–∫–æ–≤–∞—Ç—å —Å–≤–æ–∏–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –ø–∞–Ω–∏—á–µ—Å–∫–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º: 

```rust
fn read_username_from_file(path: &str) -> Result<String, io::Error> {
    let mut f = File::open(path).expect("Error opening file");
    let mut s = String::new();
    f.read_to_string(&mut s).unwrap("Error reading file to string");
    Ok(s) 
}
```

–¢–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç .expect (...), –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–µ –Ω–∞ unwrap() 

```rust
impl<T, E: fmt::Debug> Result<T, E> {
    // ...
    pub fn expect(self, msg: &str) -> T {
        match self {
            Ok(t) => t,
            Err(e) => unwrap_failed(msg, &e),
        }
    }
}
```

–ù–æ —É –≤–∞—Å –≤ —Ä—É–∫–∞—Ö —Å–≤–æ–∏ –ø–∞–Ω–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏—Ç—å—Å—è!

–ù–æ –¥–∞–∂–µ –µ—Å–ª–∏ –º—ã –≤—Å–µ–≥–¥–∞ –±—É–¥–µ–º –æ—Ç–∫—Ä–æ–≤–µ–Ω–Ω—ã, –º—ã –º–æ–∂–µ–º –∑–∞—Ö–æ—Ç–µ—Ç—å, —á—Ç–æ–±—ã –Ω–∞—à–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –Ω–µ –ø–∞–Ω–∏–∫–æ–≤–∞–ª–æ –∏ –Ω–µ –ø–∞–¥–∞–ª–æ –≤—Å—è–∫–∏–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –º—ã —Å—Ç–∞–ª–∫–∏–≤–∞–µ–º—Å—è —Å –æ—à–∏–±–∫–æ–π. –í–æ–∑–º–æ–∂–Ω–æ, –º—ã –∑–∞—Ö–æ—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-–Ω–∏–±—É–¥—å –ø–æ–ª–µ–∑–Ω–æ–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞–ø–∞—Å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏–ª–∏‚Ä¶ –Ω—É‚Ä¶ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Ä—É—á–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏.

## –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

Rust –∏–º–µ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ —Å–≤–æ–∏—Ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è—Ö Result (–∏ Option). 

```rust
fn read_username_from_file(path: &str) -> Result<String, io::Error> {
    let mut f = File::open(path).expect("Error opening file");
    let mut s = String::new();
    f.read_to_string(&mut s).unwrap_or("admin"); /* 1 */
    Ok(s) 
}
```

1. ¬´admin¬ª –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –ª—É—á—à–∏–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º –¥–ª—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–æ –∏–¥–µ—é –≤—ã –ø–æ–Ω—è–ª–∏. –í–º–µ—Å—Ç–æ —Å–±–æ—è –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ —Å–ª—É—á–∞–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ—à–∏–±–∫–∏. –ú–µ—Ç–æ–¥ .unwrap_or_else –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –¥–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

–¢–∞–∫-—Ç–æ –ª—É—á—à–µ! –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, —Ç–æ, —á—Ç–æ –º—ã –¥–æ —Å–∏—Ö –ø–æ—Ä —É–∑–Ω–∞–ª–∏, - —ç—Ç–æ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É —Å–ª–∏—à–∫–æ–º –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–ª–∏ –¥–æ–ø—É—Å–∫–æ–º —è–≤–Ω—ã—Ö —Å–±–æ–µ–≤ –∏–ª–∏, –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–∞–ª–∏—á–∏–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π. –ù–æ –º–æ–∂–µ–º –ª–∏ –º—ã –ø–æ–ª—É—á–∏—Ç—å –∏ —Ç–æ, –∏ –¥—Ä—É–≥–æ–µ? –ö—Ä–∞—Ç–∫–∏–π –∫–æ–¥ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ—Ç –æ—à–∏–±–æ–∫? –ú—ã –º–æ–∂–µ–º!

## –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–∫–∏

–û–¥–Ω–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–Ω–µ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –Ω—Ä–∞–≤—è—Ç—Å—è –≤ —Ç–∏–ø–∞—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ Rust, - —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—à–∏–±–∫–∏. –û–±–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É, –∏–º–µ—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ç–∏–ø –æ—à–∏–±–∫–∏: io::Error. –ú—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏, —á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å –∫–æ–¥ –¥–ª—è —Å—á–∞—Å—Ç–ª–∏–≤–æ–≥–æ –ø—É—Ç–∏ (—Ç–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã) –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—à–∏–±–æ–∫, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫: 

```rust
fn read_username_from_file(path: &str) -> Result<String, io::Error> {
    let mut f = File::open(path)?;
    let mut s = String::new();
    f.read_to_string(&mut s)?;
    Ok(s) 
}
```

–í —ç—Ç–æ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ f - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–∞–π–ª–∞, f.read_to_string —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ s. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫, –º—ã –≤–µ—Ä–Ω–µ–º—Å—è –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ —Å Err(io::Error). –ö—Ä–∞—Ç–∫–∏–π –∫–æ–¥, –Ω–æ –º—ã –∏–º–µ–µ–º –¥–µ–ª–æ —Å –æ—à–∏–±–∫–æ–π –Ω–∞ –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ: 

```rust
fn main() {
    match read_username_from_file("user.txt") {
        Ok(username) => println!("Welcome {}", username),
        Err(err) => eprintln!("Whoopsie! {}", err)
    };
}
```

–ß—Ç–æ –≤ —ç—Ç–æ–º —Ö–æ—Ä–æ—à–µ–≥–æ?

1. –ú—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –Ω–µ–¥–≤—É—Å–º—ã—Å–ª–µ–Ω–Ω—ã, –º—ã –¥–æ–ª–∂–Ω—ã —á—Ç–æ-—Ç–æ –¥–µ–ª–∞—Ç—å! –í—ã –≤—Å–µ –µ—â–µ –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –º–æ–≥—É—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –æ—à–∏–±–∫–∏!
2. –ú—ã –º–æ–∂–µ–º –ø–∏—Å–∞—Ç—å –∫—Ä–∞—Ç–∫–∏–π –∫–æ–¥, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –æ—à–∏–±–æ–∫ –Ω–µ –±—ã–ª–æ. –û—à–∏–±–∫–∏ –µ—â–µ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç—å! –õ–∏–±–æ –æ—Ç –Ω–∞—Å, –ª–∏–±–æ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏.

–û–ø–µ—Ä–∞—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–Ω–∞–∫–∞ —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Option<T>, —ç—Ç–æ —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫—Ä–∞—Å–∏–≤—ã–π –∏ —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–π –∫–æ–¥!

## –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –ø–æ–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º —Ç–∏–ø–µ –æ—à–∏–±–æ–∫. –ï—Å–ª–∏ —É –Ω–∞—Å –µ—Å—Ç—å –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–∞ –æ—à–∏–±–æ–∫, –º—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—è–≤–∏—Ç—å —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —ç—Ç—É —Å–ª–µ–≥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –≤ –∫–æ—Ç–æ—Ä–æ–π –º—ã –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∏ —á–∏—Ç–∞–µ–º —Ñ–∞–π–ª—ã, –∞ –∑–∞—Ç–µ–º –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤ u64 

```rust
fn read_number_from_file(filename: &str) -> Result<u64, ???> {
    let mut file = File::open(filename)?; /* 1 */

    let mut buffer = String::new();
    file.read_to_string(&mut buffer)?; /* 1 */

    let parsed: u64 = buffer.trim().parse()?; /* 2 */

    Ok(parsed)
}
```

1. –≠—Ç–∏ –¥–≤–µ —Ç–æ—á–∫–∏ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å io::Error, –∫–∞–∫ –º—ã –∑–Ω–∞–µ–º –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤.
2. –û–¥–Ω–∞–∫–æ —ç—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É ParseIntError.

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –º—ã –Ω–µ –∑–Ω–∞–µ–º, –∫–∞–∫—É—é –æ—à–∏–±–∫—É –ø–æ–ª—É—á–∞–µ–º –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–ø—É—Å–∫–∞ –Ω–∞—à–µ–≥–æ –∫–æ–¥–∞. –ú—ã –º–æ–∂–µ–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—É—é –æ—à–∏–±–∫—É —Å –ø–æ–º–æ—â—å—é –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–∏–ø –æ—à–∏–±–∫–∏. –ß—Ç–æ –≤–µ—Ä–Ω–æ, –Ω–æ —Å–Ω–æ–≤–∞ –¥–µ–ª–∞–µ—Ç –Ω–∞—à –∫–æ–¥ –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω—ã–º. –ò–ª–∏ –º—ã –≥–æ—Ç–æ–≤–∏–º—Å—è –∫ ¬´–≤–µ—â–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è¬ª!

–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –Ω–∞—à–µ–π —Å–ª–µ–≥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π 

```rust
use std::error;

fn read_number_from_file(filename: &str) -> Result<u64, Box<dyn error::Error>> {
    let mut file = File::open(filename)?; /* 1 */

    let mut buffer = String::new();
    file.read_to_string(&mut buffer)?; /* 1 */

    let parsed: u64 = buffer.trim().parse()?; /* 2 */

    Ok(parsed)
}
```

–í–æ—Ç —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

- –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –æ—à–∏–±–∫–∏, –º—ã —Å–æ–æ–±—â–∞–µ–º Rust, —á—Ç–æ –∏–¥–µ—Ç —á—Ç–æ-—Ç–æ, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–µ —Ç—Ä—ç–π—Ç—É –æ—à–∏–±–∫–∏ Error.
- –ü–æ—Å–∫–æ–ª—å–∫—É –º—ã –Ω–µ –∑–Ω–∞–µ–º, —á—Ç–æ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –º—ã –¥–æ–ª–∂–Ω—ã —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ —Ç–∏–ø–∞–∂–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º: dyn std::error::Error.
- –ê –ø–æ—Å–∫–æ–ª—å–∫—É –º—ã –Ω–µ –∑–Ω–∞–µ–º, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –±—É–¥–µ—Ç –±–æ–ª—å—à–∏–º, –º—ã —É–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –µ–≥–æ –≤ Box. –£–º–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π –Ω–∞ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –±—É–¥—É—Ç –≤ –∫—É—á–µ

Box<dyn Trait> –≤–∫–ª—é—á–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –≤ Rust: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞ –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –î–ª—è —ç—Ç–æ–≥–æ Rust –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ö—Ä–∞–Ω—è—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –í–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–∏ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–ª—è –≤—ã–∑–æ–≤–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π —Ñ—É–Ω–∫—Ü–∏–π.

–†–∏—Å—É–Ω–æ–∫: –°—Ö–µ–º–∞ –ø–∞–º—è—Ç–∏ Box –∏ Box

–ò —Ç–µ–ø–µ—Ä—å –Ω–∞—à –∫–æ–¥ —Å–Ω–æ–≤–∞ –ª–∞–∫–æ–Ω–∏—á–µ–Ω, –∏ –Ω–∞—à–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∏–º–µ—Ç—å –¥–µ–ª–æ —Å –≤–æ–∑–º–æ–∂–Ω–æ–π –æ—à–∏–±–∫–æ–π.

–ü–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π —è –∑–∞–¥–∞—é, –∫–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é —ç—Ç–æ –ª—é–¥—è–º –Ω–∞ –º–æ–∏—Ö –∫—É—Ä—Å–∞—Ö: –Ω–æ –º–æ–∂–µ–º –ª–∏ –º—ã –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–æ–π —Ç–∏–ø –æ—à–∏–±–∫–∏ –ø—Ä–æ–∏–∑–æ—à–µ–ª? –ú—ã –º–æ–∂–µ–º! –ú–µ—Ç–æ–¥ downcast_ref() –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ç–∏–ø—É. 

```rust
fn main() {
    match read_number_from_file("number.txt") {
        Ok(v) => println!("Your number is {}", v),
        Err(err) => {
            if let Some(io_err) = err.downcast_ref::<std::io::Error>() {
                eprintln!("Error during IO! {}", io_err)
            } else if let Some(pars_err) = err.downcast_ref::<ParseIntError>() {
                eprintln!("Error during parsing {}", pars_err)
            }
        }
    };
}
```

–û—Ç–ª–∏—á–Ω–æ!

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ—à–∏–±–∫–∏

–û–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –µ—â–µ –ª—É—á—à–µ –∏ –≥–∏–±—á–µ, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –¥–ª—è —Å–≤–æ–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –æ—à–∏–±–∫–∏, –≤–∞—à–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—à–∏–±–æ–∫ –¥–æ–ª–∂–Ω—ã —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —Ç—Ä—ç–π—Ç—É std::error::Error. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ—Ä—Ç–µ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–ª–∏ –¥–∞–∂–µ –µ–¥–∏–Ω–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞.

–í–∞–º –Ω–µ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ —Ñ—É–Ω–∫—Ü–∏–∏ std::error::Error, –Ω–æ –≤–∞–º –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–∞–∫ —Ç—Ä–µ–π—Ç Debug, —Ç–∞–∫ –∏ —Å–≤–æ–π—Å—Ç–≤–æ Display. –ü—Ä–∏—á–∏–Ω–∞ –≤ —Ç–æ–º, —á—Ç–æ –æ—à–∏–±–∫–∏ —Ö–æ—Ç—è—Ç –≥–¥–µ-—Ç–æ –ø–µ—á–∞—Ç–∞—Ç—å. –í–æ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä: 

```rust
#[derive(Debug)] /* 1 */
pub struct ParseArgumentsError(String); /* 2 */

impl std::error::Error for ParseArgumentsError {} /* 3 */

/* 4 */
impl Display for ParseArgumentsError {
    fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {
        write!(f, "{}", self.0)
    }
}
```

1. –ú—ã –≤—ã–≤–æ–¥–∏–º —Ç—Ä—ç–π—Ç—É Debug.
2. –ù–∞—à–∞ ParseArgumentsError - —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ—Ä—Ç–µ–∂–∞ —Å –æ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
3. –†–µ–∞–ª–∏–∑—É–µ–º std::error::Error –¥–ª—è ParseArgumentsError. –ë–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ
4. –ú—ã —Ä–µ–∞–ª–∏–∑—É–µ–º Display, –≥–¥–µ –≤—ã–≤–æ–¥–∏–º –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –Ω–∞—à–µ–≥–æ –∫–æ—Ä—Ç–µ–∂–∞.

–ò —ç—Ç–æ –≤—Å–µ! 

## Anyhow‚Ä¶

–ü–æ—Å–∫–æ–ª—å–∫—É –º–Ω–æ–≥–∏–µ –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –≤—ã—É—á–∏–ª–∏, –æ—á–µ–Ω—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω—ã, –∫–æ–Ω–µ—á–Ω–æ, —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∫—Ä—ç–π—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É—é—Ç –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –∏–∑ –Ω–∏—Ö. –§–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏–π –∫—Ä—ç–π—Ç Anyhow Crate - –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö, –∫–æ—Ç–æ—Ä—ã–π –¥–∞–µ—Ç –≤–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é —É–¥–æ–±–Ω—ã—Ö –º–∞–∫—Ä–æ—Å–æ–≤ –∏ —Ç–∏–ø–æ–≤.

## –ù–∏–∂–Ω—è—è –ª–∏–Ω–∏—è

–≠—Ç–æ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫ –≤ Rust. –ö–æ–Ω–µ—á–Ω–æ, —ç—Ç–æ –µ—â–µ –Ω–µ –≤—Å–µ, –Ω–æ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–º–æ—á—å –≤–∞–º –Ω–∞—á–∞—Ç—å! –≠—Ç–æ —Ç–∞–∫–∂–µ –º–æ—è –ø–µ—Ä–≤–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å—Ç–∞—Ç—å—è –ø–æ Rust, –∏ —è –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –µ–µ –±—É–¥–µ—Ç –µ—â–µ –º–Ω–æ–≥–æ. –î–∞–π—Ç–µ –º–Ω–µ –∑–Ω–∞—Ç—å, –µ—Å–ª–∏ –≤–∞–º —ç—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å, –∏ –µ—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏—Ç–µ –∫–∞–∫–∏–µ-–ª–∏–±–æ‚Ä¶ —Ö–∞-—Ö–∞‚Ä¶ –æ—à–∏–±–∫–∏ (–±–∞-–¥—É–º-—Ü ü•Å), —è –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à—É —Ç–≤–∏—Ç. 