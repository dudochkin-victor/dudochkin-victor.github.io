<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Программы тестирования | Dudochkin Victor </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="google-site-verification" content="Kepqb6k6uptlwngnHbBVJmqQtwNW8zfHyQBbTXLYAgA" />
    <meta name="yandex-verification" content="8e8bc73c2566b473" />
    <style>
    :root {
        /* Primary theme color */
        /* --primary-color: #121A26; */
        --primary-color: #0f1419;
        /* Primary theme text color */
        /* --primary-text-color: #121A26; */
        --primary-text-color: #0f1419;
        /* Primary theme link color */
        --primary-link-color: #053961;
        /* Secondary color: the background body color */
        --secondary-color: #F0F0F0;
        --secondary-text-color: #1C2834;
        /* Highlight text color of table of content */
        --toc-highlight-text-color: #053961;
    }
</style>
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-47MMPLLY44"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-47MMPLLY44');
    </script>
    

    
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
    
        ym('87064264', "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
        });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/87064264" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    
    
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/mdl.min.css">
    <link rel="stylesheet" href="https://dudochkin-victor.github.io/style.css">
    
    
</head>

<body>
    
<header class="box-shadow">
    

<a href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;">
    <div class="logo">
        <img src="https://dudochkin-victor.github.io/ferris.png" alt="logo">
        Dudochkin Victor
    </div>
</a>

<nav>
    <!-- 
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;showcases&#x2F;">Showcases</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;changelog&#x2F;">Changelog</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;about&#x2F;">About</a>
     -->

    
        
        <a class="nav-item subtitle-text" href="&#x2F;solana&#x2F;">Solana</a>
        
        <a class="nav-item subtitle-text" href="&#x2F;edgeware&#x2F;">Edgeware</a>
        
        <a class="nav-item subtitle-text" href="&#x2F;blog&#x2F;">Блог</a>
        
        <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;github.com&#x2F;dudochkin-victor">Github</a>
        
    
</nav>

</header>

 
    <main>
        
        
        
        
        
        <div class="toc">
            <div class="toc-sticky">
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/solana/implemented-proposals/testing-programs/#cherty-asyncclient-i-syncclient">Черты AsyncClient и SyncClient</a>
                </div>
                
                
                <div class="toc-item-child">
                    <a class="subtext" href="https://dudochkin-victor.github.io/solana/implemented-proposals/testing-programs/#tonkii-klient-dlia-klasterov"><small>- Тонкий клиент для кластеров</small></a>
                </div>
                
                <div class="toc-item-child">
                    <a class="subtext" href="https://dudochkin-victor.github.io/solana/implemented-proposals/testing-programs/#tpuclient-dlia-tpu"><small>- TpuClient для TPU</small></a>
                </div>
                
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/solana/implemented-proposals/testing-programs/#nizkourovnevoe-testirovanie">Низкоуровневое тестирование</a>
                </div>
                
                
                <div class="toc-item-child">
                    <a class="subtext" href="https://dudochkin-victor.github.io/solana/implemented-proposals/testing-programs/#bankklient-dlia-banka"><small>- БанкКлиент для Банка</small></a>
                </div>
                
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/solana/implemented-proposals/testing-programs/#modul-noe-testirovanie-s-pomoshch-iu-sredy-vypolneniia">Модульное тестирование с помощью среды выполнения</a>
                </div>
                
                
            </div>
        </div>
        
        

        <div class="content text">
            
<h1>Программы тестирования</h1>

<p>Приложения отправляют транзакции в кластер Solana и запрашивают валидаторы, чтобы подтвердить, что транзакции были обработаны, и проверить результат каждой транзакции. Когда кластер ведет себя не так, как ожидалось, это может быть по ряду причин:</p>
<ul>
<li>
<p>Программа глючит</p>
</li>
<li>
<p>Загрузчик BPF отклонил небезопасную программную инструкцию</p>
</li>
<li>
<p>Сделка была слишком большой</p>
</li>
<li>
<p>Транзакция недействительна</p>
</li>
<li>
<p>Среда выполнения пыталась выполнить транзакцию при доступе к ней другой</p>
<p>тот же аккаунт</p>
</li>
<li>
<p>Сеть сбросила транзакцию</p>
</li>
<li>
<p>Кластер откатил леджер</p>
</li>
<li>
<p>Валидатор злонамеренно ответил на запросы</p>
</li>
</ul>
<h2 id="cherty-asyncclient-i-syncclient">Черты AsyncClient и SyncClient</h2>
<p>Для устранения неполадок приложение должно перенацелить компонент более низкого уровня, где возможно меньше ошибок. Перенацеливание можно выполнить с помощью различных реализаций трейтов AsyncClient и SyncClient.</p>
<p>Компоненты реализуют следующие основные методы:</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>trait AsyncClient {
</span><span>    fn async_send_transaction(&amp;self, transaction: Transaction) -&gt; io::Result&lt;Signature&gt;;
</span><span>}
</span><span>
</span><span>trait SyncClient {
</span><span>    fn get_signature_status(&amp;self, signature: &amp;Signature) -&gt; Result&lt;Option&lt;transaction::Result&lt;()&gt;&gt;&gt;;
</span><span>}
</span></code></pre>
<p>Пользователи отправляют транзакции и асинхронно и синхронно ожидают результатов.</p>
<h3 id="tonkii-klient-dlia-klasterov">Тонкий клиент для кластеров</h3>
<p>Реализация самого высокого уровня, ThinClient, нацелена на кластер Solana, который может быть развернутой тестовой сетью или локальным кластером, работающим на машине разработки.</p>
<h3 id="tpuclient-dlia-tpu">TpuClient для TPU</h3>
<p>Следующий уровень — это реализация TPU, которая еще не реализована. На уровне TPU приложение отправляет транзакции по каналам Rust, где не может быть сюрпризов от сетевых очередей или отброшенных пакетов. TPU реализует все «обычные» ошибки транзакций. Он выполняет проверку подписи, может сообщать об ошибках в использовании учетной записи и в противном случае приводит к бухгалтерской книге с доказательствами хэшей истории.</p>
<h2 id="nizkourovnevoe-testirovanie">Низкоуровневое тестирование</h2>
<h3 id="bankklient-dlia-banka">БанкКлиент для Банка</h3>
<p>Ниже уровня ТПУ находится банк. Банк не проверяет подпись и не создает бухгалтерскую книгу. Банк — это удобный уровень для тестирования новых сетевых программ. Это позволяет разработчикам переключаться между реализациями собственных программ и вариантами, скомпилированными BPF. Здесь нет необходимости в трейте Transact. API банка синхронный.</p>
<h2 id="modul-noe-testirovanie-s-pomoshch-iu-sredy-vypolneniia">Модульное тестирование с помощью среды выполнения</h2>
<p>Под банком находится среда выполнения. Среда выполнения — идеальная тестовая среда для модульного тестирования. Статически связывая среду выполнения с собственной реализацией программы, разработчик получает кратчайший возможный цикл редактирования-компиляции-запуска. Без какой-либо динамической компоновки трассировка стека включает символы отладки, а программные ошибки легко устраняются.</p>










<script src="https://giscus.app/client.js"
    data-repo="dudochkin-victor&#x2F;dudochkin-victor.github.io"
    data-repo-id="MDEwOlJlcG9zaXRvcnkzNzgwNTYx"
    data-category="General"
    data-category-id="DIC_kwDOADmv0c4CAhvj"
    data-mapping="pathname"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-theme="light"
    data-lang="en"
    crossorigin="anonymous"
    async>
</script>



        </div>

        
        
    </main>

    
    <footer>
        <small class="subtext">
            <a href="https://angular-rust.github.io">Dudochkin Victor</a> © 2021
        </small>
    </footer>
    
</body>
<script>
    function highlightNav(heading) {
        let pathname = location.pathname;
        document.querySelectorAll(".toc a").forEach((item) => {
            item.classList.remove("active");
        });
        document.querySelector(".toc a[href$='" + pathname + "#" + heading + "']").classList.add("active");
    }

    let currentHeading = "";
    window.onscroll = function () {
        let h = document.querySelectorAll("h1,h2,h3,h4,h5,h6");
        let elementArr = [];

        h.forEach(item => {
            if (item.id !== "") {
                elementArr[item.id] = item.getBoundingClientRect().top;
            }
        });
        elementArr.sort();
        for (let key in elementArr) {
            if (!elementArr.hasOwnProperty(key)) {
                continue;
            }
            if (elementArr[key] > 0 && elementArr[key] < 300) {
                if (currentHeading !== key) {
                    highlightNav(key);
                    currentHeading = key;
                }
                break;
            }
        }
    }
</script>

</html>
