<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Аккаунты только для чтения | Dudochkin Victor </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="google-site-verification" content="Kepqb6k6uptlwngnHbBVJmqQtwNW8zfHyQBbTXLYAgA" />
    <meta name="yandex-verification" content="8e8bc73c2566b473" />
    <style>
    :root {
        /* Primary theme color */
        /* --primary-color: #121A26; */
        --primary-color: #0f1419;
        /* Primary theme text color */
        /* --primary-text-color: #121A26; */
        --primary-text-color: #0f1419;
        /* Primary theme link color */
        --primary-link-color: #053961;
        /* Secondary color: the background body color */
        --secondary-color: #F0F0F0;
        --secondary-text-color: #1C2834;
        /* Highlight text color of table of content */
        --toc-highlight-text-color: #053961;
    }
</style>
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-47MMPLLY44"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-47MMPLLY44');
    </script>
    

    
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
    
        ym('87064264', "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
        });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/87064264" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    
    
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/mdl.min.css">
    <link rel="stylesheet" href="https://dudochkin-victor.github.io/style.css">
    
    
</head>

<body>
    
<header class="box-shadow">
    

<a href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;">
    <div class="logo">
        <img src="https://dudochkin-victor.github.io/ferris.png" alt="logo">
        Dudochkin Victor
    </div>
</a>

<nav>
    <!-- 
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;showcases&#x2F;">Showcases</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;changelog&#x2F;">Changelog</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;about&#x2F;">About</a>
     -->

    
        
        <a class="nav-item subtitle-text" href="&#x2F;solana&#x2F;">Solana</a>
        
        <a class="nav-item subtitle-text" href="&#x2F;edgeware&#x2F;">Edgeware</a>
        
        <a class="nav-item subtitle-text" href="&#x2F;blog&#x2F;">Блог</a>
        
        <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;github.com&#x2F;dudochkin-victor">Github</a>
        
    
</nav>

</header>

 
    <main>
        
        
        
        
        
        <div class="toc">
            <div class="toc-sticky">
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/solana/implemented-proposals/readonly-accounts/#obrabotka-vo-vremia-vypolneniia">Обработка во время выполнения</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/solana/implemented-proposals/readonly-accounts/#optimizatsiia-blokirovki-uchetnoi-zapisi">Оптимизация блокировки учетной записи</a>
                </div>
                
                
            </div>
        </div>
        
        

        <div class="content text">
            
<h1>Аккаунты только для чтения</h1>

<p>Этот дизайн охватывает обработку учетных записей только для чтения и записи в <a href="../validator/runtime/">runtime</a>. Несколько транзакций, которые изменяют одну и ту же учетную запись, должны обрабатываться последовательно, чтобы они всегда воспроизводились в одном и том же порядке. В противном случае это может привести к недетерминированности леджера. Однако некоторым транзакциям нужно только читать, а не изменять данные в определенных учетных записях. Несколько транзакций, которые считывают только одну и ту же учетную запись, могут обрабатываться параллельно, поскольку порядок воспроизведения не имеет значения, что обеспечивает выигрыш в производительности.</p>
<p>Чтобы идентифицировать учетные записи только для чтения, структура MessageHeader транзакции содержит <code>num_readonly_signed_accounts</code> и <code>num_readonly_unsigned_accounts</code>. Инструкции <code>program_ids</code> включены в вектор учетных записей как неподписанные учетные записи только для чтения, поскольку исполняемые учетные записи также не могут быть изменены во время обработки инструкции.</p>
<h2 id="obrabotka-vo-vremia-vypolneniia">Обработка во время выполнения</h2>
<p>Правила обработки транзакций во время выполнения необходимо немного обновить. Программы по-прежнему не могут писать или тратить счета, которые им не принадлежат. Но новые правила среды выполнения гарантируют, что учетные записи только для чтения не могут быть изменены даже программами, которым они принадлежат.</p>
<p>Учетные записи только для чтения имеют следующее свойство:</p>
<ul>
<li>Доступ только для чтения ко всем полям учетной записи, включая лампы (не могут быть зачислены или дебетованы) и данные учетной записи</li>
</ul>
<p>Инструкции по кредитованию, дебетованию или изменению учетной записи только для чтения не будут выполнены.</p>
<h2 id="optimizatsiia-blokirovki-uchetnoi-zapisi">Оптимизация блокировки учетной записи</h2>
<p>Модуль «Учетные записи» отслеживает текущие заблокированные учетные записи во время выполнения, отделяя учетные записи только для чтения от учетных записей с возможностью записи. Блокировка учетной записи по умолчанию дает учетной записи обозначение «доступной для записи» и может быть доступна только одному потоку обработки одновременно. Учетные записи только для чтения блокируются отдельным механизмом, позволяющим выполнять параллельное чтение.</p>
<p>Хотя учетные записи только для чтения еще не реализованы, они могут кэшироваться в памяти и совместно использоваться всеми потоками, выполняющими транзакции. Идеальный проект должен хранить этот кеш, пока любая транзакция, проходящая через среду выполнения, ссылается на учетную запись только для чтения, и освобождать кеш, когда последняя транзакция выходит из среды выполнения.</p>
<p>Учетные записи только для чтения также могут быть переданы в процессор в качестве ссылок, сохраняя дополнительную копию.</p>










<script src="https://giscus.app/client.js"
    data-repo="dudochkin-victor&#x2F;dudochkin-victor.github.io"
    data-repo-id="MDEwOlJlcG9zaXRvcnkzNzgwNTYx"
    data-category="General"
    data-category-id="DIC_kwDOADmv0c4CAhvj"
    data-mapping="pathname"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-theme="light"
    data-lang="en"
    crossorigin="anonymous"
    async>
</script>



        </div>

        
        
    </main>

    
    <footer>
        <small class="subtext">
            <a href="https://angular-rust.github.io">Dudochkin Victor</a> © 2021
        </small>
    </footer>
    
</body>
<script>
    function highlightNav(heading) {
        let pathname = location.pathname;
        document.querySelectorAll(".toc a").forEach((item) => {
            item.classList.remove("active");
        });
        document.querySelector(".toc a[href$='" + pathname + "#" + heading + "']").classList.add("active");
    }

    let currentHeading = "";
    window.onscroll = function () {
        let h = document.querySelectorAll("h1,h2,h3,h4,h5,h6");
        let elementArr = [];

        h.forEach(item => {
            if (item.id !== "") {
                elementArr[item.id] = item.getBoundingClientRect().top;
            }
        });
        elementArr.sort();
        for (let key in elementArr) {
            if (!elementArr.hasOwnProperty(key)) {
                continue;
            }
            if (elementArr[key] > 0 && elementArr[key] < 300) {
                if (currentHeading !== key) {
                    highlightNav(key);
                    currentHeading = key;
                }
                break;
            }
        }
    }
</script>

</html>
