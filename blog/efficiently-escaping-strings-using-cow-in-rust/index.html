<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ —Å –ø–æ–º–æ—â—å—é Cow in Rust | Dudochkin Victor </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="google-site-verification" content="Kepqb6k6uptlwngnHbBVJmqQtwNW8zfHyQBbTXLYAgA" />
    <meta name="yandex-verification" content="8e8bc73c2566b473" />
    <style>
    :root {
        /* Primary theme color */
        /* --primary-color: #121A26; */
        --primary-color: #0f1419;
        /* Primary theme text color */
        /* --primary-text-color: #121A26; */
        --primary-text-color: #0f1419;
        /* Primary theme link color */
        --primary-link-color: #053961;
        /* Secondary color: the background body color */
        --secondary-color: #F0F0F0;
        --secondary-text-color: #1C2834;
        /* Highlight text color of table of content */
        --toc-highlight-text-color: #053961;
    }
</style>
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-47MMPLLY44"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-47MMPLLY44');
    </script>
    

    
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
    
        ym('87064264', "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
        });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/87064264" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    
    
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/mdl.min.css">
    <link rel="stylesheet" href="https://dudochkin-victor.github.io/style.css">
    
    
</head>

<body>
    
<header class="box-shadow">
    

<a href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;">
    <div class="logo">
        <img src="https://dudochkin-victor.github.io/ferris.png" alt="logo">
        Dudochkin Victor
    </div>
</a>

<nav>
    <!-- 
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;showcases&#x2F;">Showcases</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;changelog&#x2F;">Changelog</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;about&#x2F;">About</a>
     -->

    
        
        <a class="nav-item subtitle-text" href="&#x2F;solana&#x2F;">Solana</a>
        
        <a class="nav-item subtitle-text" href="&#x2F;edgeware&#x2F;">Edgeware</a>
        
        <a class="nav-item subtitle-text" href="&#x2F;blog&#x2F;">–ë–ª–æ–≥</a>
        
        <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;github.com&#x2F;dudochkin-victor">Github</a>
        
    
</nav>

</header>

 
    <main>
        
        
        
        

        <div class="content text">
            
<h1>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ —Å –ø–æ–º–æ—â—å—é Cow in Rust</h1>

<p><a href="https://fullstackmilk.dev/efficiently_escaping_strings_using_cow_in_rust/">–ü–µ—Ä–µ–≤–æ–¥</a> | –ê–≤—Ç–æ—Ä –æ—Ä–∏–≥–∏–Ω–∞–ª–∞: Full stack milk</p>
<p>–≠—Ç–æ —É–¥–æ–±–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞, –∞ —Ç–∞–∫–∂–µ —Ö–æ—Ä–æ—à–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ç–∏–ø–∞ Cow –≤ Rust.</p>
<p>–ü–æ —Å—É—Ç–∏, –µ—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–π —Ç–µ–∫—Å—Ç (–¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ HTML –∏–ª–∏ CSV-—Ñ–∞–π–ª –∏–ª–∏ —á—Ç–æ-—Ç–æ –µ—â–µ), –Ω–∞–º –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –≤–µ—Ä–Ω—É—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—Å–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ –∑–∞–º–µ–Ω–µ–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ escape-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏. –ù–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –Ω–∞—à–∏—Ö –≤—Ö–æ–¥–Ω—ã—Ö —Å—Ç—Ä–æ–∫ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ –Ω—É–∂–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å, —Ç–∞–∫ –∫–∞–∫ –∂–µ –Ω–∞–º –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ–Ω—É–∂–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã —Å—Ç—Ä–æ–∫ –≤ —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö?</p>
<p>–ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ —Ç—Ä–µ–±—É–µ—Ç —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –º—ã —Ö–æ—Ç–∏–º –≤–µ—Ä–Ω—É—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É, –Ω–æ –µ—Å–ª–∏ –Ω–µ—Ç, –º—ã —Ö–æ—Ç–∏–º –≤–µ—Ä–Ω—É—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –∏—Å—Ö–æ–¥–Ω—É—é (&amp;str) –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–±–µ–∂–∞—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏. std::–∑–∞–∏–º—Å—Ç–≤–æ–≤–∞—Ç—å::Cow –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –¥–ª—è —ç—Ç–æ–≥–æ. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ –ª–∏–±–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ &amp;str), –ª–∏–±–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–∞ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö (String).</p>
<p>–°—É—Ç—å –Ω–∞—à–µ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Ç–∞–∫–æ–≤–∞:</p>
<ul>
<li>–ü–µ—Ä–µ–±–∏—Ä–∞–π—Ç–µ —Å–∏–º–≤–æ–ª—ã –≤ —Å—Ç—Ä–æ–∫–µ, –ø–æ–∫–∞ –Ω–µ –Ω–∞–π–¥–µ—Ç–µ —Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å.</li>
<li>–ï—Å–ª–∏ –≤—ã –Ω–µ –Ω–∞—à–ª–∏ –Ω–∏–∫–∞–∫–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤, –ø—Ä–æ—Å—Ç–æ –≤–µ—Ä–Ω–∏—Ç–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–æ–∫—É —Å –ø–æ–º–æ—â—å—é Cow::Borrowed (–≤–≤–æ–¥) (–Ω–æ–≤—ã–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è üéâ).</li>
<li>–ï—Å–ª–∏ –≤—ã –Ω–∞–π–¥–µ—Ç–µ –æ—Å–æ–±–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, —Ç–æ:
<ul>
<li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∏–º–≤–æ–ª—ã –¥–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –≤ –Ω–æ–≤—É—é –∏–∑–º–µ–Ω—è–µ–º—É—é —Å—Ç—Ä–æ–∫—É (–º—ã —É–∂–µ –∑–Ω–∞–µ–º, —á—Ç–æ —Å–∏–º–≤–æ–ª—ã, —Å—Ç–æ—è—â–∏–µ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º —Å–∏–º–≤–æ–ª–æ–º, –±–µ–∑–æ–ø–∞—Å–Ω—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã —É–∂–µ –ø—Ä–æ–≤–µ—Ä–∏–ª–∏ –∏—Ö).</li>
<li>–ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Å–∏–º–≤–æ–ª—ã, —ç–∫—Ä–∞–Ω–∏—Ä—É—è –∏—Ö –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –∞ –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–ª—è—è –∏—Ö –≤ –Ω–∞—à—É –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É.</li>
<li>–í–µ—Ä–Ω–∏—Ç–µ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É, –∏—Å–ø–æ–ª—å–∑—É—è Cow::Owned (escaped_string).</li>
</ul>
</li>
</ul>
<p>–í–æ—Ç –ø—Ä–∏–º–µ—Ä —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤ HTML: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>borrow</span><span style="color:#f29668;">::</span><span>Cow</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span style="color:#ff7733;">pub fn </span><span style="color:#ffb454;">html_escape</span><span>(</span><span style="color:#f29718;">input</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span>Cow&lt;</span><span style="color:#ff7733;">str</span><span>&gt; {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// Iterate through the characters, checking if each one needs escaping
</span><span>    </span><span style="color:#ff7733;">for </span><span>(i</span><span style="color:#bfbab0cc;">,</span><span> ch) </span><span style="color:#f29668;">in</span><span> input</span><span style="color:#f29668;">.</span><span style="color:#f07178;">chars</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">enumerate</span><span>() {
</span><span>        </span><span style="color:#ff7733;">if </span><span style="color:#f07178;">html_escape_char</span><span>(ch)</span><span style="color:#f29668;">.</span><span style="color:#f07178;">is_some</span><span>() {
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// At least one char needs escaping, so we need to return a brand
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// new `String` rather than the original
</span><span>
</span><span>            </span><span style="color:#ff7733;">let mut</span><span> escaped_string </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>with_capacity(input</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// Calling `String::with_capacity()` instead of `String::new()` is
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// a slight optimisation to reduce the number of allocations we
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// need to do.
</span><span>            </span><span style="font-style:italic;color:#5c6773;">//
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// We know that the escaped string is always at least as long as
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// the unescaped version so we can preallocate at least that much
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// space.
</span><span>
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// We already checked the characters up to index `i` don&#39;t need
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// escaping so we can just copy them straight in
</span><span>            escaped_string</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push_str</span><span>(</span><span style="color:#f29668;">&amp;</span><span>input[</span><span style="color:#f29668;">..</span><span>i])</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// Escape the remaining characters if they need it and add them to
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// our escaped string
</span><span>            </span><span style="color:#ff7733;">for</span><span> ch </span><span style="color:#f29668;">in</span><span> input[i</span><span style="color:#f29668;">..</span><span>]</span><span style="color:#f29668;">.</span><span style="color:#f07178;">chars</span><span>() {
</span><span>                </span><span style="color:#ff7733;">match </span><span style="color:#f07178;">html_escape_char</span><span>(ch) {
</span><span>                    </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(escaped_char) </span><span style="color:#f29668;">=&gt;</span><span> escaped_string</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push_str</span><span>(escaped_char)</span><span style="color:#bfbab0cc;">,
</span><span>                    </span><span style="font-style:italic;color:#39bae6;">None </span><span style="color:#f29668;">=&gt;</span><span> escaped_string</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(ch)</span><span style="color:#bfbab0cc;">,
</span><span>                }</span><span style="color:#bfbab0cc;">;
</span><span>            }
</span><span>
</span><span>            </span><span style="color:#ff7733;">return </span><span>Cow</span><span style="color:#f29668;">::</span><span>Owned(escaped_string)</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// We&#39;ve iterated through all of `input` and didn&#39;t find any special
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// characters, so it&#39;s safe to just return the original string
</span><span>    Cow</span><span style="color:#f29668;">::</span><span>Borrowed(input)
</span><span>}
</span><span>
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">html_escape_char</span><span>(</span><span style="color:#f29718;">ch</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">char</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="font-style:italic;color:#39bae6;">Option</span><span>&lt;</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;static str</span><span>&gt; {
</span><span>    </span><span style="color:#ff7733;">match</span><span> ch {
</span><span>        </span><span style="color:#c2d94c;">&#39;&amp;&#39; </span><span style="color:#f29668;">=&gt; </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(</span><span style="color:#c2d94c;">&quot;&amp;amp&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="color:#c2d94c;">&#39;&lt;&#39; </span><span style="color:#f29668;">=&gt; </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(</span><span style="color:#c2d94c;">&quot;&amp;lt;&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="color:#c2d94c;">&#39;&gt;&#39; </span><span style="color:#f29668;">=&gt; </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(</span><span style="color:#c2d94c;">&quot;&amp;gt;&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="color:#c2d94c;">&#39;&quot;&#39; </span><span style="color:#f29668;">=&gt; </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(</span><span style="color:#c2d94c;">&quot;&amp;quot;&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="color:#c2d94c;">&#39;</span><span style="color:#95e6cb;">\&#39;</span><span style="color:#c2d94c;">&#39; </span><span style="color:#f29668;">=&gt; </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(</span><span style="color:#c2d94c;">&quot;&amp;#x27;&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="color:#f29668;">_ =&gt; </span><span style="font-style:italic;color:#39bae6;">None</span><span style="color:#bfbab0cc;">,
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">cfg</span><span>(test)]
</span><span style="color:#ff7733;">mod </span><span style="color:#59c2ff;">tests </span><span>{
</span><span>    </span><span style="color:#ff7733;">use super</span><span style="color:#f29668;">::*</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>    </span><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">test</span><span>]
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">returns_text_that_does_not_need_escaping_as_is</span><span>() {
</span><span>        </span><span style="color:#ff7733;">let</span><span> input </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;This is a safe string!&quot;</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>        </span><span style="color:#ff7733;">let</span><span> escaped </span><span style="color:#f29668;">= </span><span style="color:#f07178;">html_escape</span><span>(input)</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>        </span><span style="color:#f07178;">assert_eq!</span><span>(escaped</span><span style="color:#bfbab0cc;">, </span><span>Cow</span><span style="color:#f29668;">::</span><span>Borrowed(input))</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">test</span><span>]
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">escapes_text_containing_html_special_characters</span><span>() {
</span><span>        </span><span style="color:#ff7733;">let</span><span> input </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;This is a &lt;script&gt;alert(&#39;nasty&#39;);&lt;/script&gt; string&quot;</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>        </span><span style="color:#ff7733;">let</span><span> expected</span><span style="color:#bfbab0cc;">: </span><span>Cow&lt;</span><span style="color:#ff7733;">str</span><span>&gt; </span><span style="color:#f29668;">= </span><span>Cow</span><span style="color:#f29668;">::</span><span>Owned(
</span><span>            </span><span style="color:#c2d94c;">&quot;This is a &amp;lt;script&amp;gt;alert(&amp;#x27;nasty&amp;#x27;);&amp;lt;/script&amp;gt; string&quot;</span><span style="color:#f29668;">.</span><span style="color:#f07178;">to_string</span><span>()</span><span style="color:#bfbab0cc;">,
</span><span>        )</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>        </span><span style="color:#ff7733;">let</span><span> escaped </span><span style="color:#f29668;">= </span><span style="color:#f07178;">html_escape</span><span>(input)</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>        </span><span style="color:#f07178;">assert_eq!</span><span>(escaped</span><span style="color:#bfbab0cc;">,</span><span> expected)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span></code></pre>










<script src="https://giscus.app/client.js"
    data-repo="dudochkin-victor&#x2F;dudochkin-victor.github.io"
    data-repo-id="MDEwOlJlcG9zaXRvcnkzNzgwNTYx"
    data-category="General"
    data-category-id="DIC_kwDOADmv0c4CAhvj"
    data-mapping="pathname"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-theme="light"
    data-lang="en"
    crossorigin="anonymous"
    async>
</script>



        </div>

        
        
    </main>

    
    <footer>
        <small class="subtext">
            <a href="https://angular-rust.github.io">Dudochkin Victor</a> ¬© 2021
        </small>
    </footer>
    
</body>
<script>
    function highlightNav(heading) {
        let pathname = location.pathname;
        document.querySelectorAll(".toc a").forEach((item) => {
            item.classList.remove("active");
        });
        document.querySelector(".toc a[href$='" + pathname + "#" + heading + "']").classList.add("active");
    }

    let currentHeading = "";
    window.onscroll = function () {
        let h = document.querySelectorAll("h1,h2,h3,h4,h5,h6");
        let elementArr = [];

        h.forEach(item => {
            if (item.id !== "") {
                elementArr[item.id] = item.getBoundingClientRect().top;
            }
        });
        elementArr.sort();
        for (let key in elementArr) {
            if (!elementArr.hasOwnProperty(key)) {
                continue;
            }
            if (elementArr[key] > 0 && elementArr[key] < 300) {
                if (currentHeading !== key) {
                    highlightNav(key);
                    currentHeading = key;
                }
                break;
            }
        }
    }
</script>

</html>
