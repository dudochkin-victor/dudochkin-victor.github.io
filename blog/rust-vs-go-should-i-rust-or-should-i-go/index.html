<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Rust vs Go: Rust или Go? | Dudochkin Victor </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="google-site-verification" content="Kepqb6k6uptlwngnHbBVJmqQtwNW8zfHyQBbTXLYAgA" />
    <meta name="yandex-verification" content="8e8bc73c2566b473" />
    <style>
    :root {
        /* Primary theme color */
        /* --primary-color: #121A26; */
        --primary-color: #0f1419;
        /* Primary theme text color */
        /* --primary-text-color: #121A26; */
        --primary-text-color: #0f1419;
        /* Primary theme link color */
        --primary-link-color: #053961;
        /* Secondary color: the background body color */
        --secondary-color: #F0F0F0;
        --secondary-text-color: #1C2834;
        /* Highlight text color of table of content */
        --toc-highlight-text-color: #053961;
    }
</style>
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-47MMPLLY44"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-47MMPLLY44');
    </script>
    

    
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
    
        ym('87064264', "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
        });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/87064264" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    
    
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/mdl.min.css">
    <link rel="stylesheet" href="https://dudochkin-victor.github.io/style.css">
    
    
</head>

<body>
    
<header class="box-shadow">
    

<a href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;">
    <div class="logo">
        <img src="https://dudochkin-victor.github.io/ferris.png" alt="logo">
        Dudochkin Victor
    </div>
</a>

<nav>
    <!-- 
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;showcases&#x2F;">Showcases</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;changelog&#x2F;">Changelog</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;about&#x2F;">About</a>
     -->

    
        
        <a class="nav-item subtitle-text" href="&#x2F;solana&#x2F;">Solana</a>
        
        <a class="nav-item subtitle-text" href="&#x2F;edgeware&#x2F;">Edgeware</a>
        
        <a class="nav-item subtitle-text" href="&#x2F;blog&#x2F;">Блог</a>
        
        <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;github.com&#x2F;dudochkin-victor">Github</a>
        
    
</nav>

</header>

 
    <main>
        
        
        
        

        <div class="content text">
            
<h1>Rust vs Go: Rust или Go?</h1>

<p><a href="https://morioh.com/p/ec3cbcdfe93c">Перевод</a> | Автор оригинала: Talha Malik</p>
<p>&quot;Мне остаться или идти?&quot; Отличная песня группы The Clash. Я слушаю это прямо сейчас, пока пишу эту статью. Песня дебютировала еще в 1982 году, очень давно. В то время я был всего лишь ребенком, который занимался новым хобби - программированием своего Atari 2600. Первая видеоигра, которую я когда-либо писал, была написана с использованием сборки 6502 для этой консоли. Компилятор для него стоил около 65 долларов, если я припоминаю, что в то время приравнивалось к стрижке около 13 газонов.</p>
<p>Игра была простой: используя джойстик, маневрируйте своим космическим кораблем через случайно сгенерированную прокручивающуюся пещеру. Стены пещеры были синусоидальными, прокручивались по вертикали с левой и с правой стороны экрана, и вы должны были убедиться, что ваш корабль не врезался в них. Знаю, знаю: не так уж и сложно. Но мне тогда было всего десять или одиннадцать лет.</p>
<p>Несмотря на «мощность» процессора, вычисление синусоидальных значений во время выполнения было для него просто невыносимо. Итак, используя свой удобный калькулятор Texas Instruments, я предварительно рассчитал несколько значений синусов, тщательно записал их на бумаге и затем ввел в качестве констант для игры. Это значительно повысило производительность игры и сделало ее пригодной для использования.</p>
<p>Так в чем же я? При чем здесь Rust или Go?</p>
<p>Сегодняшние языки намного более продвинуты, чем 6502 Assembly, что упрощает написание сложных программ. Написание этой игры заняло у меня много времени, и сегодня я мог бы сделать это намного быстрее, с меньшим количеством кода, чем тогда. Но какой язык сегодня обеспечивает это волшебное сочетание простоты и силы?</p>
<p>И Rust, и Go обеспечивают потрясающую производительность. Они оба компилируются в машинный код, Святой Грааль производительности. И с сегодняшней вычислительной мощностью разработчики могут делать удивительные вещи с любым из этих языков. Итак, вопрос в том, что вы должны написать: с Rust или с Go вы станете следующим большим достижением?</p>
<p>С помощью быстрого поиска вы легко найдете несколько статей, в которых подробно рассказывается о различиях между двумя языками. Но в центре внимания этой статьи - оптимизация затрат, волшебная комбинация производительности на строку кода.</p>
<p><img src="/imgs/posts/8c570880_01.png" alt="Rust или Go?" /></p>
<p>Иными словами, где же этот сладкий уголок простого кода и высочайшей производительности? И в данном случае это Rust или Go?
Нет никаких аргументов: Rust быстрее Go. В приведенных выше тестах Rust был быстрее, а в некоторых случаях и на порядок быстрее.</p>
<p>Но прежде чем вы откажетесь писать все на Rust, примите во внимание, что Go не так уж сильно отстал от него во многих из этих тестов, и он все еще намного быстрее, чем подобные Java, C#, JavaScript, Python и т.д. Другими словами, по оси производительности Rust - это нечто среднее между Rust и Go. Теперь, если то, что вы создаете, требует максимальной производительности, тогда непременно выберите Rust. Но если вам нужна высочайшая производительность, вы будете впереди всех, выбрав любой из этих двух языков.</p>
<p>Итак, мы подошли к сложности кода. Здесь все может быть запутано, поскольку это может быть более субъективным, чем тесты производительности. Давайте посмотрим на простое упражнение: построим небольшой веб-сервер, который будет печатать «Hello World» при получении HTTP-запроса. Для этого в Rust это выглядит примерно так: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>net</span><span style="color:#f29668;">::</span><span>{TcpStream</span><span style="color:#bfbab0cc;">,</span><span> TcpListener}</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>io</span><span style="color:#f29668;">::</span><span>{Read</span><span style="color:#bfbab0cc;">,</span><span> Write}</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>thread</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">handle_read</span><span>(</span><span style="color:#ff7733;">mut </span><span style="color:#f29718;">stream</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span>TcpStream) {
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> buf </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#f29718;">0</span><span style="color:#ff7733;">u8</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">4096</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">match</span><span> stream</span><span style="color:#f29668;">.</span><span style="color:#f07178;">read</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut</span><span> buf) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(</span><span style="color:#f29668;">_</span><span>) </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>            </span><span style="color:#ff7733;">let</span><span> req_str </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from_utf8_lossy(</span><span style="color:#f29668;">&amp;</span><span>buf)</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> req_str)</span><span style="color:#bfbab0cc;">;
</span><span>            }</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(e) </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Unable to read stream: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> e)</span><span style="color:#bfbab0cc;">,
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">handle_write</span><span>(</span><span style="color:#ff7733;">mut </span><span style="color:#f29718;">stream</span><span style="color:#bfbab0cc;">:</span><span> TcpStream) {
</span><span>    </span><span style="color:#ff7733;">let</span><span> response </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">b</span><span style="color:#c2d94c;">&quot;HTTP/1.1 200 OK</span><span style="color:#95e6cb;">\r\n</span><span style="color:#c2d94c;">Content-Type: text/html; charset=UTF-8</span><span style="color:#95e6cb;">\r\n\r\n</span><span style="color:#c2d94c;">&lt;html&gt;&lt;body&gt;Hello world&lt;/body&gt;&lt;/html&gt;</span><span style="color:#95e6cb;">\r\n</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">match</span><span> stream</span><span style="color:#f29668;">.</span><span style="color:#f07178;">write</span><span>(response) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(n) </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Response sent: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> bytes&quot;</span><span style="color:#bfbab0cc;">,</span><span> n)</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(e) </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Failed sending response: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> e)</span><span style="color:#bfbab0cc;">,
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">handle_client</span><span>(</span><span style="color:#f29718;">stream</span><span style="color:#bfbab0cc;">:</span><span> TcpStream) {
</span><span>    </span><span style="color:#f07178;">handle_read</span><span>(</span><span style="color:#f29668;">&amp;</span><span>stream)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">handle_write</span><span>(stream)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span>
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> port </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;8080&quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> listener </span><span style="color:#f29668;">= </span><span>TcpListener</span><span style="color:#f29668;">::</span><span>bind(</span><span style="color:#f07178;">format!</span><span>(</span><span style="color:#c2d94c;">&quot;127.0.0.1:</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> port))</span><span style="color:#f29668;">.</span><span style="color:#f07178;">unwrap</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Listening for connections on port </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> port)</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>    </span><span style="color:#ff7733;">for</span><span> stream </span><span style="color:#f29668;">in</span><span> listener</span><span style="color:#f29668;">.</span><span style="color:#f07178;">incoming</span><span>() {
</span><span>        </span><span style="color:#ff7733;">match</span><span> stream {
</span><span>            </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(stream) </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>                thread</span><span style="color:#f29668;">::</span><span>spawn(|| {
</span><span>                    </span><span style="color:#f07178;">handle_client</span><span>(stream)
</span><span>                })</span><span style="color:#bfbab0cc;">;
</span><span>            }
</span><span>            </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(e) </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>                </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Unable to connect: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> e)</span><span style="color:#bfbab0cc;">;
</span><span>            }
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre>
<p>Нечто подобное в Go выглядит так: </p>
<pre data-lang="go" style="background-color:#0f1419;color:#bfbab0;" class="language-go "><code class="language-go" data-lang="go"><span style="color:#ff7733;">package </span><span>main
</span><span>
</span><span style="color:#ff7733;">import </span><span>(
</span><span>	</span><span style="color:#c2d94c;">&quot;fmt&quot;
</span><span>	</span><span style="color:#c2d94c;">&quot;io&quot;
</span><span>	</span><span style="color:#c2d94c;">&quot;log&quot;
</span><span>	</span><span style="color:#c2d94c;">&quot;net/http&quot;
</span><span>)
</span><span>
</span><span style="color:#ff7733;">type </span><span style="color:#59c2ff;">handler </span><span style="color:#ff7733;">struct</span><span>{}
</span><span>
</span><span style="color:#ff7733;">func </span><span>(</span><span style="color:#f29718;">theHandler </span><span style="color:#f29668;">*</span><span style="color:#ff7733;">handler</span><span>) </span><span style="color:#ffb454;">ServeHTTP</span><span>(</span><span style="color:#f29718;">writer </span><span>http</span><span style="color:#f29668;">.</span><span style="color:#ff7733;">ResponseWriter</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">request </span><span style="color:#f29668;">*</span><span>http</span><span style="color:#f29668;">.</span><span style="color:#ff7733;">Request</span><span>) {
</span><span>	log</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">Printf</span><span>(</span><span style="color:#c2d94c;">&quot;Received request: </span><span style="color:#f29718;">%s</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span>request</span><span style="color:#f29668;">.</span><span>URL)
</span><span>	log</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">Printf</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">%v</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span>request)
</span><span>	io</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">WriteString</span><span>(writer</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;Hello world!&quot;</span><span>)
</span><span>}
</span><span>
</span><span style="color:#ff7733;">const </span><span>port </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;8080&quot;
</span><span>
</span><span style="color:#ff7733;">func </span><span style="color:#ffb454;">main</span><span>() {
</span><span>	server </span><span style="color:#f29668;">:= </span><span>http</span><span style="color:#f29668;">.</span><span>Server{
</span><span>		Addr</span><span style="color:#bfbab0cc;">:    </span><span>fmt</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">Sprintf</span><span>(</span><span style="color:#c2d94c;">&quot;:</span><span style="color:#f29718;">%s</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span>port)</span><span style="color:#bfbab0cc;">,
</span><span>		Handler</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span>handler{}</span><span style="color:#bfbab0cc;">,
</span><span>	}
</span><span>
</span><span>	server</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">ListenAndServe</span><span>()
</span><span>}
</span></code></pre>
<p>Теперь они не на 100% точно такие же, но достаточно близки. Разница между ними составляет ~ 20 строк кода. Rust определенно заставляет разработчика думать о большем и, следовательно, писать больше кода, чем Go.</p>
<p>Другой пример: рассмотрим один из наиболее сложных аспектов разработки программного обеспечения: многопоточность. Когда вы решаете что-то подобное, как вы, несомненно, делаете при создании HTTP-сервера, есть о чем подумать:</p>
<ul>
<li>Вам необходимо убедиться, что все, что вы разрабатываете, является потокобезопасным (блокируется)</li>
<li>Вам необходимо обрабатывать связь между потоками (каналами)</li>
<li>Вы должны проектировать с учетом параллелизма и параллелизма (потоки и процедуры)</li>
</ul>
<p>И Rust, и Go справляются с этими препятствиями действительно эффективно, но Go требует меньше усилий. С Rust у вас гораздо больше возможностей и, следовательно, больше возможностей при создании потоков. Просто взгляните на некоторую документацию по этому поводу. Вот только один способ создать поток в Rust: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>thread</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span style="color:#ff7733;">let</span><span> handler </span><span style="color:#f29668;">= </span><span>thread</span><span style="color:#f29668;">::</span><span>spawn(|| {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// thread code
</span><span>})</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>handler</span><span style="color:#f29668;">.</span><span style="color:#f07178;">join</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">unwrap</span><span>()</span><span style="color:#bfbab0cc;">;
</span></code></pre>
<p>С другой стороны, вот как создать что-то подобное с помощью Go: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span>go someFunction(args)
</span></code></pre>
<p>Еще одна важная часть написания кода - это обработка ошибок. Здесь я думаю, что Rust и Go очень похожи. Rust позволяет разработчику обрабатывать случаи ошибок за счет использования возвращаемых типов перечисления: Option<T> и Result&lt;T, E&gt;. Option<T> вернет None или Some(T), тогда как Result&lt;T, E&gt; вернет Ok(T) или Err(T). Учитывая, что большинство собственных библиотек Rust, а также других сторонних библиотек возвращают один из этих типов, разработчику обычно приходится обрабатывать случай, когда ничего не возвращается или возвращается ошибка.</p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">foo_divide</span><span>(</span><span style="color:#f29718;">a</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f32</span><span>, </span><span style="color:#f29718;">b</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f32</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="font-style:italic;color:#39bae6;">Result</span><span>&lt;</span><span style="color:#ff7733;">f32</span><span>, </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;static str</span><span>&gt; {
</span><span>    </span><span style="color:#ff7733;">if</span><span> b </span><span style="color:#f29668;">== </span><span style="color:#f29718;">0.0 </span><span>{
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(</span><span style="color:#c2d94c;">&quot;divide by zero error!&quot;</span><span>)
</span><span>    } </span><span style="color:#ff7733;">else </span><span>{
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(a </span><span style="color:#f29668;">/</span><span> b)
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">match </span><span style="color:#f07178;">foo_divide</span><span>(</span><span style="color:#f29718;">5.0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">4.0</span><span>) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(err) </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> err)</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(result) </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;5 / 4 = </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> result)</span><span style="color:#bfbab0cc;">,
</span><span>    }
</span><span>}
</span></code></pre>
<p>Обратите внимание, что случай Err должен обрабатываться в операторе match.</p>
<p>Go, с другой стороны, оставляет это на усмотрение разработчика, поскольку ошибки можно игнорировать, используя _. Однако идиоматический Go настоятельно рекомендует возвращать ошибку, тем более что функции в Go могут возвращать несколько значений. Следовательно, легко заставить функции возвращать предполагаемое значение вместе с ошибкой, если таковая имеется.</p>
<p>Вот соответствующий пример сверху, сделанный в Go: </p>
<pre data-lang="go" style="background-color:#0f1419;color:#bfbab0;" class="language-go "><code class="language-go" data-lang="go"><span style="color:#ff7733;">func </span><span style="color:#ffb454;">fooDivide</span><span>(</span><span style="color:#f29718;">a </span><span style="font-style:italic;color:#39bae6;">float32</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">b </span><span style="font-style:italic;color:#39bae6;">float32</span><span>) (</span><span style="font-style:italic;color:#39bae6;">float32</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">error</span><span>) {
</span><span>    </span><span style="color:#ff7733;">if </span><span>b </span><span style="color:#f29668;">== </span><span style="color:#f29718;">0 </span><span>{
</span><span>        </span><span style="color:#ff7733;">return </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span>errors</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">New</span><span>(</span><span style="color:#c2d94c;">&quot;divide by zero error!&quot;</span><span>)
</span><span>    }    </span><span style="color:#ff7733;">return </span><span>a </span><span style="color:#f29668;">/ </span><span>b</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">nil
</span><span>}
</span><span>
</span><span style="color:#ff7733;">func </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    result</span><span style="color:#bfbab0cc;">, </span><span>err </span><span style="color:#f29668;">:= </span><span style="color:#ffb454;">fooDivide</span><span>(</span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">4</span><span>)
</span><span>    </span><span style="color:#ff7733;">if </span><span>err </span><span style="color:#f29668;">!= </span><span style="color:#f29718;">nil </span><span>{
</span><span>       log</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">Printf</span><span>(</span><span style="color:#c2d94c;">&quot;an error occurred: </span><span style="color:#f29718;">%v</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span>err)
</span><span>    } </span><span style="color:#ff7733;">else </span><span>{
</span><span>       log</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">Printf</span><span>(</span><span style="color:#c2d94c;">&quot;The answer is: 5 / 4 = </span><span style="color:#f29718;">%f</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span>result)
</span><span>    }
</span><span>}
</span></code></pre>
<p>Обратите внимание, что эта строка: </p>
<pre data-lang="go" style="background-color:#0f1419;color:#bfbab0;" class="language-go "><code class="language-go" data-lang="go"><span>result</span><span style="color:#bfbab0cc;">, </span><span>err </span><span style="color:#f29668;">:= </span><span style="color:#ffb454;">fooDivide</span><span>(</span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">4</span><span>)
</span></code></pre>
<p>можно было бы написать как </p>
<pre data-lang="go" style="background-color:#0f1419;color:#bfbab0;" class="language-go "><code class="language-go" data-lang="go"><span>result</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">_ </span><span style="color:#f29668;">:= </span><span style="color:#ffb454;">fooDivide</span><span>(</span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">4</span><span>)
</span></code></pre>
<p>В последнем случае возвращенная ошибка была бы проигнорирована.</p>
<p>Честно говоря, они оба очень похожи, за исключением принудительной проверки ошибок в Rust. В остальном разница небольшая, и трудно найти преимущество одного перед другим. На мой взгляд, это ничья.</p>
<p>Я мог бы продолжить, углубляясь в другие языковые различия. Но в итоге, от потоков до каналов и обобщений, Rust предоставляет разработчику больше возможностей. В этом отношении Rust ближе к C++, чем Go. Делает ли это Rust более сложным по своей сути?</p>
<p>Я думаю, что да.</p>
<p>Итак, вот мои рекомендации:</p>
<ul>
<li>Либо. Если вы создаете веб-сервис, который обрабатывает высокую нагрузку, и хотите, чтобы его можно было масштабировать как по вертикали, так и по горизонтали, любой язык вам идеально подойдет.</li>
<li>Идти. Но если вы хотите писать быстрее, возможно, потому, что вам нужно написать много разных сервисов или у вас большая команда разработчиков, тогда Go - ваш предпочтительный язык. Go дает вам возможность параллелизма как первоклассного гражданина и не допускает небезопасного доступа к памяти (как и Rust), но не заставляет вас управлять всеми мельчайшими деталями. Go быстрый и мощный, но он не утомляет разработчика, вместо этого сосредоточиваясь на простоте и единообразии.</li>
<li>Rust. Если, с другой стороны, необходимо выжать максимум из производительности, тогда Rust должен быть вашим выбором. Rust больше конкурирует с C++, чем с Go. Сражаясь с C++, Rust кажется таким же мощным, но с множеством приятных улучшений. Rust дает разработчикам возможность контролировать каждую деталь того, как их потоки ведут себя с остальной частью системы, как следует обрабатывать ошибки и даже время жизни их переменных!</li>
<li>Rust. Rust был разработан для взаимодействия с C. Go, но он многое теряет для достижения этой цели, и это не совсем его фокус.
Идти. Если требуется удобочитаемость, выбирайте Go. Слишком легко сделать ваш код сложным для понимания Rust другими.</li>
</ul>
<p>Надеюсь, вам понравилось это читать! </p>










<script src="https://giscus.app/client.js"
    data-repo="dudochkin-victor&#x2F;dudochkin-victor.github.io"
    data-repo-id="MDEwOlJlcG9zaXRvcnkzNzgwNTYx"
    data-category="General"
    data-category-id="DIC_kwDOADmv0c4CAhvj"
    data-mapping="pathname"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-theme="light"
    data-lang="en"
    crossorigin="anonymous"
    async>
</script>



        </div>

        
        
    </main>

    
    <footer>
        <small class="subtext">
            <a href="https://angular-rust.github.io">Dudochkin Victor</a> © 2021
        </small>
    </footer>
    
</body>
<script>
    function highlightNav(heading) {
        let pathname = location.pathname;
        document.querySelectorAll(".toc a").forEach((item) => {
            item.classList.remove("active");
        });
        document.querySelector(".toc a[href$='" + pathname + "#" + heading + "']").classList.add("active");
    }

    let currentHeading = "";
    window.onscroll = function () {
        let h = document.querySelectorAll("h1,h2,h3,h4,h5,h6");
        let elementArr = [];

        h.forEach(item => {
            if (item.id !== "") {
                elementArr[item.id] = item.getBoundingClientRect().top;
            }
        });
        elementArr.sort();
        for (let key in elementArr) {
            if (!elementArr.hasOwnProperty(key)) {
                continue;
            }
            if (elementArr[key] > 0 && elementArr[key] < 300) {
                if (currentHeading !== key) {
                    highlightNav(key);
                    currentHeading = key;
                }
                break;
            }
        }
    }
</script>

</html>
