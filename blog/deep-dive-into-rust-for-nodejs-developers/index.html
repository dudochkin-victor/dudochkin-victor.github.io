<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Глубокое погружение в Rust для разработчиков на Node.js | Dudochkin Victor </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="google-site-verification" content="Kepqb6k6uptlwngnHbBVJmqQtwNW8zfHyQBbTXLYAgA" />
    <meta name="yandex-verification" content="8e8bc73c2566b473" />
    <style>
    :root {
        /* Primary theme color */
        /* --primary-color: #121A26; */
        --primary-color: #0f1419;
        /* Primary theme text color */
        /* --primary-text-color: #121A26; */
        --primary-text-color: #0f1419;
        /* Primary theme link color */
        --primary-link-color: #053961;
        /* Secondary color: the background body color */
        --secondary-color: #F0F0F0;
        --secondary-text-color: #1C2834;
        /* Highlight text color of table of content */
        --toc-highlight-text-color: #053961;
    }
</style>
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-47MMPLLY44"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-47MMPLLY44');
    </script>
    

    
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
    
        ym('87064264', "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
        });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/87064264" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    
    
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/mdl.min.css">
    <link rel="stylesheet" href="https://dudochkin-victor.github.io/style.css">
    
    
</head>

<body>
    
<header class="box-shadow">
    

<a href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;">
    <div class="logo">
        <img src="https://dudochkin-victor.github.io/ferris.png" alt="logo">
        Dudochkin Victor
    </div>
</a>

<nav>
    <!-- 
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;showcases&#x2F;">Showcases</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;changelog&#x2F;">Changelog</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;about&#x2F;">About</a>
     -->

    
        
        <a class="nav-item subtitle-text" href="&#x2F;solana&#x2F;">Solana</a>
        
        <a class="nav-item subtitle-text" href="&#x2F;edgeware&#x2F;">Edgeware</a>
        
        <a class="nav-item subtitle-text" href="&#x2F;blog&#x2F;">Блог</a>
        
        <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;github.com&#x2F;dudochkin-victor">Github</a>
        
    
</nav>

</header>

 
    <main>
        
        
        
        
        
        <div class="toc">
            <div class="toc-sticky">
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#sozdanie-proekta-na-rust">Создание проекта на Rust</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#pechat">Печать</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#rasshirennaia-pechat-s-chislovym-formatirovaniem">Расширенная печать с числовым форматированием</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#peremennye">Переменные</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#osnovnye-tipy">Основные типы</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#chisla-s-plavaiushchei-zapiatoi">Числа с плавающей запятой</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#pobitovye-operatsii-rasshirennye-mozhno-propustit">Побитовые операции (расширенные - можно пропустить)</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#logicheskie-znacheniia-i-dvoichnaia-algebra">Логические значения и двоичная алгебра</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#arifmeticheskie-operatsii">Арифметические операции</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#operatory-sravneniia">Операторы сравнения</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#simvoly">Символы</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#srednee-znachenie">Среднее значение</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#massivy">Массивы</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#srezy">Срезы</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#srezy-kak-parametry">Срезы как параметры</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#deref-prinuzhdenie">Deref принуждение</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#mnogomernye-massivy">Многомерные массивы</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#vektory">Векторы</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#kortezhi">Кортежи</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#funktsii">Функции</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#utverzhdeniia-i-vyrazheniia">Утверждения и выражения</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#tip-vozvrashchaemogo-znacheniia-funktsii">Тип возвращаемого значения функции</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#zamykaniia">Замыкания</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#konverter-tsel-siia-v-farengeit">Конвертер Цельсия в Фаренгейт</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#uslovnoe-ispolnenie">Условное исполнение</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#mnozhestvennye-uslovnye-vyrazheniia-if-else-if">Множественные условные выражения (if &#x2F; else if)</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#naznachenie-tsikla">Назначение цикла</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#tsikly-poka">Циклы пока</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#tsikly-for">Циклы for</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#vlozhennye-tsikly">Вложенные циклы</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#ugadaiku">Угадайку</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#bazovaia-statistika">Базовая статистика</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#oblast-vidimosti">Oбласть видимости</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#izmenchivost-peremennoi">Изменчивость переменной</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#stek-i-kucha-pamiati">Стек и куча памяти</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#stroki">Строки</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#pravo-sobstvennosti">Право собственности</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#eshche-primery">Еще примеры:</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#peredacha-prava-sobstvennosti-dannye-khraniatsia-v-stack">Передача права собственности (данные хранятся в STACK)</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#peredacha-prava-sobstvennosti-dannye-khraniatsia-v-heap">Передача права собственности (данные хранятся в HEAP)</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#zaimstvovanie">Заимствование</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#mutatsiia-zaimstvovannykh-dannykh">Мутация заимствованных данных</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#ogranichenie-na-zaimstvovannye-dannye">Ограничение на заимствованные данные</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#visiachie-ssylki">Висячие ссылки</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#struktury-takzhe-izvestnye-kak-struktury">Структуры (также известные как структуры)</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#perechisleniia">Перечисления</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#obrezka-strok">Обрезка строк</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#standartnaia-biblioteka">Стандартная библиотека</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#analiz-standartnogo-vvoda">Анализ стандартного ввода</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#kreiti">крэйти</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#novyi-vzgliad-na-igru-v-ugadyvanie">Новый взгляд на игру в угадывание</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#argumenty-komandnoi-stroki">Аргументы командной строки</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#zapis-soderzhimogo-v-fail">Запись содержимого в файл</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#poisk-fruktov">Поиск фруктов</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#fabriki-form">Фабрики форм</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#opredelenie-struktur-s-dzhenerikami">Определение структур с дженериками</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#opredeleniia-metodov-s-obobshcheniiami">Определения методов с обобщениями</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#opredeleniia-funktsii-s-dzhenerikami">Определения функций с дженериками</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#tip-dannykh-box">Тип данных Box</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#summiruem-boxes">Суммируем boxes</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#kompaktnaia-versiia">Компактная версия</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#treity">Трэйты</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#realizatsiia-treita-po-umolchaniiu">Реализация трэйта по умолчанию</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#proizvodnye-treity">Производные трэйты</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#organicheniia-treitov">Органичения трейтов</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#mnozhestvennye-granitsy-treitov-i-predlozhenie-where">Множественные границы трейтов и предложение where</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#tipy-vozvrashchaemykh-dannykh-i-realizovannye-treity">Типы возвращаемых данных и реализованные трейты</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#tipy-vozvrata-i-dinamicheskaia-dispetcherizatsiia-s-treitami">Типы возврата и динамическая диспетчеризация с трэйтами</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#sravnenie-reaktivnykh-samoletov">Сравнение реактивных самолетов</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#proverki-zaimstvovaniia-borrow-checker">Проверки заимствования - Borrow checker</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#annotatsiia-vremeni-zhizni">Аннотация времени жизни</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#mnozhestvennye-annotatsii-vremeni-zhizni">Множественные аннотации времени жизни</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#pravila-iskliucheniia-vremeni-zhizni">Правила исключения времени жизни</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#annotatsii-vremeni-zhizni-struktur">Аннотации времени жизни структур</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#staticheskoe-vremia-zhizni">Статическое время жизни</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#podrobnee-o-perechisleniiakh">Подробнее о перечислениях</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#sootvetstvie-shablonu-podstanovki">Соответствие шаблону подстановки</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#enum-metody">Enum методы</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#option-enum">Option enum</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#sootvetstvie-option">Соответствие Option</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#sootvetstvie-if-let">Соответствие if-let</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#location-enum">Location enum</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#nevosstanovimye-oshibki">Невосстановимые ошибки</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#vosstanovimye-oshibki">Восстановимые ошибки</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#matching-result-t-e-enum-dlia-obrabotki-oshibok">Matching Result&lt;T, E&gt;enum для обработки ошибок</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#rasprostranenie-oshibok">Распространение ошибок</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#vozvrashchenie-k-igre-v-ugadyvanie-s-obrabotkoi-oshibok">Возвращение к игре в угадывание с обработкой ошибок</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#vektory-s-obrabotkoi-oshibok">Векторы с обработкой ошибок</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#tip-dannykh-hashmap-k-v">Тип данных HashMap&lt;K, V&gt;</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#schetchik-slov">Счетчик слов</a>
                </div>
                
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/blog/deep-dive-into-rust-for-nodejs-developers/#al-ternativnaia-realizatsiia">Альтернативная реализация</a>
                </div>
                
                
            </div>
        </div>
        
        

        <div class="content text">
            
<h1>Глубокое погружение в Rust для разработчиков на Node.js</h1>

<p><a href="https://itnext.io/deep-dive-into-rust-for-node-js-developers-5faace6dc71f">Перевод</a> | Автор оригинала: Florian GOTO</p>
<p>С появлением WebAssembly (главная) сейчас самое подходящее время для изучения Rust поверх имеющихся у вас знаний JavaScript и Node.js для высокопроизводительных вычислений в браузере, на сервере и на периферии.</p>
<p>Добавление Rust в ваш технический стек поверх Node.js - это удачный выбор, поскольку Rust обеспечивает расширенную поддержку WebAssembly, а двоичный формат WebAssembly запускается в Node.js.</p>
<p>После этого глубокого погружения вы начнете работать с Rust. К концу этой статьи вы будете достаточно знакомы с Rust, чтобы начинать свои собственные проекты и создавать более сложное программное обеспечение!</p>
<blockquote>
<p>Примечания: как разработчик Node.js, имеющий в основном опыт работы с JavaScript, вы увидите незнакомые обозначения, такие как «std::wx::yz» или «&amp;xyz», не беспокойтесь, я все объясню.</p>
</blockquote>
<p>Rust - это язык более низкого уровня по сравнению с JavaScript и Node.js. Это означает, что вы познакомитесь с тем, как компьютерные программы работают с оборудованием, чтобы действительно понять, что происходит. Node.js гораздо более высокоуровневый, поэтому вы обычно не имеете дело с этими понятиями.</p>
<p>Помните, что Rust изначально был языком системного программирования, который настолько близок к железу / оборудованию, что означает, что абстракции, предоставляемые языком, ближе к реальным физическим компонентам машины. Это дает вам больше возможностей для высокопроизводительного программирования, но также подразумевает большую сложность, чем при программировании с помощью JavaScript.</p>
<p>Rust не будет скрывать такие детали, как значение переменной, хранящейся в стеке или куче, и в зависимости от того, что разрешено, а что нет. Но, как и в случае с Node.js, существует множество библиотек / модулей, которые упростят вашу жизнь.</p>
<p>Проблема со многими учебниками в том, что они созданы людьми, которые хорошо разбираются в компилируемых языках, таких как C и C++ в Linux. Они предполагают, что вы уже знаете, как компьютеры работают внутри (распределение памяти и т.д.), Что не относится к многим веб-разработчикам (даже экспертам в своей области).</p>
<p>В этой статье я стараюсь изложить ее просто и придерживаться точки зрения человека, который в основном знает JavaScript и Node.js.</p>
<p>Поначалу Rust - сложный язык, так что не торопитесь, расслабьтесь и возвращайтесь, чтобы узнать больше.</p>
<p><strong>В целом, изучение Rust сделает вас лучшим разработчиком Node.js/JavaScript!</strong></p>
<h2 id="sozdanie-proekta-na-rust">Создание проекта на Rust</h2>
<p>Вы можете запустить весь код из этой статьи онлайн (за исключением локальных вещей, таких как доступ к файлам, конечно) с игровой площадкой Rust.
После установки Rust создайте новый проект с Cargo (менеджер пакетов Rust): </p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>cargo new &lt;PROJECT_NAME&gt;
</span></code></pre>
<p>Это создаст новую папку в вашем текущем каталоге.
В качестве альтернативы, чтобы сделать текущий каталог папкой проекта: </p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>cargo init
</span></code></pre>
<p>Источник находится в папке src /. Конечно, точкой входа является файл main.rs с его основной функцией (ключевое слово fn). </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Hello, world!&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<h2 id="pechat">Печать</h2>
<p>В Rust вы используете так называемый макрос для вывода на консоль. Макросы в Rust имеют идентификатор, за которым следует восклицательный знак (!). Печать! макрос очень гибкий: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// string interpolation
</span><span>   </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Adding </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> and </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> gives </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">22</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">33</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">22 </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">33</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// positional arguments
</span><span>   </span><span style="color:#f07178;">println!</span><span>(
</span><span>        </span><span style="color:#c2d94c;">&quot;Ypur name is </span><span style="color:#f29718;">{0}</span><span style="color:#c2d94c;">. Welcome to </span><span style="color:#f29718;">{1}</span><span style="color:#c2d94c;">. Nice to meet you </span><span style="color:#f29718;">{0}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="color:#c2d94c;">&quot;Goto&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;Rust&quot;
</span><span>   )</span><span style="color:#bfbab0cc;">;
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// named arguments
</span><span>   </span><span style="color:#f07178;">println!</span><span>(
</span><span>        </span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{language}</span><span style="color:#c2d94c;"> is very popular. It was created in </span><span style="color:#f29718;">{year}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        language </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;Rust&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        year </span><span style="color:#f29668;">= </span><span style="color:#f29718;">2010
</span><span>   )</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// placeholder traits (using positional argument to avoid repeat)
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{0}</span><span style="color:#c2d94c;">, in binary: </span><span style="color:#f29718;">{0:b}</span><span style="color:#c2d94c;">, in hexadecimal: </span><span style="color:#f29718;">{0:x}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">11</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// debug trait (very useful to print anything)
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// if you try to print the array directly, you will get an error
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// because an array is not a string or number type
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span>[</span><span style="color:#f29718;">11</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">22</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">33</span><span>])</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Чтобы увидеть результат, запустите: </p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>cargo run
</span></code></pre>
<p>вы увидите (вместе с информацией о компиляции кода - Rust - это компилируемый язык): </p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Adding 22 and 33 gives 55
</span><span>Ypur name is Goto. Welcome to Rust. Nice to meet you Goto
</span><span>Rust is very popular. It was created in 2010
</span><span>Decimal: 11      Binary: 1011    Hexadecimal: b
</span><span>[11, 22, 33]
</span></code></pre>
<p>В Rust вы должны использовать точку с запятой (;) в конце строки, если только это не последняя строка функции, которая что-то возвращает (подробнее об этом позже).</p>
<h2 id="rasshirennaia-pechat-s-chislovym-formatirovaniem">Расширенная печать с числовым форматированием</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> x </span><span style="color:#f29668;">= </span><span style="color:#f29718;">246.92385</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> y </span><span style="color:#f29668;">= </span><span style="color:#f29718;">24.69</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> z </span><span style="color:#f29668;">=</span><span> x </span><span style="color:#f29668;">/</span><span> y</span><span style="color:#bfbab0cc;">;
</span><span>    
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// print line macro with 3 decimal point precision
</span><span>    
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;z is </span><span style="color:#f29718;">{:.3}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> z)</span><span style="color:#bfbab0cc;">;
</span><span>    
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// 9: total character space the number to occupy 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// (adds pre padding if necessary)
</span><span>    
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;z is </span><span style="color:#f29718;">{:9.3}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> z)</span><span style="color:#bfbab0cc;">;
</span><span>    
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// 0: placeholder number for padding characters
</span><span>    
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;z is </span><span style="color:#f29718;">{:09.3}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> z)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;z is </span><span style="color:#f29718;">{:09.3}</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">x is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> z</span><span style="color:#bfbab0cc;">,</span><span> x)</span><span style="color:#bfbab0cc;">;
</span><span>    
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// print macro without new line
</span><span>    
</span><span>    </span><span style="color:#f07178;">print!</span><span>(</span><span style="color:#c2d94c;">&quot;y is </span><span style="color:#f29718;">{:09.3}</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;"> x is </span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> y</span><span style="color:#bfbab0cc;">,</span><span> x)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// positional parameters
</span><span>    
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;z is </span><span style="color:#f29718;">{0:05.1}</span><span style="color:#c2d94c;"> and x is </span><span style="color:#f29718;">{1:.2}</span><span style="color:#c2d94c;">. </span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">x is also </span><span style="color:#f29718;">{1}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> z</span><span style="color:#bfbab0cc;">,</span><span> x)
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>z is 10.001
</span><span>z is    10.001
</span><span>z is 00010.001
</span><span>z is 00010.001
</span><span>x is 246.92385
</span><span>y is 00024.690
</span><span> x is 246.92385
</span><span>z is 010.0 and x is 246.92. 
</span><span>x is also 246.92385
</span></code></pre>
<h2 id="peremennye">Переменные</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// variables are immutable by default
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// stored on the heap (more on that later)
</span><span>    </span><span style="color:#ff7733;">let</span><span> pc </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;Inspirion XYZ&quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;pc is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> pc)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// mutable variables
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> age </span><span style="color:#f29668;">= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;age is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> age)</span><span style="color:#bfbab0cc;">;
</span><span>    age </span><span style="color:#f29668;">= </span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;age is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> age)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// constants (must be uppercase and explicit type definition)
</span><span>    </span><span style="color:#ff7733;">const </span><span style="color:#f29718;">BRAND</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;Dell&quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;brand is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">BRAND</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// multiple assignment (tuple destructuring)
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// more on tuples later in the article
</span><span>    </span><span style="color:#ff7733;">let </span><span>(status</span><span style="color:#bfbab0cc;">,</span><span> code) </span><span style="color:#f29668;">= </span><span>(</span><span style="color:#c2d94c;">&quot;OK&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">200</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;status: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">, code: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> status</span><span style="color:#bfbab0cc;">,</span><span> code)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>pc is Inspirion XYZ
</span><span>age is 1
</span><span>age is 2
</span><span>brand is Dell
</span><span>status: OK, code: 200
</span></code></pre>
<h2 id="osnovnye-tipy">Основные типы</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// default integer numeric type is i32
</span><span>    </span><span style="color:#ff7733;">let</span><span> num1 </span><span style="color:#f29668;">= </span><span style="color:#f29718;">123</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> - type: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> num1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">get_type</span><span>(</span><span style="color:#f29668;">&amp;</span><span>num1))</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// default floating point numeric type is f64
</span><span>    </span><span style="color:#ff7733;">let</span><span> num2 </span><span style="color:#f29668;">= </span><span style="color:#f29718;">1.23</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> - type: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> num2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">get_type</span><span>(</span><span style="color:#f29668;">&amp;</span><span>num2))</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// explicit typing
</span><span>    </span><span style="color:#ff7733;">let</span><span> num3</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i8 </span><span style="color:#f29668;">= </span><span style="color:#f29718;">23</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> - type: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> num3</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">get_type</span><span>(</span><span style="color:#f29668;">&amp;</span><span>num3))</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// max values
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// std is the standard library/crate, 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// it gives access to a rich variety of features, 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// here we use the type modules (i32, i16, etc.) and properties
</span><span>    </span><span style="color:#ff7733;">let</span><span> max_i32 </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">i32</span><span style="color:#f29668;">::</span><span style="color:#f29718;">MAX</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> max_i16 </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">i16</span><span style="color:#f29668;">::</span><span style="color:#f29718;">MAX</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;max value for i32 is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> max_i32)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;max value for i16 is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> max_i16)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// boolean
</span><span>    </span><span style="color:#ff7733;">let</span><span> is_rust_fun</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">bool </span><span style="color:#f29668;">= </span><span style="color:#f29718;">true</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>        </span><span style="color:#c2d94c;">&quot;is_rust_fun is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> - type: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        is_rust_fun</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="color:#f07178;">get_type</span><span>(</span><span style="color:#f29668;">&amp;</span><span>is_rust_fun)
</span><span>    )</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> is_greater </span><span style="color:#f29668;">= </span><span style="color:#f29718;">23 </span><span style="color:#f29668;">&gt; </span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>        </span><span style="color:#c2d94c;">&quot;is_greater is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> - type: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        is_greater</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="color:#f07178;">get_type</span><span>(</span><span style="color:#f29668;">&amp;</span><span>is_greater)
</span><span>    )</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// characters (unicode - up to 4 bytes length)
</span><span>    </span><span style="color:#ff7733;">let</span><span> smiley </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&#39;😈&#39;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;smiley is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> - type: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> smiley</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">get_type</span><span>(</span><span style="color:#f29668;">&amp;</span><span>smiley))</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// helper function to print types
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_type</span><span>&lt;T&gt;(</span><span style="color:#f29668;">_</span><span>: </span><span style="color:#f29668;">&amp;</span><span>T) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str </span><span>{
</span><span>    std</span><span style="color:#f29668;">::</span><span>any</span><span style="color:#f29668;">::</span><span>type_name</span><span style="color:#f29668;">::</span><span>&lt;T&gt;()
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>123 - type: i32
</span><span>1.23 - type: f64
</span><span>23 - type: i8
</span><span>max value for i32 is 2147483647
</span><span>max value for i16 is 32767
</span><span>is_rust_fun is true - type: bool
</span><span>is_greater is true - type: bool
</span><span>smiley is 😈 - type: char
</span></code></pre>
<h2 id="chisla-s-plavaiushchei-zapiatoi">Числа с плавающей запятой</h2>
<ul>
<li>f32 (32-битное число с плавающей запятой)</li>
<li>f64 (число с плавающей запятой длиной 64 бита) </li>
</ul>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// by default fractional values stored in f64
</span><span>    
</span><span>    </span><span style="color:#ff7733;">let</span><span> my_float </span><span style="color:#f29668;">= </span><span style="color:#f29718;">12.345677890123456789012345</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;my_float is: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> my_float)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> a_float</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f32 </span><span style="color:#f29668;">= </span><span style="color:#f29718;">9.9438535983578493758</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a_float is: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a_float)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> min_f32 </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">f32</span><span style="color:#f29668;">::</span><span style="color:#f29718;">MIN</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;min_f32 is: </span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> min_f32)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> max_f32 </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">f32</span><span style="color:#f29668;">::</span><span style="color:#f29718;">MAX</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;max_f32 is: </span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> max_f32)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> min_f64 </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">f64</span><span style="color:#f29668;">::</span><span style="color:#f29718;">MIN</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;min_f64 is: </span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> min_f64)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> max_f64 </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">f64</span><span style="color:#f29668;">::</span><span style="color:#f29718;">MAX</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;max_f64 is: </span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> max_f64)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span>my_float is</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">12.345677890123456
</span><span>a_float is</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">9.943853
</span><span>min_f32 is</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">-</span><span style="color:#f29718;">340282350000000000000000000000000000000
</span><span>max_f32 is</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">340282350000000000000000000000000000000
</span><span>min_f64 is</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">-</span><span style="color:#f29718;">179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
</span><span>max_f64 is</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
</span></code></pre>
<h2 id="pobitovye-operatsii-rasshirennye-mozhno-propustit">Побитовые операции (расширенные - можно пропустить)</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">/*
</span><span style="font-style:italic;color:#5c6773;">Bitwise operations: on individual bits rather than sets of bytes.
</span><span style="font-style:italic;color:#5c6773;">- binary representation, a sequence of bytes
</span><span style="font-style:italic;color:#5c6773;">- underscore separator allowed for legibility
</span><span style="font-style:italic;color:#5c6773;">- by default binary representations are store as i32
</span><span style="font-style:italic;color:#5c6773;">*/
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// stored as u8 by adding suffix u8
</span><span>    
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> value </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0b1111_0101</span><span style="color:#ff7733;">u8</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// will print base 10 (decimal) representation
</span><span>    
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;value is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> value)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">/*
</span><span style="font-style:italic;color:#5c6773;">    :08b
</span><span style="font-style:italic;color:#5c6773;">        0 -&gt; display leading zeros
</span><span style="font-style:italic;color:#5c6773;">        8 -&gt; number of bits to display
</span><span style="font-style:italic;color:#5c6773;">        b -&gt; display binary representation
</span><span style="font-style:italic;color:#5c6773;">    */
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;value is </span><span style="color:#f29718;">{:08b}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> value)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// bitwise NOT: invert individual bits
</span><span>    
</span><span>    value </span><span style="color:#f29668;">= !</span><span>value</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// 0000_1010
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;value is </span><span style="color:#f29718;">{:08b}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> value)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// bitwise AND: used to clear the value of a specific bit
</span><span>    value </span><span style="color:#f29668;">=</span><span> value </span><span style="color:#f29668;">&amp; </span><span style="color:#f29718;">0b1111_0111</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// -&gt; 0000_0010
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;value is </span><span style="color:#f29718;">{:08b}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> value)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// bitwise AND: used to check value of a specific bit
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// if a specific bit is 0 or 1, useful to check status of registers for process state
</span><span>    
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;value is </span><span style="color:#f29718;">{:08b}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> value </span><span style="color:#f29668;">&amp; </span><span style="color:#f29718;">0b0100_0000</span><span>)</span><span style="color:#bfbab0cc;">; 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// -&gt; 0000_0000
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// bitwise OR: if either operand is 1, result is 1
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// useful to set value of a specific bit
</span><span>    
</span><span>    value </span><span style="color:#f29668;">=</span><span> value </span><span style="color:#f29668;">| </span><span style="color:#f29718;">0b0100_0000</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// -&gt; 0100_0010
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;value is </span><span style="color:#f29718;">{:08b}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> value)</span><span style="color:#bfbab0cc;">;
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// bitwise XOR (exclusive OR): 
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// result is 1 only when bits are different, otherwise 0
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// useful to set if bits are different
</span><span>    
</span><span>   value </span><span style="color:#f29668;">=</span><span> value </span><span style="color:#f29668;">^ </span><span style="color:#f29718;">0b0101_0101</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// -&gt; 0001_0111
</span><span>   </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;value is </span><span style="color:#f29718;">{:08b}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> value)</span><span style="color:#bfbab0cc;">;
</span><span>   </span><span style="font-style:italic;color:#5c6773;">////////////////////////////
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// Bit Shift operators
</span><span>   </span><span style="font-style:italic;color:#5c6773;">////////////////////////////
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// shift bit pattern left or right by a number of bits
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// and backfill shifted bit spaces with zeros
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// shift left by 4 bits
</span><span>    
</span><span>   value </span><span style="color:#f29668;">=</span><span> value </span><span style="color:#f29668;">&lt;&lt; </span><span style="color:#f29718;">4</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// -&gt; 0111_0000
</span><span>   </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;value is </span><span style="color:#f29718;">{:08b}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> value)</span><span style="color:#bfbab0cc;">;
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// shift right by 3 bits
</span><span>    
</span><span>   value </span><span style="color:#f29668;">=</span><span> value </span><span style="color:#f29668;">&gt;&gt; </span><span style="color:#f29718;">3</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// -&gt; 0000_1110
</span><span>   </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;value is </span><span style="color:#f29718;">{:08b}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> value)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>value is 245
</span><span>value is 11110101
</span><span>value is 00001010
</span><span>value is 00000010
</span><span>value is 00000000
</span><span>value is 01000010
</span><span>value is 00010111
</span><span>value is 01110000
</span><span>value is 00001110
</span></code></pre>
<h2 id="logicheskie-znacheniia-i-dvoichnaia-algebra">Логические значения и двоичная алгебра</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> a </span><span style="color:#f29668;">= </span><span style="color:#f29718;">true</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> b </span><span style="color:#f29668;">= </span><span style="color:#f29718;">false</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a is </span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">b is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a</span><span style="color:#bfbab0cc;">,</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;NOT a is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">!</span><span>a)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a AND b is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a </span><span style="color:#f29668;">&amp;</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a OR b is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a </span><span style="color:#f29668;">|</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a XOR b is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a </span><span style="color:#f29668;">^</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// boolean casted to integer begets 0 or 1
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a XOR b is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span>(a </span><span style="color:#f29668;">^</span><span> b) </span><span style="color:#f29668;">as </span><span style="color:#ff7733;">i32</span><span>)</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// 1
</span><span>   </span><span style="color:#ff7733;">let</span><span> c </span><span style="color:#f29668;">= </span><span>(a </span><span style="color:#f29668;">^</span><span> b) </span><span style="color:#f29668;">| </span><span>(a </span><span style="color:#f29668;">&amp;</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;c is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> c)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// short-circuiting logical operations:
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// right operand not evaluated
</span><span>    </span><span style="color:#ff7733;">let</span><span> d </span><span style="color:#f29668;">= </span><span style="color:#f29718;">true </span><span style="color:#f29668;">|| </span><span>(a </span><span style="color:#f29668;">&amp;</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;d is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> d)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the panic macro is not evaluated, 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// so the process ends with status 0 (OK, no error)
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// panics exit the program immediately (like throwing error in Node.js)
</span><span>    </span><span style="color:#ff7733;">let</span><span> e </span><span style="color:#f29668;">= </span><span style="color:#f29718;">false </span><span style="color:#f29668;">&amp;&amp; </span><span style="color:#f07178;">panic!</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;e is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> e)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>a is true
</span><span>b is false
</span><span>NOT a is false
</span><span>a AND b is false
</span><span>a OR b is true
</span><span>a XOR b is true
</span><span>a XOR b is 1
</span><span>c is true
</span><span>d is true
</span><span>e is false
</span></code></pre>
<h2 id="arifmeticheskie-operatsii">Арифметические операции</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// can only do arithmetic operations on same type operands
</span><span>    </span><span style="color:#ff7733;">let</span><span> a </span><span style="color:#f29668;">= </span><span style="color:#f29718;">11</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> b </span><span style="color:#f29668;">= </span><span style="color:#f29718;">33</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> c </span><span style="color:#f29668;">=</span><span> a </span><span style="color:#f29668;">+</span><span> b</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;c is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> c)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> d </span><span style="color:#f29668;">=</span><span> c </span><span style="color:#f29668;">-</span><span> b</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;d is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> d)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> e </span><span style="color:#f29668;">=</span><span> a </span><span style="color:#f29668;">*</span><span> d</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;e is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> e)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// type casting (careful with precision loss and type compatibility)
</span><span>    </span><span style="color:#ff7733;">let</span><span> f </span><span style="color:#f29668;">=</span><span> c </span><span style="color:#f29668;">as </span><span style="color:#ff7733;">f32 </span><span style="color:#f29668;">/ </span><span style="color:#f29718;">4.5</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;f is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> f)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// operator precedence control
</span><span>    
</span><span>    </span><span style="color:#ff7733;">let</span><span> g </span><span style="color:#f29668;">= </span><span style="color:#f29718;">43.5432 </span><span style="color:#f29668;">% </span><span>(a </span><span style="color:#f29668;">as </span><span style="color:#ff7733;">f64 </span><span style="color:#f29668;">*</span><span> e </span><span style="color:#f29668;">as </span><span style="color:#ff7733;">f64</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;g is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> g)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>c is 44
</span><span>d is 11
</span><span>e is 121
</span><span>f is 9.777778
</span><span>g is 43.5432
</span></code></pre>
<h2 id="operatory-sravneniia">Операторы сравнения</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">/*
</span><span style="font-style:italic;color:#5c6773;">can only compare values of same type
</span><span style="font-style:italic;color:#5c6773;">*/
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> a </span><span style="color:#f29668;">= </span><span style="color:#f29718;">11</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> b </span><span style="color:#f29668;">= </span><span style="color:#f29718;">88</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a is </span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">b is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a</span><span style="color:#bfbab0cc;">,</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a EQUAL TO b is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a </span><span style="color:#f29668;">==</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a NOT EQUAL TO b is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a </span><span style="color:#f29668;">!=</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a GREATER THAN b is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a </span><span style="color:#f29668;">&gt;</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a GREATER THAN OR EQUAL TO b is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a </span><span style="color:#f29668;">&gt;=</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a LESS THAN b is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a </span><span style="color:#f29668;">&lt;</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a LESS THAN OR EQUAL TO b is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a </span><span style="color:#f29668;">&lt;=</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> c </span><span style="color:#f29668;">= </span><span style="color:#f29718;">true</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> d </span><span style="color:#f29668;">= </span><span style="color:#f29718;">false</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">c is </span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">d is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> c</span><span style="color:#bfbab0cc;">,</span><span> d)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;c EQUAL TO d is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> c </span><span style="color:#f29668;">==</span><span> d)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;c NOT EQUAL TO d is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> c </span><span style="color:#f29668;">!=</span><span> d)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;c GREATER THAN d is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> c </span><span style="color:#f29668;">&gt;</span><span> d)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;c GREATER THAN OR EQUAL TO d is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> c </span><span style="color:#f29668;">&gt;=</span><span> d)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;c LESS THAN d is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> c </span><span style="color:#f29668;">&lt;</span><span> d)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;c LESS THAN OR EQUAL TO d is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> c </span><span style="color:#f29668;">&lt;=</span><span> d)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>a is 11
</span><span>b is 88
</span><span>a EQUAL TO b is false
</span><span>a NOT EQUAL TO b is true
</span><span>a GREATER THAN b is false
</span><span>a GREATER THAN OR EQUAL TO b is false
</span><span>a LESS THAN b is true
</span><span>a LESS THAN OR EQUAL TO b is true
</span><span>c is true
</span><span>d is false
</span><span>c EQUAL TO d is false
</span><span>c NOT EQUAL TO d is true
</span><span>c GREATER THAN d is true
</span><span>c GREATER THAN OR EQUAL TO d is true
</span><span>c LESS THAN d is false
</span><span>c LESS THAN OR EQUAL TO d is false
</span></code></pre>
<h2 id="simvoly">Символы</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// Unicode scalar value stored using 4 bytes (32 bits)
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// contrary to C like languages that store it in 1 byte
</span><span>    </span><span style="color:#ff7733;">let</span><span> letter</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">char </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&#39;z&#39;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> number_char </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&#39;9&#39;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> finger </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&#39;</span><span style="color:#95e6cb;">\u{261D}</span><span style="color:#c2d94c;">&#39;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;letter is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> letter)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;number_char is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> number_char)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;finger is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> finger)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>letter is z
</span><span>number_char is 9
</span><span>finger is ☝
</span></code></pre>
<h2 id="srednee-znachenie">Среднее значение</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> a </span><span style="color:#f29668;">= </span><span style="color:#f29718;">33</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> b </span><span style="color:#f29668;">= </span><span style="color:#f29718;">4.9</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> c</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f32 </span><span style="color:#f29668;">= </span><span style="color:#f29718;">123.5</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> average </span><span style="color:#f29668;">= </span><span>(a </span><span style="color:#f29668;">as </span><span style="color:#ff7733;">f32 </span><span style="color:#f29668;">+</span><span> b </span><span style="color:#f29668;">as </span><span style="color:#ff7733;">f32 </span><span style="color:#f29668;">+</span><span> c) </span><span style="color:#f29668;">/ </span><span style="color:#f29718;">3.0</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;average is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> average)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(average</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">53.8</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;test passed.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>average is 53.8
</span><span>test passed.
</span></code></pre>
<h2 id="massivy">Массивы</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// fixed length and single typed
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// stored in contiguous memory locations
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// Contiguous means that elements are laid out so that every element is the same distance from its neighbors.
</span><span>    </span><span style="color:#ff7733;">let</span><span> letters </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#c2d94c;">&#39;a&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;b&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;c&#39;</span><span>]</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// type: [char; 3]
</span><span>    </span><span style="color:#ff7733;">let</span><span> first_letter </span><span style="color:#f29668;">=</span><span> letters[</span><span style="color:#f29718;">0</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;first_letter is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> first_letter)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// to modify elements in array, it must be mutable
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> numbers </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#f29718;">11</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">22</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">44</span><span>]</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// type is [i32; 3]
</span><span>    numbers[</span><span style="color:#f29718;">2</span><span>] </span><span style="color:#f29668;">= </span><span style="color:#f29718;">33</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;numbers is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> numbers[</span><span style="color:#f29718;">2</span><span>])</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// empty array declaration (memory allocated)
</span><span>    </span><span style="color:#ff7733;">let</span><span> words</span><span style="color:#bfbab0cc;">: </span><span>[</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">2</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    words </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#c2d94c;">&quot;ok&quot;</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">2</span><span>]</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// repeat expression, equivalent to [&quot;ok&quot;, &quot;ok&quot;]
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;words is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> words)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">/*
</span><span style="font-style:italic;color:#5c6773;">    length of usize is based on number of bytes needed to reference memory in your target architecture:
</span><span style="font-style:italic;color:#5c6773;">    - for 32 bit compilation target -&gt; usize is 4 bytes
</span><span style="font-style:italic;color:#5c6773;">    - for 64 bit compilation target -&gt; usize is 8 bytes
</span><span style="font-style:italic;color:#5c6773;">    */
</span><span>    </span><span style="color:#ff7733;">let</span><span> ints </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#f29718;">22</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">5</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> length</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">usize </span><span style="color:#f29668;">=</span><span> ints</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;length is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> length)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// get size in memory (mem module of the std crate)
</span><span>    </span><span style="color:#ff7733;">let</span><span> mem_size_byte </span><span style="color:#f29668;">= </span><span>std</span><span style="color:#f29668;">::</span><span>mem</span><span style="color:#f29668;">::</span><span>size_of_val(</span><span style="color:#f29668;">&amp;</span><span>ints)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;mem_size_byte is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> mem_size_byte)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// get slice from array
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> slice</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span>[</span><span style="color:#ff7733;">i32</span><span>] </span><span style="color:#f29668;">= &amp;</span><span>ints</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;slice is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> slice)</span><span style="color:#bfbab0cc;">;
</span><span>    
</span><span>    slice </span><span style="color:#f29668;">= &amp;</span><span>ints[</span><span style="color:#f29718;">3</span><span style="color:#f29668;">..</span><span style="color:#f29718;">5</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;slice is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> slice)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>first_letter is a
</span><span>numbers is 33
</span><span>words is [&quot;ok&quot;, &quot;ok&quot;]
</span><span>length is 5
</span><span>mem_size_byte is 20
</span><span>slice is [22, 22, 22, 22, 22]
</span><span>slice is [22, 22]
</span></code></pre>
<h2 id="srezy">Срезы</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// slice: used to reference a contiguous section (subset) of a collection (aarray, etc.) WITHOUT taking ownership of these elements
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// commonly used: string slice dt type : &amp;str
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// string literals are slices
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the data is hard-coded in the executable binary and the program  uses a string slice to access it
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// create a string slice from string data
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the sentence variable has a pointer to the beginning of the string data in memory as well, as info about its length and capacity
</span><span>    </span><span style="color:#ff7733;">let</span><span> sentence </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;This is a sequence of words.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;sentence is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> sentence)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the last_word variable has a pointer to the offset/start index of the section of the string data, as well as the length of the slice
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// as usual, the end index of the slice is excluded from the result (common in most programming languages when slicing collections)
</span><span>    </span><span style="color:#ff7733;">let</span><span> last_word </span><span style="color:#f29668;">= &amp;</span><span>sentence[</span><span style="color:#f29718;">22</span><span style="color:#f29668;">..</span><span style="color:#f29718;">22 </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">5</span><span>]</span><span style="color:#bfbab0cc;">;          </span><span style="font-style:italic;color:#5c6773;">// [start..end_excluded]
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;last_word is </span><span style="color:#95e6cb;">\&quot;</span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\&quot;</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> last_word)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// slice from offset index to end of the collection (here string data)
</span><span>    </span><span style="color:#ff7733;">let</span><span> last_part</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str </span><span style="color:#f29668;">= &amp;</span><span>sentence[</span><span style="color:#f29718;">22</span><span style="color:#f29668;">..</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;last_part is </span><span style="color:#95e6cb;">\&quot;</span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\&quot;</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> last_part)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// slice from beginning of collection up until end index
</span><span>    </span><span style="color:#ff7733;">let</span><span> without_last_word </span><span style="color:#f29668;">= &amp;</span><span>sentence[</span><span style="color:#f29668;">..</span><span style="color:#f29718;">22</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;without_last_word is </span><span style="color:#95e6cb;">\&quot;</span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\&quot;</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> without_last_word)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the length of a string slice is in number of bytes (usize data type)
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// NOT in number of characters
</span><span>    </span><span style="color:#ff7733;">let</span><span> slice_length</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">usize </span><span style="color:#f29668;">=</span><span> last_part</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;slice_length is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> bytes&quot;</span><span style="color:#bfbab0cc;">,</span><span> slice_length)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// when creating a string slice, the range indices must occur at valid UTF-8 character boundaries
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// remember that UTF-8 characters can occupy multiple bytes
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// all this to say that slice range indices must be character boundaries
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// if you index in the middle of a character, the program will panic
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// so be careful when creating string slices from strings with special characters or emojis
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// yes, this is some low-level stuff that we usually don&#39;t deal with in everyday Node.js
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>sentence is This is a sequence of words.
</span><span>last_word is &quot;words&quot;
</span><span>last_part is &quot;words.&quot;
</span><span>without_last_word is &quot;This is a sequence of &quot;
</span><span>slice_length is 6 bytes
</span></code></pre>
<h2 id="srezy-kak-parametry">Срезы как параметры</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> message </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;lorem ipsum&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> first_word </span><span style="color:#f29668;">= </span><span style="color:#f07178;">get_first_word</span><span>(</span><span style="color:#f29668;">&amp;</span><span>message)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;first_word is </span><span style="color:#95e6cb;">\&quot;</span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\&quot;</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> first_word)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> first_word_too </span><span style="color:#f29668;">= </span><span style="color:#f07178;">get_first_word_too</span><span>(</span><span style="color:#f29668;">&amp;</span><span>message[</span><span style="color:#f29718;">6</span><span style="color:#f29668;">..</span><span>])</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;first_word_too is </span><span style="color:#95e6cb;">\&quot;</span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\&quot;</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> first_word_too)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// ======= passing the entire string as input ===========
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_first_word</span><span>(</span><span style="color:#f29718;">msg</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span>String) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str </span><span>{
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// create a slice of bytes (&amp;[u8] data type) from string data
</span><span>    </span><span style="color:#ff7733;">let</span><span> bytes</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span>[</span><span style="color:#ff7733;">u8</span><span>] </span><span style="color:#f29668;">=</span><span> msg</span><span style="color:#f29668;">.</span><span style="color:#f07178;">as_bytes</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// iterate through byte sequence one byte at a time
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// use enumerate() to get the index when iterating
</span><span>   </span><span style="color:#ff7733;">for </span><span>(index</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">&amp;</span><span>item) </span><span style="color:#f29668;">in</span><span> bytes</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">enumerate</span><span>() {
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// find first space and return everything before as a string slice
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// b&#39; &#39; is the byte representation of a blank space
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// remember that we are iterating on a sequence of bytes, NOT characters
</span><span>       </span><span style="font-style:italic;color:#5c6773;">// we do that because the index for a string slice is in terms of bytes
</span><span>       </span><span style="color:#ff7733;">if</span><span> item </span><span style="color:#f29668;">== </span><span style="color:#ff7733;">b</span><span style="color:#c2d94c;">&#39; &#39; </span><span>{
</span><span>            </span><span style="color:#ff7733;">return </span><span style="color:#f29668;">&amp;</span><span>msg[</span><span style="color:#f29668;">..</span><span>index]</span><span style="color:#bfbab0cc;">;
</span><span>       }
</span><span>    }
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// no blank space found, return entire message
</span><span>    </span><span style="color:#f29668;">&amp;</span><span>msg
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// ======= passing a string slice as input ===========
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_first_word_too</span><span>(</span><span style="color:#f29718;">msg</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str </span><span>{
</span><span>    </span><span style="color:#ff7733;">let</span><span> bytes</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span>[</span><span style="color:#ff7733;">u8</span><span>] </span><span style="color:#f29668;">=</span><span> msg</span><span style="color:#f29668;">.</span><span style="color:#f07178;">as_bytes</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for </span><span>(index</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">&amp;</span><span>item) </span><span style="color:#f29668;">in</span><span> bytes</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">enumerate</span><span>() {
</span><span>        </span><span style="color:#ff7733;">if</span><span> item </span><span style="color:#f29668;">== </span><span style="color:#ff7733;">b</span><span style="color:#c2d94c;">&#39; &#39; </span><span>{
</span><span>            </span><span style="color:#ff7733;">return </span><span style="color:#f29668;">&amp;</span><span>msg[</span><span style="color:#f29668;">..</span><span>index]</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    </span><span style="color:#f29668;">&amp;</span><span>msg
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>first_word is &quot;lorem&quot;
</span><span>first_word_too is &quot;ipsum&quot;
</span></code></pre>
<h2 id="deref-prinuzhdenie">Deref принуждение</h2>
<p>Примечания:</p>
<ul>
<li>передача заимствованной ссылки на строку (&amp;string) не то же самое, что передача фрагмента строки (&amp;str)</li>
<li>заимствованная ссылка на строку указывает на строку в стеке, которая, в свою очередь, владеет данными в куче и указывает на них</li>
<li>срез хранит только указатель на данные кучи вместе с информацией о длине. Он не отслеживает емкость, потому что ему ничего не принадлежит в куче.</li>
<li>поскольку строковая ссылка содержит всю информацию для работы в качестве среза (указатель на данные кучи + длина), Rust позволяет использовать строковую ссылку там, где ожидается строковый срез</li>
<li>это удобство называется принуждением deref: </li>
</ul>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> message </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;lorem ipsum&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>   
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// notice that a string reference is passed as argument
</span><span>    </span><span style="color:#ff7733;">let</span><span> first_word </span><span style="color:#f29668;">= </span><span style="color:#f07178;">get_first_word</span><span>(</span><span style="color:#f29668;">&amp;</span><span>message)</span><span style="color:#bfbab0cc;">; 
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;first_word is </span><span style="color:#95e6cb;">\&quot;</span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\&quot;</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> first_word)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// notice that the expected argument is of type string slice (&amp;str)
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_first_word</span><span>(</span><span style="color:#f29718;">msg</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str </span><span>{
</span><span>    </span><span style="color:#ff7733;">let</span><span> bytes</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span>[</span><span style="color:#ff7733;">u8</span><span>] </span><span style="color:#f29668;">=</span><span> msg</span><span style="color:#f29668;">.</span><span style="color:#f07178;">as_bytes</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for </span><span>(index</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">&amp;</span><span>item) </span><span style="color:#f29668;">in</span><span> bytes</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">enumerate</span><span>() {
</span><span>        </span><span style="color:#ff7733;">if</span><span> item </span><span style="color:#f29668;">== </span><span style="color:#ff7733;">b</span><span style="color:#c2d94c;">&#39; &#39; </span><span>{
</span><span>            </span><span style="color:#ff7733;">return </span><span style="color:#f29668;">&amp;</span><span>msg[</span><span style="color:#f29668;">..</span><span>index]</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    </span><span style="color:#f29668;">&amp;</span><span>msg
</span><span>}
</span></code></pre>
<ul>
<li>конечно, принуждение deref не работает при использовании строкового среза, где ожидается строковая ссылка (из-за отсутствующих свойств)</li>
<li>при написании кода предпочитайте использовать строковые срезы в случаях, когда владение данными не требуется</li>
</ul>
<h2 id="mnogomernye-massivy">Многомерные массивы</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> d2</span><span style="color:#bfbab0cc;">: </span><span>[[</span><span style="color:#ff7733;">i32</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">3</span><span>]</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">3</span><span>] </span><span style="color:#f29668;">= </span><span>[[</span><span style="color:#f29718;">9</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">8</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">7</span><span>]</span><span style="color:#bfbab0cc;">, </span><span>[</span><span style="color:#f29718;">6</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">4</span><span>]</span><span style="color:#bfbab0cc;">, </span><span>[</span><span style="color:#f29718;">3</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span>]]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> value </span><span style="color:#f29668;">=</span><span> d2[</span><span style="color:#f29718;">1</span><span>][</span><span style="color:#f29718;">0</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;value is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> value)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// mutating a tuple
</span><span>    </span><span style="color:#ff7733;">let</span><span> d3</span><span style="color:#bfbab0cc;">: </span><span>[[[</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">100</span><span>]</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">20</span><span>]</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">5</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    d3 </span><span style="color:#f29668;">= </span><span>[[[</span><span style="color:#c2d94c;">&quot;ok&quot;</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">100</span><span>]</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">20</span><span>]</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">5</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;value d3[3][11][35] is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> d3[</span><span style="color:#f29718;">3</span><span>][</span><span style="color:#f29718;">11</span><span>][</span><span style="color:#f29718;">35</span><span>])
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>
</span><span>value is 6
</span><span>value d3[3][11][35] is ok
</span></code></pre>
<h2 id="vektory">Векторы</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// collection of elements with the same data type
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// elements are sorted in order
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// arrays have a fixed size that must be known at compile time
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// because array data is stored on the stack
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// vectors can dynamically grow and shrink
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// by adding / removing items
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// vector data is stored in heap memory
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// therefore you need to handle ownership and borrowing
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// vectors = mutable size arrays
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> letters</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Vec</span><span>&lt;</span><span style="color:#ff7733;">char</span><span>&gt; </span><span style="color:#f29668;">= </span><span style="color:#f07178;">vec!</span><span>[</span><span style="color:#c2d94c;">&#39;a&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;b&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;c&#39;</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;letters are </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> letters)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> first_letter </span><span style="color:#f29668;">=</span><span> letters[</span><span style="color:#f29718;">0</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;first_letter is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> first_letter)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// add value to vector
</span><span>    letters</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="color:#c2d94c;">&#39;d&#39;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    letters</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="color:#c2d94c;">&#39;e&#39;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    letters</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="color:#c2d94c;">&#39;f&#39;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;letters are </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> letters)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// remove last value
</span><span>    letters</span><span style="color:#f29668;">.</span><span style="color:#f07178;">pop</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;letters are </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> letters)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> numbers</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Vec</span><span>&lt;</span><span style="color:#ff7733;">i32</span><span>&gt; </span><span style="color:#f29668;">= </span><span style="color:#f07178;">vec!</span><span>[</span><span style="color:#f29718;">11</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">22</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">44</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    numbers[</span><span style="color:#f29718;">2</span><span>] </span><span style="color:#f29668;">= </span><span style="color:#f29718;">33</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;numbers is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> numbers[</span><span style="color:#f29718;">2</span><span>])</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> words</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Vec</span><span>&lt;</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>&gt;</span><span style="color:#bfbab0cc;">;
</span><span>    words </span><span style="color:#f29668;">= </span><span style="color:#f07178;">vec!</span><span>[</span><span style="color:#c2d94c;">&quot;ok&quot;</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">2</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;words are </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> words)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> ints </span><span style="color:#f29668;">= </span><span style="color:#f07178;">vec!</span><span>[</span><span style="color:#f29718;">22</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">33</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">44</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">55</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">66</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">77</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> length</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">usize </span><span style="color:#f29668;">=</span><span> ints</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;length is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> length)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> mem_size_byte </span><span style="color:#f29668;">= </span><span>std</span><span style="color:#f29668;">::</span><span>mem</span><span style="color:#f29668;">::</span><span>size_of_val(</span><span style="color:#f29668;">&amp;</span><span>ints)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;mem_size_byte is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> mem_size_byte)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// slice from vector
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> slice</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span>[</span><span style="color:#ff7733;">i32</span><span>] </span><span style="color:#f29668;">= &amp;</span><span>ints</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;slice is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> slice)</span><span style="color:#bfbab0cc;">;
</span><span>    slice </span><span style="color:#f29668;">= &amp;</span><span>ints[</span><span style="color:#f29718;">2</span><span style="color:#f29668;">..</span><span style="color:#f29718;">5</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;slice is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> slice)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// iterate over vector
</span><span>    </span><span style="color:#ff7733;">for</span><span> it </span><span style="color:#f29668;">in</span><span> ints</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>() {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;it is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> it)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// mutate vector items while iterating
</span><span>    </span><span style="color:#ff7733;">for</span><span> it </span><span style="color:#f29668;">in</span><span> ints</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter_mut</span><span>() {
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// dereference the pointer to get and set value (*it)
</span><span>        </span><span style="color:#f29668;">*</span><span>it </span><span style="color:#f29668;">*= *</span><span>it</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;ints is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> ints)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>letters are [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]
</span><span>first_letter is a
</span><span>letters are [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;]
</span><span>letters are [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;]
</span><span>numbers is 33
</span><span>words is [&quot;ok&quot;, &quot;ok&quot;]
</span><span>length is 6
</span><span>mem_size_byte is 24
</span><span>slice is [22, 33, 44, 55, 66, 77]
</span><span>slice is [44, 55, 66]
</span><span>it is 22
</span><span>it is 33
</span><span>it is 44
</span><span>it is 55
</span><span>it is 66
</span><span>it is 77
</span><span>ints is [484, 1089, 1936, 3025, 4356, 5929]
</span></code></pre>
<h2 id="kortezhi">Кортежи</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// used to group related items of mixed data types
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// can have max 12 mixed type values 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// adding more values and it will no longer be a tuple type
</span><span>    </span><span style="color:#ff7733;">let</span><span> a_tuple</span><span style="color:#bfbab0cc;">: </span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span style="color:#bfbab0cc;">, </span><span style="color:#ff7733;">u8</span><span style="color:#bfbab0cc;">, </span><span style="color:#ff7733;">char</span><span>) </span><span style="color:#f29668;">= </span><span>(</span><span style="color:#c2d94c;">&quot;ok&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;d&#39;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> first_item </span><span style="color:#f29668;">=</span><span> a_tuple</span><span style="color:#f29668;">.</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;first_item is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> first_item)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// mutate a tuple
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> b_tuple </span><span style="color:#f29668;">= </span><span>(</span><span style="color:#c2d94c;">&quot;ok&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    b_tuple</span><span style="color:#f29668;">.</span><span style="color:#f29718;">0 </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;ko&quot;</span><span style="color:#bfbab0cc;">;
</span><span>    b_tuple</span><span style="color:#f29668;">.</span><span style="color:#f29718;">1 </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;b_tuple.1 is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> b_tuple</span><span style="color:#f29668;">.</span><span style="color:#f29718;">1</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// destructure a tuple
</span><span>    </span><span style="color:#ff7733;">let c_tuple </span><span style="color:#f29668;">= </span><span>(</span><span style="color:#c2d94c;">&quot;en&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;US&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let </span><span>(language</span><span style="color:#bfbab0cc;">,</span><span> country</span><span style="color:#bfbab0cc;">,</span><span> code) </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">c_tuple</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>        </span><span style="color:#c2d94c;">&quot;language is: </span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">country is: </span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">code is: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        language</span><span style="color:#bfbab0cc;">,</span><span> country</span><span style="color:#bfbab0cc;">,</span><span> code
</span><span>    )
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>first_item is ok
</span><span>b_tuple.1 is 1
</span><span>language is: en
</span><span>country is: US
</span><span>code is: 1
</span></code></pre>
<h2 id="funktsii">Функции</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">be_polite</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// inferred types for y and z are the ones used as parameters of add()
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// to be clear, if you do not declare a specific type for variables, these variables will assume the type of the arguments of the function where first used
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// remember, by the default inferred type is i32 for integers
</span><span>    </span><span style="color:#ff7733;">let</span><span> y </span><span style="color:#f29668;">= </span><span style="color:#f29718;">12</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> z </span><span style="color:#f29668;">= </span><span style="color:#f29718;">34</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// now y and z are considered u8 type because this is how they are first used as function arguments
</span><span>    </span><span style="color:#f07178;">add</span><span>(y</span><span style="color:#bfbab0cc;">,</span><span> z)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// passing later y and z to another fn with different param types will panic
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// guess_number(z) // -&gt; expects a i32 not a u8
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// need for explicit cast:
</span><span>    </span><span style="color:#f07178;">guess_number</span><span>(y </span><span style="color:#f29668;">as </span><span style="color:#ff7733;">i32</span><span>)
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">be_polite</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Greetings, pleased to meet you.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">guess_number</span><span>(</span><span style="color:#f29718;">25</span><span>)
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">guess_number</span><span>(</span><span style="color:#f29718;">number</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i32</span><span>) {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Indeed, </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> is the correct answer&quot;</span><span style="color:#bfbab0cc;">,</span><span> number)
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">add</span><span>(</span><span style="color:#f29718;">a</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u8</span><span>, </span><span style="color:#f29718;">b</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u8</span><span>) {
</span><span>    </span><span style="color:#ff7733;">let</span><span> sum </span><span style="color:#f29668;">=</span><span> a </span><span style="color:#f29668;">+</span><span> b</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;sum is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> sum)
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Greetings, pleased to meet you.
</span><span>Indeed, 25 is the correct answer
</span><span>sum is 46
</span><span>Indeed, 12 is the correct answer
</span></code></pre>
<h2 id="utverzhdeniia-i-vyrazheniia">Утверждения и выражения</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// Statement performs an action without returning a value
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// statements end with a semicolon: a = 6;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// an expression evaluates to a resulting value
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// expressions do NOT end with a semicolon: 3 + 4 which evaluates to 7
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// adding a semicolon to an expressions transforms it into an statement
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// expressions are used as parts of statements: let total = r + c;\n\t{}\n\t{}&quot;,
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// where &quot;r + c&quot; is an expression and &quot;let total = r + c;&quot; is a statement
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;expression 4 + 5 evaluates to: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">4 </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">5</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>expression 4 + 5 evaluates to: 9
</span></code></pre>
<h2 id="tip-vozvrashchaemogo-znacheniia-funktsii">Тип возвращаемого значения функции</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> result </span><span style="color:#f29668;">= </span><span style="color:#f07178;">square</span><span>(</span><span style="color:#f29718;">3</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;result is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> result)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> result_tuple </span><span style="color:#f29668;">= </span><span style="color:#f07178;">triple</span><span>(</span><span style="color:#f29718;">33</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let </span><span>(input</span><span style="color:#bfbab0cc;">,</span><span> result1) </span><span style="color:#f29668;">=</span><span> result_tuple</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;result_tuple is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> result_tuple)</span><span style="color:#bfbab0cc;">; 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// {:?} ==&gt; debug formatting
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;input </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> evaluates to </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> input</span><span style="color:#bfbab0cc;">,</span><span> result1)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> nothing</span><span style="color:#bfbab0cc;">:</span><span>() </span><span style="color:#f29668;">= </span><span style="color:#f07178;">does_not_return</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;nothing (union data type) is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> nothing)
</span><span>}
</span><span>
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">square</span><span>(</span><span style="color:#f29718;">number</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i32</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#ff7733;">i32 </span><span>{
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;processing square(</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">)&quot;</span><span style="color:#bfbab0cc;">,</span><span> number)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// expression returning a value
</span><span>    number </span><span style="color:#f29668;">*</span><span> number
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// &quot; return  number * number;&quot; is also valid syntax
</span><span>}
</span><span>
</span><span style="font-style:italic;color:#5c6773;">// multiple returns with tuples
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">triple</span><span>(</span><span style="color:#f29718;">number</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i32</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span>(</span><span style="color:#ff7733;">i32</span><span>, </span><span style="color:#ff7733;">i32</span><span>) {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;tripling the number: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> number)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> input </span><span style="color:#f29668;">=</span><span> number</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> result </span><span style="color:#f29668;">=</span><span> number </span><span style="color:#f29668;">* </span><span style="color:#f29718;">3</span><span style="color:#bfbab0cc;">;
</span><span>    (input</span><span style="color:#bfbab0cc;">,</span><span> result)
</span><span>}
</span><span>
</span><span style="font-style:italic;color:#5c6773;">// union data type
</span><span style="font-style:italic;color:#5c6773;">// used when no meaningful values returned by a fn
</span><span style="font-style:italic;color:#5c6773;">// represented by empty()
</span><span style="font-style:italic;color:#5c6773;">// it is optional
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">does_not_return</span><span>() </span><span style="color:#bfbab0cc;">-&gt;</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;ain&#39;t returning nuthing!&quot;</span><span>)
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>processing square(3)
</span><span>result is 9
</span><span>tripling the number: 33
</span><span>result_tuple is (33, 99)
</span><span>input 33 evaluates to 99
</span><span>ain&#39;t returning nuthing!
</span><span>nothing (union data type) is()
</span></code></pre>
<h2 id="zamykaniia">Замыкания</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// closures are anonymous functions that have access to variables in the enclosing scope
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// long form
</span><span>    </span><span style="color:#ff7733;">let </span><span style="color:#ffb454;">double </span><span style="color:#f29668;">= </span><span>|</span><span style="color:#f29718;">n1</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u8</span><span>| </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#ff7733;">u8 </span><span>{ n1 </span><span style="color:#f29668;">* </span><span style="color:#f29718;">2 </span><span>}</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// short form
</span><span>    </span><span style="color:#ff7733;">let </span><span style="color:#ffb454;">triple </span><span style="color:#f29668;">= </span><span>|</span><span style="color:#f29718;">n1</span><span>| n1 </span><span style="color:#f29668;">* </span><span style="color:#f29718;">3</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">const </span><span style="color:#f29718;">DAYS_IN_YEAR</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u16 </span><span style="color:#f29668;">= </span><span style="color:#f29718;">365</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// referencing variable from enclosing scope
</span><span>    </span><span style="color:#ff7733;">let </span><span style="color:#ffb454;">quadruple_than_add_number_days_in_year </span><span style="color:#f29668;">= </span><span>|</span><span style="color:#f29718;">n1</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i32</span><span>| n1 </span><span style="color:#f29668;">* </span><span style="color:#f29718;">4 </span><span style="color:#f29668;">+ </span><span>(</span><span style="color:#f29718;">DAYS_IN_YEAR </span><span style="color:#f29668;">as </span><span style="color:#ff7733;">i32</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">const </span><span style="color:#f29718;">FACTOR</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i32 </span><span style="color:#f29668;">= </span><span style="color:#f29718;">22</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let </span><span style="color:#ffb454;">multiple_by_22 </span><span style="color:#f29668;">= </span><span>|</span><span style="color:#f29718;">x</span><span>| </span><span style="color:#f29718;">FACTOR </span><span style="color:#f29668;">*</span><span> x</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">double</span><span>(</span><span style="color:#f29718;">11</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">triple</span><span>(</span><span style="color:#f29718;">99</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">quadruple_than_add_number_days_in_year</span><span>(</span><span style="color:#f29718;">44</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">multiple_by_22</span><span>(</span><span style="color:#f29718;">5</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>22
</span><span>297
</span><span>541
</span><span>110
</span></code></pre>
<h2 id="konverter-tsel-siia-v-farengeit">Конвертер Цельсия в Фаренгейт</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let </span><span>(celsius</span><span style="color:#bfbab0cc;">,</span><span> farenheit) </span><span style="color:#f29668;">= </span><span style="color:#f07178;">to_farenheit</span><span>(</span><span style="color:#f29718;">40.0</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> celsius is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> farenheit&quot;</span><span style="color:#bfbab0cc;">,</span><span> celsius</span><span style="color:#bfbab0cc;">,</span><span> farenheit)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(farenheit</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">104.0</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// will not execute if assertion fails
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;test passed&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">to_farenheit</span><span>(</span><span style="color:#f29718;">celsius</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f32</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span>(</span><span style="color:#ff7733;">f32</span><span>, </span><span style="color:#ff7733;">f32</span><span>) {
</span><span>    </span><span style="color:#ff7733;">let</span><span> farenheit </span><span style="color:#f29668;">= </span><span>(</span><span style="color:#f29718;">1.8 </span><span style="color:#f29668;">*</span><span> celsius) </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">32.0</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// return statement (no semicolon)
</span><span>    (celsius</span><span style="color:#bfbab0cc;">,</span><span> farenheit)
</span><span>}
</span></code></pre>
<h2 id="uslovnoe-ispolnenie">Условное исполнение</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> x </span><span style="color:#f29668;">= </span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">if</span><span> x </span><span style="color:#f29668;">== </span><span style="color:#f29718;">5 </span><span>{
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;x is 5&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// if expressions (equivalent of ternary operator in JS/Node.js)
</span><span>    </span><span style="color:#ff7733;">let</span><span> x_odd </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">if</span><span> x </span><span style="color:#f29668;">% </span><span style="color:#f29718;">2 </span><span style="color:#f29668;">== </span><span style="color:#f29718;">0 </span><span>{ </span><span style="color:#c2d94c;">&quot;odd&quot; </span><span>} </span><span style="color:#ff7733;">else </span><span>{ </span><span style="color:#c2d94c;">&quot;even&quot; </span><span>}</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;x_odd is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> x_odd)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>x is 5
</span><span>x_odd is even
</span></code></pre>
<h2 id="mnozhestvennye-uslovnye-vyrazheniia-if-else-if">Множественные условные выражения (if / else if)</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> x </span><span style="color:#f29668;">= </span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> y </span><span style="color:#f29668;">= </span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">if</span><span> x </span><span style="color:#f29668;">&gt;</span><span> y {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;x is greater than  y&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    } </span><span style="color:#ff7733;">else if</span><span> x </span><span style="color:#f29668;">&lt;</span><span> y {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;x is less than y&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    } </span><span style="color:#ff7733;">else </span><span>{
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;x is equal to y&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>x is less than y
</span></code></pre>
<h2 id="naznachenie-tsikla">Назначение цикла</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> count </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// infinite loop
</span><span>    </span><span style="color:#ff7733;">loop </span><span>{
</span><span>        </span><span style="color:#ff7733;">if</span><span> count </span><span style="color:#f29668;">== </span><span style="color:#f29718;">10 </span><span>{
</span><span>            </span><span style="color:#ff7733;">break</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>        count </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;count is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> count)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">After first loop.</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// returning a value from loop expression
</span><span>    </span><span style="color:#ff7733;">let</span><span> result </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">loop </span><span>{
</span><span>        </span><span style="color:#ff7733;">if</span><span> count </span><span style="color:#f29668;">== </span><span style="color:#f29718;">15 </span><span>{
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// returning a value with break statement
</span><span>            </span><span style="color:#ff7733;">break</span><span> count </span><span style="color:#f29668;">* </span><span style="color:#f29718;">20</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>        count </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;count is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> count)</span><span style="color:#bfbab0cc;">;
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">After second loop, result is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> result)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>count is 1
</span><span>count is 2
</span><span>count is 3
</span><span>count is 4
</span><span>count is 5
</span><span>count is 6
</span><span>count is 7
</span><span>count is 8
</span><span>count is 9
</span><span>count is 10
</span><span>After first loop.
</span><span>count is 11
</span><span>count is 12
</span><span>count is 13
</span><span>count is 14
</span><span>count is 15
</span><span>After second loop, result is 300
</span></code></pre>
<h2 id="tsikly-poka">Циклы пока</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> count </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> letters</span><span style="color:#bfbab0cc;">: </span><span>[</span><span style="color:#ff7733;">char</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">5</span><span>] </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#c2d94c;">&#39;a&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;b&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;c&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;d&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;e&#39;</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">while</span><span> count </span><span style="color:#f29668;">&lt;</span><span> letters</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;letter[</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">] is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> count</span><span style="color:#bfbab0cc;">,</span><span> letters[count])</span><span style="color:#bfbab0cc;">;
</span><span>        count </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span style="font-style:italic;color:#5c6773;">// contrary to loop expressions, the break statement in while loop cannot return a value
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>letter[0] is a
</span><span>letter[1] is b
</span><span>letter[2] is c
</span><span>letter[3] is d
</span><span>letter[4] is e
</span></code></pre>
<h2 id="tsikly-for">Циклы for</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> message </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#c2d94c;">&#39;m&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;e&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;s&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;s&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;a&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;g&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;e&#39;</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">/* Iterator
</span><span style="font-style:italic;color:#5c6773;">    - implements logic to iterate over each item in a collection
</span><span style="font-style:italic;color:#5c6773;">    - next() method returns the next item in a sequence
</span><span style="font-style:italic;color:#5c6773;">      */
</span><span>    </span><span style="color:#ff7733;">for</span><span> item </span><span style="color:#f29668;">in</span><span> message</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>() {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;current item is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> item)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// To also get the indexes when iterating
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// enumerate() returns a tuple with index/item_reference pair
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// To get the item use &amp;item
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// because the iterator gives back a reference (&amp;&lt;NAME&gt;)
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// Adding the &amp; (borrow operator) allows you to 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// borrow the variable without 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// taking ownership (see borrowing section) 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// - then when you use the variable in the for loop scope, you access the value
</span><span>    </span><span style="color:#ff7733;">for </span><span>(index</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">&amp;</span><span>item) </span><span style="color:#f29668;">in</span><span> message</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">enumerate</span><span>() {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;item </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> index</span><span style="color:#bfbab0cc;">,</span><span> item)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">if</span><span> item </span><span style="color:#f29668;">== </span><span style="color:#c2d94c;">&#39;e&#39; </span><span>{
</span><span>            </span><span style="color:#ff7733;">break</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// iterating over a range of numbers
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// excludes the end value of the range
</span><span>    </span><span style="color:#ff7733;">for</span><span> number </span><span style="color:#f29668;">in </span><span style="color:#f29718;">0</span><span style="color:#f29668;">..</span><span style="color:#f29718;">5 </span><span>{
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;number is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> number)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>current item is m
</span><span>current item is e
</span><span>current item is s
</span><span>current item is s
</span><span>current item is a
</span><span>current item is g
</span><span>current item is e
</span><span>item 0 is m
</span><span>item 1 is e
</span><span>number is 0
</span><span>number is 1
</span><span>number is 2
</span><span>number is 3
</span><span>number is 4
</span></code></pre>
<h2 id="vlozhennye-tsikly">Вложенные циклы</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> matrix </span><span style="color:#f29668;">= </span><span>[[</span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">3</span><span>]</span><span style="color:#bfbab0cc;">, </span><span>[</span><span style="color:#f29718;">4</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">6</span><span>]</span><span style="color:#bfbab0cc;">, </span><span>[</span><span style="color:#f29718;">7</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">8</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">9</span><span>]]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// reading from matrix
</span><span>    </span><span style="color:#ff7733;">for</span><span> row </span><span style="color:#f29668;">in</span><span> matrix</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>() {
</span><span>        </span><span style="color:#ff7733;">for</span><span> number </span><span style="color:#f29668;">in</span><span> row</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>() {
</span><span>            </span><span style="color:#f07178;">print!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\t</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> number)</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;=======================&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// modifying values from mutable matrix
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// iter_mut() returns mutable references
</span><span>    </span><span style="color:#ff7733;">for</span><span> row </span><span style="color:#f29668;">in</span><span> matrix</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter_mut</span><span>() {
</span><span>        </span><span style="color:#ff7733;">for</span><span> number </span><span style="color:#f29668;">in</span><span> row</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter_mut</span><span>() {
</span><span>            </span><span style="font-style:italic;color:#5c6773;">// dereference with asterisk to get the value itself
</span><span>            </span><span style="color:#f29668;">*</span><span>number </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">20</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#f07178;">print!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\t</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> number)</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>1 2 3 
</span><span>4 5 6 
</span><span>7 8 9 
</span><span>=======================
</span><span>21 22 23 
</span><span>24 25 26 
</span><span>27 28 29
</span></code></pre>
<h2 id="ugadaiku">Угадайку</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>rand</span><span style="color:#f29668;">::</span><span>Rng</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>io</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Guess a number&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Please enter your guess:&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> secret_number </span><span style="color:#f29668;">= </span><span>rand</span><span style="color:#f29668;">::</span><span>thread_rng()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">gen_range</span><span>(</span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">101</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;The secret number is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> secret_number)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// &quot;::&quot; is used for associated functions of a given type (equiv to static methods in OOP - more on this later)
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// String::new() creates an empty string of type String    (growable UTF-8 encoded text)
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> guess </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">/*
</span><span style="font-style:italic;color:#5c6773;">        std::io::stdin, if you don&#39;t use the import at the top of file
</span><span style="font-style:italic;color:#5c6773;">        std::io::stdin() returns an instance of a std::io::Stdin type
</span><span style="font-style:italic;color:#5c6773;">    */
</span><span>    io</span><span style="color:#f29668;">::</span><span>stdin()
</span><span>        </span><span style="color:#f29668;">.</span><span style="color:#f07178;">read_line</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut</span><span> guess)
</span><span>        </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to read line&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;You guess: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> guess)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<h2 id="bazovaia-statistika">Базовая статистика</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> numbers </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">9</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">-</span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">23</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">20</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">-</span><span style="color:#f29718;">7</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">13</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">37</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">20</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">56</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">-</span><span style="color:#f29718;">18</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">20</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">3</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> max</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i32 </span><span style="color:#f29668;">=</span><span> numbers[</span><span style="color:#f29718;">0</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> min</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i32 </span><span style="color:#f29668;">=</span><span> numbers[</span><span style="color:#f29718;">0</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> mean</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64 </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0.0</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for</span><span> item </span><span style="color:#f29668;">in</span><span> numbers</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>() {
</span><span>        mean </span><span style="color:#f29668;">+= *</span><span>item </span><span style="color:#f29668;">as </span><span style="color:#ff7733;">f64</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">if </span><span style="color:#f29668;">*</span><span>item </span><span style="color:#f29668;">&gt;</span><span> max {
</span><span>            max </span><span style="color:#f29668;">= *</span><span>item</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>        </span><span style="color:#ff7733;">if </span><span style="color:#f29668;">*</span><span>item </span><span style="color:#f29668;">&lt;</span><span> min {
</span><span>            min </span><span style="color:#f29668;">= *</span><span>item</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    mean </span><span style="color:#f29668;">/=</span><span> numbers</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() </span><span style="color:#f29668;">as </span><span style="color:#ff7733;">f64</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(max</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">56</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(min</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">-</span><span style="color:#f29718;">18</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(mean</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">12.5</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Test passed!&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Test passed!
</span></code></pre>
<h2 id="oblast-vidimosti">Oбласть видимости</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> planet </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;Dunya&quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">if </span><span style="color:#f29718;">true </span><span>{
</span><span>        </span><span style="color:#ff7733;">let</span><span> planet </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;Jupiter&quot;</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;planet is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> planet)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;planet is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> planet)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>planet is Jupiter
</span><span>planet is Dunya
</span></code></pre>
<h2 id="izmenchivost-peremennoi">Изменчивость переменной</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> car </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;Mitsubishi&quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;car is a </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> car)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// code block, has its own scope
</span><span>    {
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// varable shadowing
</span><span>        </span><span style="color:#ff7733;">let</span><span> car </span><span style="color:#f29668;">= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;car is a </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> car)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;car is a </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> car)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>car is a Mitsubishi
</span><span>car is a 1
</span><span>car is a Mitsubishi
</span></code></pre>
<h2 id="stek-i-kucha-pamiati">Стек и куча памяти</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;=== STACK ====</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- values stored in sequential order of insertion&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- data added in LIFO (last in first out)&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- stores variables - pushing values on the stack&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- also holds info for function execution&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>        </span><span style="color:#c2d94c;">&quot;- stack have very fast access because no guessing where to put data, it will be on top&quot;
</span><span>    )</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- stacks are limited in size&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- all data in stack must have a known fixed size</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">func1</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;func1 done&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;pop variable y off the stack&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;pop variable z off the stack</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#95e6cb;">\n\n</span><span style="color:#c2d94c;">=== HEAP ====</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- adding data to heap, search for large enough place in memory to store data&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- marks memory spot as being used (allocating) and put data in it&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- accessing data in heap is more complex than the stack because the stack allocates anywhere in available memory&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- slower than stack&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- dynamically add and remove data&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#95e6cb;">\n\n</span><span style="color:#c2d94c;">=== POINTER ====</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- data type that stores a memory address&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- pointers have a fixed size so can be stored on the stack&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;- adding and accessing data on the heap is done through pointers (addresses in memory)&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">func1</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;func1 executing...&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> y </span><span style="color:#f29668;">= </span><span style="color:#f29718;">3.11</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;push variable y = </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> onto the stack&quot;</span><span style="color:#bfbab0cc;">,</span><span> y)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> z </span><span style="color:#f29668;">= </span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;push variable z = </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> onto the stack&quot;</span><span style="color:#bfbab0cc;">,</span><span> z)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">func2</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;func2 done&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;pop variable arr off the stack&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">func2</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;func2 executing...&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> arr </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">3</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">4</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;push variable arr = </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;"> onto the stack&quot;</span><span style="color:#bfbab0cc;">,</span><span> arr)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>=== STACK ====
</span><span>- values stored in sequential order of insertion
</span><span>- data added in LIFO (last in first out)
</span><span>- stores variables - pushing values on the stack
</span><span>- also holds info for function execution
</span><span>- stack have very fast access because no guessing where to put data, it will be on top
</span><span>- stacks are limited in size
</span><span>- all data in stack must have a known fixed size
</span><span>func1 executing...
</span><span>push variable y = 3.11 onto the stack
</span><span>push variable z = 5 onto the stack
</span><span>func2 executing...
</span><span>push variable arr = [2, 3, 4] onto the stack
</span><span>func2 done
</span><span>pop variable arr off the stack
</span><span>func1 done
</span><span>pop variable y off the stack
</span><span>pop variable z off the stack
</span><span>=== HEAP ====
</span><span>- adding data to heap, search for large enough place in memory to store data
</span><span>- marks memory spot as being used (allocating) and put data in it
</span><span>- accessing data in heap is more complex than the stack because the stack allocates anywhere in available memory
</span><span>- slower than stack
</span><span>- dynamically add and remove data
</span><span>=== POINTER ====
</span><span>- data type that stores a memory address
</span><span>- pointers have a fixed size so can be stored on the stack
</span><span>- adding and accessing data on the heap is done through pointers (addresses in memory)
</span></code></pre>
<h2 id="stroki">Строки</h2>
<p>В Rust есть два типа строковых типов. </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// Two types of string representation:
</span><span>    
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// - string literals: hard coded into the executable.
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// these are immutable and must be known before compilation
</span><span>    
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// - String type: allocated data on the heap, \n\tmutable and dynamically generated at runtime
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// string literal stored on heap
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// String::from() creates a String type from a string literal
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the sequence [m,a,r,s] will get stored on the heap
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// to access the string stored on heap, program holds a pointer to it on the stack (message variable)
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// that pointer on the stack includes first char memory address, length of string and the capacity so you know how much memory s allocated for it on the heap
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> message </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Jupiter&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;message is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> message)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// append string to original
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// if more memory need than capacity, pointer address updated as well as length and capacity to reflect new location in memory
</span><span>    message</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push_str</span><span>(</span><span style="color:#c2d94c;">&quot; is smoke and mirrors&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;message is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> message)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// pushing a char
</span><span>    message</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="color:#c2d94c;">&#39;!&#39;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;message is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> message)</span><span style="color:#bfbab0cc;">;
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// get length
</span><span>   </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;message lenght is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> message</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>   </span><span style="font-style:italic;color:#5c6773;">// get capacity in bytes
</span><span>   </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;message capacity is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> message</span><span style="color:#f29668;">.</span><span style="color:#f07178;">capacity</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// check if empty
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Is empty: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> message</span><span style="color:#f29668;">.</span><span style="color:#f07178;">is_empty</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// substring search
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Contains smoke: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> message</span><span style="color:#f29668;">.</span><span style="color:#f07178;">contains</span><span>(</span><span style="color:#c2d94c;">&quot;smoke&quot;</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// replace substring
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;message is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> message</span><span style="color:#f29668;">.</span><span style="color:#f07178;">replace</span><span>(</span><span style="color:#c2d94c;">&quot;smoke&quot;</span><span style="color:#bfbab0cc;">,</span><span style="color:#c2d94c;">&quot;gaz&quot;</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// loop over words in string (split by white space)
</span><span>  </span><span style="color:#ff7733;">for</span><span> word </span><span style="color:#f29668;">in</span><span> message</span><span style="color:#f29668;">.</span><span style="color:#f07178;">split_whitespace</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;word is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> word)</span><span style="color:#bfbab0cc;">;
</span><span>  }
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// create string with capacity
</span><span>  </span><span style="color:#ff7733;">let mut</span><span> s </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>with_capacity(</span><span style="color:#f29718;">4</span><span>)</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// 4 bytes capacity
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;s capacity is  </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> bytes&quot;</span><span style="color:#bfbab0cc;">,</span><span> s</span><span style="color:#f29668;">.</span><span style="color:#f07178;">capacity</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// 1 byte consumed 
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// Latin alphabet letters usually have 1 byte size
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// remember Unicode supports 4-byte characters
</span><span>  s</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="color:#c2d94c;">&#39;Q&#39;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>  s</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="color:#c2d94c;">&#39;W&#39;</span><span>)</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// 1 byte consumed
</span><span>  s</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push_str</span><span>(</span><span style="color:#c2d94c;">&quot;er&quot;</span><span>)</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// 2 bytes consumed
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// exceeding string capacity (automagically increased and reallocation in memory)
</span><span>  s</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="color:#c2d94c;">&#39;T&#39;</span><span>)</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// 1 byte consumed
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;s capacity is  now </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> bytes&quot;</span><span style="color:#bfbab0cc;">,</span><span> s</span><span style="color:#f29668;">.</span><span style="color:#f07178;">capacity</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>message is Jupiter
</span><span>message is Jupiter is smoke and mirrors
</span><span>message is Jupiter is smoke and mirrors!
</span><span>message lenght is 29
</span><span>message capacity is 56
</span><span>Is empty: false
</span><span>Contains smoke: true
</span><span>message is Jupiter is gaz and mirrors!
</span><span>word is Jupiter
</span><span>word is is
</span><span>word is smoke
</span><span>word is and
</span><span>word is mirrors!
</span><span>s capacity is  4 bytes
</span><span>s capacity is  now 8 bytes
</span></code></pre>
<h2 id="pravo-sobstvennosti">Право собственности</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">/* need to clean up allocated memory blocks no longer needed
</span><span style="font-style:italic;color:#5c6773;">    in C/C++: malloc() and free() for manual memory mngt
</span><span style="font-style:italic;color:#5c6773;">    other approach is garbage collection which is automatic */
</span><span>    </span><span style="font-style:italic;color:#5c6773;">/*
</span><span style="font-style:italic;color:#5c6773;">    Rust uses OWNERSHIP ystem:
</span><span style="font-style:italic;color:#5c6773;">       - variables are responsible for freeing their own resources
</span><span style="font-style:italic;color:#5c6773;">       - every value is owned by only one variable at a time
</span><span style="font-style:italic;color:#5c6773;">       - when owning variable goes out of scope the value is dropped
</span><span style="font-style:italic;color:#5c6773;">       - there are ways to transfer ownership of a value from one variable to another
</span><span style="font-style:italic;color:#5c6773;">    */
</span><span>    </span><span style="color:#ff7733;">let</span><span> outer_planet</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> outer_galaxy</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> outer_planet_position</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i32</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// inner code block scope
</span><span>    {
</span><span>        </span><span style="color:#ff7733;">let</span><span> inner_planet </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Mercury&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;inner_planet is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> inner_planet)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="font-style:italic;color:#5c6773;">/*
</span><span style="font-style:italic;color:#5c6773;">        because ownership mandates only one owner per value/data,
</span><span style="font-style:italic;color:#5c6773;">         - inner_planet will no longer point to the String value on the heap
</span><span style="font-style:italic;color:#5c6773;">         - transferring ownership from one variable to another is called a &quot;move&quot; in Rust
</span><span style="font-style:italic;color:#5c6773;">         - this means that NO shallow copy of data STORED ON THE HEAP in Rust
</span><span style="font-style:italic;color:#5c6773;">            (shallow copy = several variables pointing to same data in memory)
</span><span style="font-style:italic;color:#5c6773;">        */
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// transferring ownership
</span><span>        outer_planet </span><span style="color:#f29668;">=</span><span> inner_planet</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// can no longer use inner_planet variable after the move of ownership of string data
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// println!(&quot;inner_planet is {}&quot;, inner_planet); // =&gt; will panic
</span><span>        </span><span style="color:#ff7733;">let mut</span><span> inner_galaxy </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Milky Way&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;inner_galaxy is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> inner_galaxy)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// to duplicate data stored on the heap, creates a deep copy of the String data
</span><span>        
</span><span>        outer_galaxy </span><span style="color:#f29668;">=</span><span> inner_galaxy</span><span style="color:#f29668;">.</span><span style="color:#f07178;">clone</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>        inner_galaxy</span><span style="color:#f29668;">.</span><span style="color:#f07178;">clear</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;inner_galaxy is now: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> inner_galaxy)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;outer_galaxy is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> outer_galaxy)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// integer data types live on the stack
</span><span>        </span><span style="color:#ff7733;">let mut</span><span> inner_planet_position </span><span style="color:#f29668;">= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;inner_planet_position is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> inner_planet_position)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="font-style:italic;color:#5c6773;">/*
</span><span style="font-style:italic;color:#5c6773;">        a copy of the integer data is created for the outer_planet_position
</span><span style="font-style:italic;color:#5c6773;">        - ownership is respected (no shallow copy - only one variable per value at a time)
</span><span style="font-style:italic;color:#5c6773;">        - generally STACK-ONLY data types (ie fixed size) are implicitly copied
</span><span style="font-style:italic;color:#5c6773;">            when variable containing them is assigned to another variable
</span><span style="font-style:italic;color:#5c6773;">        - data types stored om stack implement the trait that allow them to be copied rather than moved
</span><span style="font-style:italic;color:#5c6773;">        */
</span><span>        outer_planet_position </span><span style="color:#f29668;">=</span><span> inner_planet_position</span><span style="color:#bfbab0cc;">;
</span><span>        inner_planet_position </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">4</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;inner_planet_position is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> inner_planet_position)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;outer_planet_position is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> outer_planet_position)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">outer_planet is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> outer_planet)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;outer_galaxy is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> outer_galaxy)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;outer_planet_position is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> outer_planet_position)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>inner_planet is Mercury
</span><span>inner_galaxy is Milky Way
</span><span>inner_galaxy is now: 
</span><span>outer_galaxy is Milky Way
</span><span>inner_planet_position is 1
</span><span>inner_planet_position is 5
</span><span>outer_planet_position is 1
</span></code></pre>
<h2 id="eshche-primery">Еще примеры:</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> arr_1</span><span style="color:#bfbab0cc;">: </span><span>[</span><span style="color:#ff7733;">u8</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">2</span><span>] </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#f29718;">33</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">66</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// ////////////////
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// fixed-length types (stored on the stack) are COPIED
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// ////////////////
</span><span>    </span><span style="color:#ff7733;">let</span><span> arr_2 </span><span style="color:#f29668;">=</span><span> arr_1</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;arr_1 is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> arr_1)</span><span style="color:#bfbab0cc;">;
</span><span>    arr_1 </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">2</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;arr_1 is now </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> arr_1)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;arr_2 is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> arr_2)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// ////////////////
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// mutable-length type values move the ownership to new variable
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// ////////////////
</span><span>    </span><span style="color:#ff7733;">let</span><span> vec_1 </span><span style="color:#f29668;">= </span><span style="color:#f07178;">vec!</span><span>[</span><span style="color:#f29718;">3</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">4</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> vec_2 </span><span style="color:#f29668;">=</span><span> vec_1</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// can no longer use the variable which ownership has been &quot;moved&quot;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// println!(&quot;vec_1 is {:?}&quot;, vec_1); // =&gt; wll panic
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;vec_2 is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> vec_2)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// to borrow value owned by a variable without moving ownership,
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// use a reference to that value
</span><span>    </span><span style="color:#ff7733;">let</span><span> vec_4 </span><span style="color:#f29668;">= </span><span style="color:#f07178;">vec!</span><span>[</span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">6</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">7</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// borrowing value using a reference (&amp;&lt;NAME&gt;)
</span><span>    </span><span style="color:#ff7733;">let</span><span> vec_5 </span><span style="color:#f29668;">= &amp;</span><span>vec_4</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;vec_4 is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> vec_4)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;vec_5 is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> vec_5)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Вывод
</span><span>arr_1 is [33, 66]
</span><span>arr_1 is now [1, 2]
</span><span>arr_2 is [33, 66]
</span><span>vec_2 is [3, 4]
</span><span>vec_4 is [5, 6, 7]
</span><span>vec_5 is [5, 6, 7]
</span></code></pre>
<h2 id="peredacha-prava-sobstvennosti-dannye-khraniatsia-v-stack">Передача права собственности (данные хранятся в STACK)</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> rocket_fuel </span><span style="color:#f29668;">= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">process_fuel</span><span>(rocket_fuel)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rocket_fuel is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rocket_fuel)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">/*
</span><span style="font-style:italic;color:#5c6773;">    - because propellant is i32 so lives on the stack, 
</span><span style="font-style:italic;color:#5c6773;">    the value passed as argument is COPIED jn fn scope
</span><span style="font-style:italic;color:#5c6773;">    - to be able to modify the copy inside the function scope, use the mut keyword
</span><span style="font-style:italic;color:#5c6773;">*/
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">process_fuel</span><span>(</span><span style="color:#ff7733;">mut </span><span style="color:#f29718;">propellant</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i32</span><span>) {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the copy is modified
</span><span>    propellant </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Processing propellant </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> propellant)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Processing propellant 3
</span><span>rocket_fuel is 1
</span></code></pre>
<h2 id="peredacha-prava-sobstvennosti-dannye-khraniatsia-v-heap">Передача права собственности (данные хранятся в HEAP)</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> rocket_fuel </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;MU-RF&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">process_fuel</span><span>(rocket_fuel)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the ownership of the string has moved to propellant variable,
</span><span> 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the following code will panic because rocket_fuel ownership is done so you can no longuer use the variable
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// println!(&quot;rocket_fuel is {}&quot;, rocket_fuel);
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">/*
</span><span style="font-style:italic;color:#5c6773;">    - because propellant is String so lives on the HEAP
</span><span style="font-style:italic;color:#5c6773;">    - data stored on heap when passed as argument to function, 
</span><span style="font-style:italic;color:#5c6773;">    - the function local variable gets a pointer to the data passed 
</span><span style="font-style:italic;color:#5c6773;">    - and therefore the local function variable gets ownership of the data. 
</span><span style="font-style:italic;color:#5c6773;">*/
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">process_fuel</span><span>(</span><span style="color:#f29718;">propellant</span><span style="color:#bfbab0cc;">:</span><span> String) {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// propellant takes ownership of the String data stored on the heap
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Processing propellant </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> propellant)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Processing propellant MU-RF
</span></code></pre>
<blockquote>
<p>Как разработчик Node.js следует помнить, что переменные, связанные с данными изменяемой длины (то есть хранящимися в куче), НЕ содержат сами данные, а являются указателем на эти данные в памяти. Указатель является ссылкой на данные, но НЕ самими данными, он описывает данные и способы их получения.</p>
</blockquote>
<p>Чтобы сохранить владение строкой переменной rocket_fuel, вы можете клонировать данные: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> rocket_fuel </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;MU-RF&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// ownership of the string his kept by rocket_fuel variable,
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// a clone/copy of the string data is passed as argument
</span><span>    </span><span style="color:#f07178;">process_fuel</span><span>( rocket_fuel</span><span style="color:#f29668;">.</span><span style="color:#f07178;">clone</span><span>() )</span><span style="color:#bfbab0cc;">;
</span><span>    
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// no panic because rocket_fuel stills own the string data
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rocket_fuel is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rocket_fuel)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">process_fuel</span><span>(</span><span style="color:#f29718;">propellant</span><span style="color:#bfbab0cc;">:</span><span> String) {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// propellant takes ownership of the String data clone
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// mutations on the clone of course will not affect the original data (but remember that you will need to declare mut in function signature)
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Processing propellant </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> propellant)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Processing propellant MU-RF
</span><span>rocket_fuel is MU-RF
</span></code></pre>
<p>Если вы не хотите копировать данные и вам нужна исходная переменная, чтобы сохранить право собственности на данные, вы можете передать право собственности обратно, когда функция будет выполнена: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> rocket_fuel </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;MU-RF&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// of course, you can declare again without mut
</span><span>    rocket_fuel </span><span style="color:#f29668;">= </span><span style="color:#f07178;">process_fuel</span><span>(rocket_fuel)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rocket_fuel is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rocket_fuel)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// notice the mut on the parameter declaration, to be able to mutate the data passed inside the function scope
</span><span style="font-style:italic;color:#5c6773;">// notice the String return type and the last line without a semicolon
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">process_fuel</span><span>(</span><span style="color:#ff7733;">mut </span><span style="color:#f29718;">propellant</span><span style="color:#bfbab0cc;">:</span><span> String) </span><span style="color:#bfbab0cc;">-&gt;</span><span> String {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Processing propellant </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> propellant)</span><span style="color:#bfbab0cc;">;
</span><span>    
</span><span>    propellant</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push_str</span><span>(</span><span style="color:#c2d94c;">&quot;-super&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    
</span><span>    propellant
</span><span>}
</span></code></pre>
<p>Ouput</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Processing propellant MU-RF
</span><span>rocket_fuel is MU-RF-super
</span></code></pre>
<h2 id="zaimstvovanie">Заимствование</h2>
<p>Все эти вещи о праве собственности - это здорово, но что, если вам не нужно передавать право собственности, вам просто нужны данные: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// BORROWING: access data without taking ownership
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// create a reference to the variable you want to borrow
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// using borrow operator &quot;&amp;&quot;
</span><span>    </span><span style="color:#ff7733;">let</span><span> rocket_fuel </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;MU-RF&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// notice the borrow operator to create a reference
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the function expects a reference, not a value
</span><span>    </span><span style="color:#ff7733;">let</span><span> length </span><span style="color:#f29668;">= </span><span style="color:#f07178;">process_fuel</span><span>(</span><span style="color:#f29668;">&amp;</span><span>rocket_fuel)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rocket_fuel is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">, length: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rocket_fuel</span><span style="color:#bfbab0cc;">,</span><span>length)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// notice the borrow operator in parameter type
</span><span style="font-style:italic;color:#5c6773;">// we expect propellant to be a reference to a string,
</span><span style="font-style:italic;color:#5c6773;">// not a string value (/pointer to it...)
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">process_fuel</span><span>(</span><span style="color:#f29718;">propellant</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span>String) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#ff7733;">usize </span><span>{
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// propellant is a reference to the variable that points to the string data, to borrow the data
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// again, NO SHALLOW COPY here because propellant borrows the pointer, it doesn&#39;t contain the pointer itself (let&#39;s say that it&#39;s a pointer to another pointer...)
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Processing propellant </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> propellant)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> length </span><span style="color:#f29668;">=</span><span> propellant</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    length
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// when the propellant variable goes out of scope at the end of the function, 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the string data is still on the heap because it remains owned by the original variable (rocket_fuel)
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Processing propellant MU-RF
</span><span>rocket_fuel is MU-RF, lenght: 5
</span></code></pre>
<p>В Rust данные чаще всего передаются по ссылке (заимствованы), чем по значению (передача права собственности). Но вам все равно нужно знать, какая переменная действительно владеет данными.</p>
<h2 id="mutatsiia-zaimstvovannykh-dannykh">Мутация заимствованных данных</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// notice it is a mutable variable
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> rocket_fuel </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;MU-RF&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// notice we pass a mutable reference (&amp;mut &lt;TYPE&gt;)
</span><span>    </span><span style="color:#ff7733;">let</span><span> length </span><span style="color:#f29668;">= </span><span style="color:#f07178;">process_fuel</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut</span><span> rocket_fuel)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rocket_fuel is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">, length: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rocket_fuel</span><span style="color:#bfbab0cc;">,</span><span> length)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// notice the &amp;mut in the parameter list
</span><span style="font-style:italic;color:#5c6773;">// we expect propellant to be a mutable reference to a String
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">process_fuel</span><span>(</span><span style="color:#f29718;">propellant</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut</span><span> String) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#ff7733;">usize </span><span>{
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Processing propellant </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> propellant)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// mutating borrowed data
</span><span>    propellant</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push_str</span><span>(</span><span style="color:#c2d94c;">&quot;333&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> length </span><span style="color:#f29668;">=</span><span> propellant</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    length
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Processing propellant MU-RF
</span><span>rocket_fuel is MU-RF333, lenght: 8
</span></code></pre>
<h2 id="ogranichenie-na-zaimstvovannye-dannye">Ограничение на заимствованные данные</h2>
<p>После создания изменяемой ссылки на переменную вы не можете создавать другие ссылки на нее в той же области.
Это предотвращает гонку данных, которая возникает, когда несколько ссылок могут обращаться к одним и тем же данным и изменять их.
Гонка данных - распространенная проблема при написании программ, обрабатывающих несколько потоков, которые выполняются одновременно (независимо от языка программирования - даже JavaScript с Node.js [который должен быть однопоточным ... но расширенные варианты использования допускают многопроцессорность и многопоточность ... знать ваши инструменты!]).
Это ограничение позволяет Rust предотвращать скачки данных во время компиляции.
Подводя итог (обратите внимание на фигурные скобки, обозначающие разные области действия): </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// IMMUTABLE references = as many as you want per scope
</span><span>    {
</span><span>        </span><span style="color:#ff7733;">let</span><span> something </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;a thing&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">let</span><span> one_ref </span><span style="color:#f29668;">= &amp;</span><span>something</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">let</span><span> another_ref </span><span style="color:#f29668;">= &amp;</span><span>something</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">let</span><span> some_ither_ref </span><span style="color:#f29668;">= &amp;</span><span>something</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span>(one_ref</span><span style="color:#bfbab0cc;">,</span><span> another_ref</span><span style="color:#bfbab0cc;">,</span><span> some_ither_ref))</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// MUTABLE references = ONE per scope
</span><span>    {
</span><span>        </span><span style="color:#ff7733;">let mut</span><span> something_changing </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;another thing&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">let</span><span> the_one_and_only_ref </span><span style="color:#f29668;">= &amp;</span><span style="color:#ff7733;">mut</span><span> something_changing</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// CANNOT create other references to &quot;something_changing&quot;
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// NO MATTER if mutable or immutable
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// the following will make the program panic
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// let trying_ref = &amp;something_changing;
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// let trying_other_ref = &amp;mut something_changing;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;It&#39;s only </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> the_one_and_only_ref)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>(&quot;a thing&quot;, &quot;a thing&quot;, &quot;a thing&quot;)
</span><span>It&#39;s only another thing
</span></code></pre>
<h2 id="visiachie-ssylki">Висячие ссылки</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> everything </span><span style="color:#f29668;">= </span><span style="color:#f07178;">create_something</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// &quot;everything&quot; is a stale reference pointing to nothing
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the program will not compile
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;everything is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> everything)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// notice the return type
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">create_something</span><span>() </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span>String {
</span><span>    </span><span style="color:#ff7733;">let</span><span> new_thing </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;new in town&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// this is a dangling reference because:
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// new_thing goes out of scope at the end of the function
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// returning a reference to that variable does not make sense
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// because the data will have been dropped from memory because not owned anymore by a variable
</span><span>    </span><span style="color:#f29668;">&amp;</span><span>new_thing
</span><span>}
</span></code></pre>
<p>Вывод</p>
<p>программа не будет компилироваться из-за висящей ссылки. Решение заключается в созданной строке вместо ссылки на нее: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> everything </span><span style="color:#f29668;">= </span><span style="color:#f07178;">create_something</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;everything is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> everything)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">create_something</span><span>() </span><span style="color:#bfbab0cc;">-&gt;</span><span> String {
</span><span>    </span><span style="color:#ff7733;">let</span><span> new_thing </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;new in town&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    new_thing
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>everything is new in town
</span></code></pre>
<h2 id="struktury-takzhe-izvestnye-kak-struktury">Структуры (также известные как структуры)</h2>
<ul>
<li>используется для группировки нескольких связанных элементов смешанных типов данных</li>
<li>элементы названы (в отличие от кортежей, в которых они упорядочены)</li>
<li>два вида структур (обычная структура и кортежная структура) </li>
</ul>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// tuple struct
</span><span style="font-style:italic;color:#5c6773;">// used to store a collection of mixed data without named fields
</span><span style="font-style:italic;color:#5c6773;">// used to be distinguished as a specific type 
</span><span style="font-style:italic;color:#5c6773;">// (not just a regular tuple)
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Signal</span><span>(</span><span style="color:#ff7733;">u8</span><span>, </span><span style="color:#ff7733;">bool</span><span>, String)</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span style="font-style:italic;color:#5c6773;">// regular struct
</span><span style="font-style:italic;color:#5c6773;">// struct names are capitalized 
</span><span style="font-style:italic;color:#5c6773;">// like classes in JavaScript and OOP generally
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Car </span><span>{
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// fields of the struct
</span><span>    model</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    year</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    used</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">bool</span><span>,
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// method: functions/subroutines associated to a struct
</span><span style="font-style:italic;color:#5c6773;">// methods are defined within the context of a struct
</span><span style="font-style:italic;color:#5c6773;">// the first parameter of a method is the reference to a struct instance
</span><span style="color:#ff7733;">impl </span><span style="color:#59c2ff;">Car </span><span>{
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// construct car
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">new</span><span>(</span><span style="color:#f29718;">m</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>, </span><span style="color:#f29718;">y</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>) </span><span style="color:#bfbab0cc;">-&gt;</span><span> Car {
</span><span>        Car {
</span><span>            model</span><span style="color:#bfbab0cc;">:</span><span> m</span><span style="color:#f29668;">.</span><span style="color:#f07178;">to_string</span><span>()</span><span style="color:#bfbab0cc;">,
</span><span>            year</span><span style="color:#bfbab0cc;">:</span><span> y</span><span style="color:#f29668;">.</span><span style="color:#f07178;">to_string</span><span>()</span><span style="color:#bfbab0cc;">,
</span><span>            used</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">false</span><span style="color:#bfbab0cc;">,
</span><span>        }
</span><span>    }
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// self is equivalent to &quot;this&quot; is JavaScript
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">serialize</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt;</span><span> String {
</span><span>        </span><span style="color:#f07178;">format!</span><span>(
</span><span>            </span><span style="color:#c2d94c;">&quot;model: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> - year: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> - used: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>            </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>model</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>year</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>used
</span><span>        )
</span><span>    }
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// mutate state
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">marked_used</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut </span><span style="color:#f29718;">self</span><span>) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>used </span><span style="color:#f29668;">= </span><span style="color:#f29718;">true</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Position </span><span>{
</span><span>  latitude</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64</span><span>,
</span><span>  longitude</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">print_signal</span><span>(</span><span style="color:#f29718;">s</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span>Signal) {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;s1 is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">, </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">, </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> s</span><span style="color:#f29668;">.</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">,</span><span> s</span><span style="color:#f29668;">.</span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">,</span><span> s</span><span style="color:#f29668;">.</span><span style="color:#f29718;">2</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> pos_1 </span><span style="color:#f29668;">=</span><span> Position {
</span><span>        latitude</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">27.299112</span><span style="color:#bfbab0cc;">,
</span><span>        longitude</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">95.387110</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>      </span><span style="color:#c2d94c;">&quot;pos_1 is </span><span style="color:#f29718;">{:.3}</span><span style="color:#c2d94c;">, </span><span style="color:#f29718;">{:.3}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, 
</span><span>      pos_1</span><span style="color:#f29668;">.</span><span>latitude</span><span style="color:#bfbab0cc;">, 
</span><span>      pos_1</span><span style="color:#f29668;">.</span><span>longitude
</span><span>    )</span><span style="color:#bfbab0cc;">;
</span><span>    pos_1</span><span style="color:#f29668;">.</span><span>latitude </span><span style="color:#f29668;">= </span><span style="color:#f29718;">23.1111</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>      </span><span style="color:#c2d94c;">&quot;pos_1 is now </span><span style="color:#f29718;">{:.3}</span><span style="color:#c2d94c;">, </span><span style="color:#f29718;">{:.3}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>      pos_1</span><span style="color:#f29668;">.</span><span>latitude</span><span style="color:#bfbab0cc;">, 
</span><span>      pos_1</span><span style="color:#f29668;">.</span><span>longitude
</span><span>    )</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> s1 </span><span style="color:#f29668;">=</span><span> Signal(</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">true</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;ok&quot;</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// fields of a tuple struct are accessed like regular tuples values
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// using their index
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// remember tuple structs do not have named fields
</span><span>    </span><span style="color:#f07178;">print_signal</span><span>(</span><span style="color:#f29668;">&amp;</span><span>s1)</span><span style="color:#bfbab0cc;">;
</span><span>    s1</span><span style="color:#f29668;">.</span><span style="color:#f29718;">0 </span><span style="color:#f29668;">= </span><span style="color:#f29718;">23</span><span style="color:#bfbab0cc;">;
</span><span>    s1</span><span style="color:#f29668;">.</span><span style="color:#f29718;">1 </span><span style="color:#f29668;">= </span><span style="color:#f29718;">false</span><span style="color:#bfbab0cc;">;
</span><span>    s1</span><span style="color:#f29668;">.</span><span style="color:#f29718;">2 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;NETERR&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;s1 is now </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">, </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">, </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> s1</span><span style="color:#f29668;">.</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">,</span><span> s1</span><span style="color:#f29668;">.</span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">,</span><span> s1</span><span style="color:#f29668;">.</span><span style="color:#f29718;">2</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> car_1 </span><span style="color:#f29668;">= </span><span>Car</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#c2d94c;">&quot;QBC&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;2133&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;car_1 is a </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> of </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> car_1</span><span style="color:#f29668;">.</span><span>model</span><span style="color:#bfbab0cc;">,</span><span> car_1</span><span style="color:#f29668;">.</span><span>year)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> is_used </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">if</span><span> car_1</span><span style="color:#f29668;">.</span><span>used </span><span style="color:#f29668;">== </span><span style="color:#f29718;">true </span><span>{
</span><span>        </span><span style="color:#c2d94c;">&quot;used&quot;
</span><span>    } </span><span style="color:#ff7733;">else </span><span>{
</span><span>        </span><span style="color:#c2d94c;">&quot;brand new&quot;
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;car_1 is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> is_used)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;car_1 is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> car_1</span><span style="color:#f29668;">.</span><span style="color:#f07178;">serialize</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> car_2 </span><span style="color:#f29668;">= </span><span>Car</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#c2d94c;">&quot;ZZ7&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;2042&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;car_2 is a </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> car_2</span><span style="color:#f29668;">.</span><span style="color:#f07178;">serialize</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>    car_2</span><span style="color:#f29668;">.</span><span style="color:#f07178;">marked_used</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;car_2 is now </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> car_2</span><span style="color:#f29668;">.</span><span style="color:#f07178;">serialize</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>pos_1 is 27.299, 95.387
</span><span>pos_1 is now 23.111, 95.387
</span><span>s1 is 0, true, ok
</span><span>s1 is now 23, false, NETERR
</span><span>car_1 is a QBC of 2133
</span><span>car_1 is brand new
</span><span>car_1 is model: QBC - year: 2133 - used: false
</span><span>car_2 is a model: ZZ7 - year: 2042 - used: false
</span><span>car_2 is now model: ZZ7 - year: 2042 - used: true
</span></code></pre>
<p>Подробнее о структурах: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// need to use debug and clone traits 
</span><span style="font-style:italic;color:#5c6773;">// to be able to print the struct instance with debug operator
</span><span style="font-style:italic;color:#5c6773;">// to be able to clone an instance of the struct
</span><span style="font-style:italic;color:#5c6773;">// more on traits later
</span><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">derive</span><span>(Debug</span><span style="color:#bfbab0cc;">,</span><span> Clone)]
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Spaceship </span><span>{
</span><span>    name</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    crew</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u8</span><span>,
</span><span>    propellant</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64</span><span>,
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// methods are defined within a impl block
</span><span style="color:#ff7733;">impl </span><span style="color:#59c2ff;">Spaceship </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_name</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str </span><span>{
</span><span>      </span><span style="font-style:italic;color:#5c6773;">// transform string to string slice with borrow operator
</span><span>      </span><span style="color:#f29668;">&amp;</span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>name
</span><span>    }
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">add_fuel</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut </span><span style="color:#f29718;">self</span><span>, </span><span style="color:#f29718;">gallons</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64</span><span>) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>propellant </span><span style="color:#f29668;">+=</span><span> gallons</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// this is an associated function 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// associated to the struct data type
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// similar to method but no &amp;self reference
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// used for functions related to the struct in general, 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// not a specific instance 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// (like class static methods in Object orientation)
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// commonly used to construct instances of struct
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">new</span><span>(</span><span style="color:#f29718;">name</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>) </span><span style="color:#bfbab0cc;">-&gt;</span><span> Spaceship {
</span><span>      Spaceship {
</span><span>        name</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(name)</span><span style="color:#bfbab0cc;">,
</span><span>        crew</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">11</span><span style="color:#bfbab0cc;">,          </span><span style="font-style:italic;color:#5c6773;">// default value for all instances
</span><span>        propellant</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">0.0    </span><span style="font-style:italic;color:#5c6773;">// default value for all instances
</span><span>      }
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> spaceship1 </span><span style="color:#f29668;">=</span><span> Spaceship {
</span><span>        name</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;spaceship1&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        crew</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">123</span><span style="color:#bfbab0cc;">,
</span><span>        propellant</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">1234567.654</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// accessing field value
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;spaceship1 has </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> members.&quot;</span><span style="color:#bfbab0cc;">,</span><span> spaceship1</span><span style="color:#f29668;">.</span><span>crew)</span><span style="color:#bfbab0cc;">;
</span><span>    spaceship1</span><span style="color:#f29668;">.</span><span>crew </span><span style="color:#f29668;">= </span><span style="color:#f29718;">99</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>        </span><span style="color:#c2d94c;">&quot;After attack, spaceship1 has now </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> members.&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        spaceship1</span><span style="color:#f29668;">.</span><span>crew
</span><span>    )</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;spaceship1 is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> spaceship1)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// by default struct data is stored on the STACK
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// if struct contains HEAP-stored data (like a string),
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the pointer is stored on the STACK and the data on the HEAP
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// create struct instance from fields of other instance
</span><span>    </span><span style="font-style:italic;color:#5c6773;">//  (like spread operator in JS but two dots instead of three)
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// it is called struct update syntax 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// it allows to create new instances
</span><span>    </span><span style="font-style:italic;color:#5c6773;">//  by copying the values of fields of an existing instance
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// (except for fields explicitly set in new instance)
</span><span>    </span><span style="color:#ff7733;">let</span><span> spaceship2 </span><span style="color:#f29668;">=</span><span> Spaceship {
</span><span>        name</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Galactos&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="color:#f29668;">..</span><span>spaceship1
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;spaceship2 is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;"> members.&quot;</span><span style="color:#bfbab0cc;">,</span><span> spaceship2)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// when modifying the copied struct instance 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// it will not affect new instances after the copy 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// (unlike JavaScript references that are kept,
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// when spreading objects with arrays...)
</span><span>    spaceship1</span><span style="color:#f29668;">.</span><span>name </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Battlestar&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    spaceship1</span><span style="color:#f29668;">.</span><span>crew </span><span style="color:#f29668;">= </span><span style="color:#f29718;">78</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(spaceship2</span><span style="color:#f29668;">.</span><span>crew</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">99</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;spaceship1 is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> spaceship1)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;spaceship2 is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> spaceship2)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// to copy all fields, even the heap based ones,
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// you need to create a copy of the struct instance
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// otherwise when using struct update syntax it moves ownership of heap-based data
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// meaning that you could no longer use the associated fields from the copied instance
</span><span>   </span><span style="color:#ff7733;">let mut</span><span> spaceship3 </span><span style="color:#f29668;">=</span><span> Spaceship {
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// need to manually implement the clone trait 
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// on the struct definition (see above)
</span><span>        </span><span style="color:#f29668;">..</span><span>spaceship1</span><span style="color:#f29668;">.</span><span style="color:#f07178;">clone</span><span>()
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;spaceship3 is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> spaceship3)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> name </span><span style="color:#f29668;">=</span><span> spaceship3</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get_name</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;name is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> name)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;spaceship3 propellant is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> spaceship3</span><span style="color:#f29668;">.</span><span>propellant)</span><span style="color:#bfbab0cc;">;
</span><span>    
</span><span>    spaceship3</span><span style="color:#f29668;">.</span><span style="color:#f07178;">add_fuel</span><span>(</span><span style="color:#f29718;">4567.113</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>      </span><span style="color:#c2d94c;">&quot;After going to space refuel station, spaceship3 propellant is now </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, 
</span><span>      spaceship3</span><span style="color:#f29668;">.</span><span>propellant
</span><span>    )</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// to call an assocaited function, use the path operator (::)
</span><span>    </span><span style="color:#ff7733;">let</span><span> spaceship4 </span><span style="color:#f29668;">= </span><span>Spaceship</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#c2d94c;">&quot;Serenity&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(spaceship4</span><span style="color:#f29668;">.</span><span>crew</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">11</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<h2 id="perechisleniia">Перечисления</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// defines a data type with multiple possible variants
</span><span style="color:#ff7733;">enum </span><span style="color:#59c2ff;">Controller </span><span>{
</span><span>    Turbo</span><span style="color:#bfbab0cc;">,
</span><span>    Up</span><span style="color:#bfbab0cc;">,
</span><span>    Down</span><span style="color:#bfbab0cc;">,
</span><span>    Left</span><span style="color:#bfbab0cc;">,
</span><span>    Right</span><span style="color:#bfbab0cc;">,
</span><span>    X</span><span style="color:#bfbab0cc;">,
</span><span>    Y</span><span style="color:#bfbab0cc;">,
</span><span>    A</span><span style="color:#bfbab0cc;">,
</span><span>    B</span><span style="color:#bfbab0cc;">,
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">push_button_notify</span><span>(</span><span style="color:#f29718;">c</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span>Controller) {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// pattern matching (equivalent to switch in JavaScript)
</span><span>    </span><span style="color:#ff7733;">match</span><span> c {
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Turbo </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Turbo button pushed.&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Up </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Up button pushed.&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Down </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Down button pushed.&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Left </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Left button pushed.&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Right </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Right button pushed.&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Y </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Y button pushed.&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>X </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;X button pushed.&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>A </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;A button pushed.&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>B </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;B button pushed.&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> secret_push_combo </span><span style="color:#f29668;">= </span><span>[
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Up</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Left</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>A</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Turbo</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Y</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>B</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Turbo</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Down</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>Right</span><span style="color:#bfbab0cc;">,
</span><span>        Controller</span><span style="color:#f29668;">::</span><span>X</span><span style="color:#bfbab0cc;">,
</span><span>    ]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for</span><span> push </span><span style="color:#f29668;">in</span><span> secret_push_combo</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>() {
</span><span>        </span><span style="color:#f07178;">push_button_notify</span><span>(push)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Up button pushed.
</span><span>Left button pushed.
</span><span>A button pushed.
</span><span>Turbo button pushed.
</span><span>Y button pushed.
</span><span>B button pushed.
</span><span>Turbo button pushed.
</span><span>Down button pushed.
</span><span>Right button pushed.
</span><span>X button pushed.
</span></code></pre>
<h2 id="obrezka-strok">Обрезка строк</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> test1 </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;This is test1.        &quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f07178;">trim_space</span><span>(</span><span style="color:#f29668;">&amp;</span><span>test1)</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;This is test1.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> test2 </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;        This is test2.&quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f07178;">trim_space</span><span>(</span><span style="color:#f29668;">&amp;</span><span>test2)</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;This is test2.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> test3 </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;        This is test3.               &quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f07178;">trim_space</span><span>(</span><span style="color:#f29668;">&amp;</span><span>test3)</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;This is test3.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> test4 </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;This is test4.&quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f07178;">trim_space</span><span>(</span><span style="color:#f29668;">&amp;</span><span>test4)</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;This is test4.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> test5 </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;        &quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f07178;">trim_space</span><span>(</span><span style="color:#f29668;">&amp;</span><span>test5)</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> test6 </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;&quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f07178;">trim_space</span><span>(</span><span style="color:#f29668;">&amp;</span><span>test6)</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> test7 </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;    😸   &quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f07178;">trim_space</span><span>(</span><span style="color:#f29668;">&amp;</span><span>test7)</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;😸&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> test8 </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;     😸😸 test8.   &quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f07178;">trim_space</span><span>(</span><span style="color:#f29668;">&amp;</span><span>test8)</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;😸😸 test8.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> test9 </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;     😸😸 test9. 😸😸   &quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f07178;">trim_space</span><span>(</span><span style="color:#f29668;">&amp;</span><span>test9)</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;😸😸 test9. 😸😸&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// note: strings in Rust have a trim() method
</span><span>    </span><span style="color:#ff7733;">let</span><span> test10 </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot; 😸This is the last test😸.😸      &quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> trimmed_message </span><span style="color:#f29668;">=</span><span> test10</span><span style="color:#f29668;">.</span><span style="color:#f07178;">trim</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(trimmed_message</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;😸This is the last test😸.😸&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">trim_space</span><span>(</span><span style="color:#f29718;">s</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str </span><span>{
</span><span>    </span><span style="color:#ff7733;">let</span><span> bytes </span><span style="color:#f29668;">=</span><span> s</span><span style="color:#f29668;">.</span><span style="color:#f07178;">as_bytes</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> result </span><span style="color:#f29668;">= </span><span style="color:#c2d94c;">&quot;&quot;</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// trim leading spaces by finding first non-space character
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// iterate over byte representation of the string slice
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// we do this because, we use am intermediary string slice
</span><span>    </span><span style="color:#ff7733;">for </span><span>(index</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">&amp;</span><span>item) </span><span style="color:#f29668;">in</span><span> bytes</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">enumerate</span><span>() {
</span><span>        </span><span style="color:#ff7733;">if</span><span> item </span><span style="color:#f29668;">!= </span><span style="color:#ff7733;">b</span><span style="color:#c2d94c;">&#39; &#39; </span><span>{
</span><span>            result </span><span style="color:#f29668;">= &amp;</span><span>s[index</span><span style="color:#f29668;">..</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#ff7733;">break</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    </span><span style="color:#ff7733;">let</span><span> bytes </span><span style="color:#f29668;">=</span><span> result</span><span style="color:#f29668;">.</span><span style="color:#f07178;">as_bytes</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// trim trailing spaces by finding last non-pace character
</span><span>    </span><span style="color:#ff7733;">for</span><span> t </span><span style="color:#f29668;">in</span><span> bytes</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">enumerate</span><span>() {
</span><span>        </span><span style="color:#ff7733;">let</span><span> index </span><span style="color:#f29668;">=</span><span> t</span><span style="color:#f29668;">.</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">let</span><span> reverse_index </span><span style="color:#f29668;">=</span><span> result</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() </span><span style="color:#f29668;">-</span><span> index</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">if</span><span> bytes[reverse_index </span><span style="color:#f29668;">- </span><span style="color:#f29718;">1</span><span>] </span><span style="color:#f29668;">!= </span><span style="color:#ff7733;">b</span><span style="color:#c2d94c;">&#39; &#39; </span><span>{
</span><span>            result </span><span style="color:#f29668;">= &amp;</span><span>result[</span><span style="color:#f29668;">..</span><span>reverse_index]</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#ff7733;">break</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    result
</span><span>}
</span></code></pre>
<p>Другое возможное решение: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">trim_space</span><span>(</span><span style="color:#f29718;">s</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str </span><span>{
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> start </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> end </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// iterate over the characters of the string slice
</span><span>    </span><span style="color:#ff7733;">for </span><span>(index</span><span style="color:#bfbab0cc;">,</span><span> character) </span><span style="color:#f29668;">in</span><span> s</span><span style="color:#f29668;">.</span><span style="color:#f07178;">chars</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">enumerate</span><span>() {
</span><span>        </span><span style="color:#ff7733;">if</span><span> character </span><span style="color:#f29668;">!= </span><span style="color:#c2d94c;">&#39; &#39; </span><span>{
</span><span>            start </span><span style="color:#f29668;">=</span><span> index</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#ff7733;">break</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    </span><span style="color:#ff7733;">for </span><span>(index</span><span style="color:#bfbab0cc;">,</span><span> character) </span><span style="color:#f29668;">in</span><span> s</span><span style="color:#f29668;">.</span><span style="color:#f07178;">chars</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">rev</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">enumerate</span><span>() {
</span><span>        </span><span style="color:#ff7733;">if</span><span> character </span><span style="color:#f29668;">!= </span><span style="color:#c2d94c;">&#39; &#39; </span><span>{
</span><span>            end </span><span style="color:#f29668;">=</span><span> s</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() </span><span style="color:#f29668;">-</span><span> index</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#ff7733;">break</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    </span><span style="color:#f29668;">&amp;</span><span>s[start</span><span style="color:#f29668;">..</span><span>end]
</span><span>}
</span></code></pre>
<h2 id="standartnaia-biblioteka">Стандартная библиотека</h2>
<ul>
<li>документация: https://doc.rust-lang.org/std/ </li>
</ul>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// the use statement is used to import crates/libraries
</span><span style="font-style:italic;color:#5c6773;">// it brings a module path into the scope of a program
</span><span style="font-style:italic;color:#5c6773;">// some modules of the standard library are not part of the Rust language itself 
</span><span style="font-style:italic;color:#5c6773;">// (meaning, you need to import them - like the &quot;fs&quot; module in Node.js - otherwise the compiler will not know what they mean)
</span><span style="font-style:italic;color:#5c6773;">// the standard library is available to all programs by default
</span><span style="font-style:italic;color:#5c6773;">// the prelude is a list of things that are automatically imported into every Rust program
</span><span style="font-style:italic;color:#5c6773;">// it does not import the entire std library (only the most common standard modules)
</span><span style="font-style:italic;color:#5c6773;">// if a module is not included into the prelude, you need to manually import it
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>thread</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> child </span><span style="color:#f29668;">= </span><span>thread</span><span style="color:#f29668;">::</span><span>spawn(</span><span style="color:#ff7733;">move </span><span style="color:#f29668;">|| </span><span style="color:#f29718;">2 </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">2</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> res </span><span style="color:#f29668;">=</span><span> child</span><span style="color:#f29668;">.</span><span style="color:#f07178;">join</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;res is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> res</span><span style="color:#f29668;">.</span><span style="color:#f07178;">unwrap</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>res is 4
</span></code></pre>
<h2 id="analiz-standartnogo-vvoda">Анализ стандартного ввода</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// read command line inputs
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>io</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>  </span><span style="color:#ff7733;">let mut</span><span> buffer </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Enter your name:&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// ===== access the stdin stream =====
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// the read_line() function will update the buffer with the input string
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// read_line() blocks the execution of the program until something is entered at the command line
</span><span>  </span><span style="color:#ff7733;">let</span><span> read_line_result </span><span style="color:#f29668;">= </span><span>io</span><span style="color:#f29668;">::</span><span>stdin()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">read_line</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut</span><span> buffer)</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;read_line_result is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> read_line_result)</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Welcome to Rust, </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> buffer)</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// ===== parse input string ========
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// clear buffer from previous input
</span><span>  buffer</span><span style="color:#f29668;">.</span><span style="color:#f07178;">clear</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Enter the year when you started learning Rust:&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="color:#ff7733;">let</span><span> read_line_result </span><span style="color:#f29668;">= </span><span>io</span><span style="color:#f29668;">::</span><span>stdin()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">read_line</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut</span><span> buffer)</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;read_line_result is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> read_line_result)</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// need to trim the input string because contains a newline at the end
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// notice the turbofish operator (::&lt;i32&gt;) to indicate the type of data to parse from the input string (here an i32 integer)
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// parse() returns a Result enum
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// Result enum allow to handle errors (more on this later)
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// use the unwrap function to extract the value
</span><span>  </span><span style="color:#ff7733;">let</span><span> start_year </span><span style="color:#f29668;">=</span><span> buffer</span><span style="color:#f29668;">.</span><span style="color:#f07178;">trim</span><span>()</span><span style="color:#f29668;">.</span><span>parse</span><span style="color:#f29668;">::</span><span>&lt;</span><span style="color:#ff7733;">i32</span><span>&gt;()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">unwrap</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;You started your Rust journey in </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> start_year)</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="font-style:italic;color:#5c6773;">// without using the  turbofish operator, indicate the destination type as the variable type
</span><span>  </span><span style="color:#ff7733;">let</span><span> start_year</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i32 </span><span style="color:#f29668;">=</span><span> buffer</span><span style="color:#f29668;">.</span><span style="color:#f07178;">trim</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">parse</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">unwrap</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;You will be an expert in </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> start_year </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">5</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Output (&gt; marks command line inputs)</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Enter your name:
</span><span>&gt; Florian
</span><span>read_line_result is Ok(8)
</span><span>Welcome to Rust, Florian
</span><span>Enter the year when you started learning Rust:
</span><span>&gt; 2021
</span><span>read_line_result is Ok(6)
</span><span>You started your Rust journey in 2021
</span><span>You will be an expert in 2026
</span></code></pre>
<h2 id="kreiti">крэйти</h2>
<ul>
<li>сборник файлов с исходным кодом</li>
<li>реестр крэйтов: crates.io (эквивалент npmjs.com для модулей Node.js)</li>
<li>два вида:
<ul>
<li>бинарные крэйти содержат исходный код для компиляции для выполнения программы</li>
<li>крэйти библиотек содержат код для выполнения другими программами</li>
</ul>
</li>
</ul>
<p>чтобы использовать сторонние крэйти, добавьте имя и версию крэйта в файле Cargo.toml в разделе [dependencies](внешние крэйти): </p>
<pre data-lang="toml" style="background-color:#0f1419;color:#bfbab0;" class="language-toml "><code class="language-toml" data-lang="toml"><span>[</span><span style="color:#59c2ff;">package</span><span>]
</span><span style="color:#59c2ff;">name </span><span>= </span><span style="color:#c2d94c;">&quot;crates&quot;
</span><span style="color:#59c2ff;">version </span><span>= </span><span style="color:#c2d94c;">&quot;0.1.0&quot;
</span><span style="color:#59c2ff;">authors </span><span>= [</span><span style="color:#c2d94c;">&quot;Florian GOTO &lt;you@example.com&gt;&quot;</span><span>]
</span><span style="color:#59c2ff;">edition </span><span>= </span><span style="color:#c2d94c;">&quot;2018&quot;
</span><span style="font-style:italic;color:#5c6773;"># See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html
</span><span>[</span><span style="color:#59c2ff;">dependencies</span><span>]
</span><span style="font-style:italic;color:#5c6773;"># add the random number generation crate
</span><span style="color:#59c2ff;">rand </span><span>= </span><span style="color:#c2d94c;">&quot;0.8.3&quot;
</span></code></pre>
<p>Cargo автоматически загрузит крэйти в разделе [зависимости] вместе со своими собственными зависимостями перед компиляцией для использования загруженного крэйта. </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use</span><span> rand</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>  </span><span style="color:#ff7733;">let</span><span> random_number </span><span style="color:#f29668;">= </span><span>rand</span><span style="color:#f29668;">::</span><span>random</span><span style="color:#f29668;">::</span><span>&lt;</span><span style="color:#ff7733;">u8</span><span>&gt;()</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;random_number is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> random_number)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>random_number is 97
</span></code></pre>
<ul>
<li>если вы используете определенную функцию крэйта, укажите ее непосредственно в операторе использования (компилятор предупредит вас о конфликтах имен с локально определенным кодом): </li>
</ul>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// import only the random() function of the rand crate
</span><span style="color:#ff7733;">use </span><span>rand</span><span style="color:#f29668;">::</span><span>random</span><span style="color:#bfbab0cc;">;
</span><span style="font-style:italic;color:#5c6773;">// import everything from the rand crate prelude
</span><span style="font-style:italic;color:#5c6773;">// use rand::prelude::*;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>  </span><span style="color:#ff7733;">let</span><span> random_number </span><span style="color:#f29668;">= </span><span>random</span><span style="color:#f29668;">::</span><span>&lt;</span><span style="color:#ff7733;">u8</span><span>&gt;()</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;random_number is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> random_number)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// cannot have a local function named random in the same scope
</span><span style="font-style:italic;color:#5c6773;">// the program will not compile if the following code is added because of the name collision
</span><span style="font-style:italic;color:#5c6773;">// fn random() -&gt; u8 { 
</span><span style="font-style:italic;color:#5c6773;">//   123 
</span><span style="font-style:italic;color:#5c6773;">// }
</span></code></pre>
<h2 id="novyi-vzgliad-na-igru-v-ugadyvanie">Новый взгляд на игру в угадывание</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>rand</span><span style="color:#f29668;">::</span><span>prelude</span><span style="color:#f29668;">::*</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>io</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">const </span><span style="color:#f29718;">MAX_RETRIES</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i8 </span><span style="color:#f29668;">= </span><span style="color:#f29718;">3</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// generate random number between specified range
</span><span>    </span><span style="color:#ff7733;">let</span><span> random_number</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i8 </span><span style="color:#f29668;">= </span><span style="color:#f07178;">thread_rng</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">gen_range</span><span>(</span><span style="color:#f29718;">1</span><span style="color:#f29668;">..</span><span style="color:#f29718;">101</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> buffer </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> retry_count </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Guess a number between 1 and 100:&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">while</span><span> retry_count </span><span style="color:#f29668;">&lt; </span><span style="color:#f29718;">MAX_RETRIES </span><span>{
</span><span>       </span><span style="font-style:italic;color:#5c6773;">// clear previous guess
</span><span>       buffer</span><span style="color:#f29668;">.</span><span style="color:#f07178;">clear</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>       io</span><span style="color:#f29668;">::</span><span>stdin()
</span><span>            </span><span style="color:#f29668;">.</span><span style="color:#f07178;">read_line</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut</span><span> buffer)
</span><span>            </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to read line&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>       </span><span style="font-style:italic;color:#5c6773;">// expect() is equivalent to unwrap() 
</span><span>       </span><span style="font-style:italic;color:#5c6773;">// used to get value from Result enum
</span><span>       </span><span style="font-style:italic;color:#5c6773;">// it allows to print a custom message when an error occurs
</span><span>       </span><span style="color:#ff7733;">let</span><span> guess </span><span style="color:#f29668;">=</span><span> buffer</span><span style="color:#f29668;">.</span><span style="color:#f07178;">trim</span><span>()
</span><span>                         </span><span style="color:#f29668;">.</span><span>parse</span><span style="color:#f29668;">::</span><span>&lt;</span><span style="color:#ff7733;">i8</span><span>&gt;()
</span><span>                         </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to parse number&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>       </span><span style="color:#ff7733;">if</span><span> guess </span><span style="color:#f29668;">&lt;</span><span> random_number {
</span><span>            retry_count </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#f07178;">println!</span><span>(
</span><span>                </span><span style="color:#c2d94c;">&quot;too low. </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>                </span><span style="color:#ff7733;">if</span><span> retry_count </span><span style="color:#f29668;">&lt; </span><span style="color:#f29718;">MAX_RETRIES </span><span>{
</span><span>                    </span><span style="color:#c2d94c;">&quot;Try again:&quot;
</span><span>                } </span><span style="color:#ff7733;">else </span><span>{
</span><span>                    </span><span style="color:#c2d94c;">&quot;&quot;
</span><span>                }
</span><span>            )</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>        </span><span style="color:#ff7733;">if</span><span> guess </span><span style="color:#f29668;">&gt;</span><span> random_number {
</span><span>            retry_count </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#f07178;">println!</span><span>(
</span><span>                </span><span style="color:#c2d94c;">&quot;too high. </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>                </span><span style="color:#ff7733;">if</span><span> retry_count </span><span style="color:#f29668;">&lt; </span><span style="color:#f29718;">MAX_RETRIES </span><span>{
</span><span>                    </span><span style="color:#c2d94c;">&quot;Try again:&quot;
</span><span>                } </span><span style="color:#ff7733;">else </span><span>{
</span><span>                    </span><span style="color:#c2d94c;">&quot;&quot;
</span><span>                }
</span><span>            )</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>        </span><span style="color:#ff7733;">if</span><span> guess </span><span style="color:#f29668;">==</span><span> random_number {
</span><span>            </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;correct!&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#ff7733;">return</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;random_number was </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> random_number)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Альтернативная реализация: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>rand</span><span style="color:#f29668;">::</span><span>prelude</span><span style="color:#f29668;">::*</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>io</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">guess_with_infinite_retry</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">guess_with_infinite_retry</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> secret_number </span><span style="color:#f29668;">= </span><span style="color:#f07178;">thread_rng</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">gen_range</span><span>(</span><span style="color:#f29718;">1</span><span style="color:#f29668;">..</span><span style="color:#f29718;">101</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Guess a number between 1 and 100:&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">loop </span><span>{
</span><span>        </span><span style="color:#ff7733;">let mut</span><span> guess </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>        io</span><span style="color:#f29668;">::</span><span>stdin()
</span><span>            </span><span style="color:#f29668;">.</span><span style="color:#f07178;">read_line</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut</span><span> guess)
</span><span>            </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to read line&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">let</span><span> guess</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u32 </span><span style="color:#f29668;">=</span><span> guess</span><span style="color:#f29668;">.</span><span style="color:#f07178;">trim</span><span>()
</span><span>                              </span><span style="color:#f29668;">.</span><span style="color:#f07178;">parse</span><span>()
</span><span>                              </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to parse guess&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">if</span><span> guess </span><span style="color:#f29668;">&lt;</span><span> secret_number {
</span><span>            </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;guess too low, guess higher:&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        } </span><span style="color:#ff7733;">else if</span><span> guess </span><span style="color:#f29668;">&gt;</span><span> secret_number {
</span><span>            </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;guess too high, guess lower:&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        } </span><span style="color:#ff7733;">else </span><span>{
</span><span>            </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;you found it!&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#ff7733;">break</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre>
<p>Альтернативная реализация с «продолжить игру»: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>rand</span><span style="color:#f29668;">::</span><span>prelude</span><span style="color:#f29668;">::*</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>io</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">guess_with_limited_retry</span><span>(</span><span style="color:#f29718;">5</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">guess_with_limited_retry</span><span>(</span><span style="color:#f29718;">max_retries</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i8</span><span>) {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// generate random number between specified range
</span><span>    </span><span style="color:#ff7733;">let</span><span> random_number</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">i8 </span><span style="color:#f29668;">= </span><span style="color:#f07178;">thread_rng</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">gen_range</span><span>(</span><span style="color:#f29718;">1</span><span style="color:#f29668;">..</span><span style="color:#f29718;">101</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> buffer </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> new_game </span><span style="color:#f29668;">= </span><span style="color:#f29718;">true</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">while</span><span> new_game </span><span style="color:#f29668;">== </span><span style="color:#f29718;">true </span><span>{
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Guess a number between 1 and 100:&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">let mut</span><span> retry_count </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">;
</span><span>         </span><span style="color:#ff7733;">while</span><span> retry_count </span><span style="color:#f29668;">&lt;</span><span> max_retries {
</span><span>            buffer</span><span style="color:#f29668;">.</span><span style="color:#f07178;">clear</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>            io</span><span style="color:#f29668;">::</span><span>stdin()
</span><span>                </span><span style="color:#f29668;">.</span><span style="color:#f07178;">read_line</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut</span><span> buffer)
</span><span>                </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to read line&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#ff7733;">let</span><span> guess </span><span style="color:#f29668;">=</span><span> buffer</span><span style="color:#f29668;">.</span><span style="color:#f07178;">trim</span><span>()
</span><span>                              </span><span style="color:#f29668;">.</span><span>parse</span><span style="color:#f29668;">::</span><span>&lt;</span><span style="color:#ff7733;">i8</span><span>&gt;()
</span><span>                              </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to parse number&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#ff7733;">if</span><span> guess </span><span style="color:#f29668;">&lt;</span><span> random_number {
</span><span>                retry_count </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>                </span><span style="color:#f07178;">println!</span><span>(
</span><span>                    </span><span style="color:#c2d94c;">&quot;too low. </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>                    </span><span style="color:#ff7733;">if</span><span> retry_count </span><span style="color:#f29668;">&lt;</span><span> max_retries {
</span><span>                        </span><span style="color:#c2d94c;">&quot;Try again:&quot;
</span><span>                    } </span><span style="color:#ff7733;">else </span><span>{
</span><span>                        </span><span style="color:#c2d94c;">&quot;&quot;
</span><span>                    }
</span><span>                )</span><span style="color:#bfbab0cc;">;
</span><span>            }
</span><span>            </span><span style="color:#ff7733;">if</span><span> guess </span><span style="color:#f29668;">&gt;</span><span> random_number {
</span><span>                retry_count </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>                </span><span style="color:#f07178;">println!</span><span>(
</span><span>                    </span><span style="color:#c2d94c;">&quot;too high. </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>                    </span><span style="color:#ff7733;">if</span><span> retry_count </span><span style="color:#f29668;">&lt;</span><span> max_retries {
</span><span>                        </span><span style="color:#c2d94c;">&quot;Try again:&quot;
</span><span>                    } </span><span style="color:#ff7733;">else </span><span>{
</span><span>                        </span><span style="color:#c2d94c;">&quot;&quot;
</span><span>                    }
</span><span>                )</span><span style="color:#bfbab0cc;">;
</span><span>            }
</span><span>            </span><span style="color:#ff7733;">if</span><span> guess </span><span style="color:#f29668;">==</span><span> random_number {
</span><span>                </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;correct!&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>                </span><span style="color:#ff7733;">break</span><span style="color:#bfbab0cc;">;
</span><span>            }
</span><span>        }
</span><span>      </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;random_number was </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> random_number)</span><span style="color:#bfbab0cc;">;
</span><span>      </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;do you want to continue playing ? (y/n)&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>      </span><span style="color:#ff7733;">let mut</span><span> try_again </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>      io</span><span style="color:#f29668;">::</span><span>stdin()
</span><span>         </span><span style="color:#f29668;">.</span><span style="color:#f07178;">read_line</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut</span><span> try_again)
</span><span>         </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to read line&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>      </span><span style="color:#ff7733;">let</span><span> try_again</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">char </span><span style="color:#f29668;">=</span><span> try_again
</span><span>         </span><span style="color:#f29668;">.</span><span style="color:#f07178;">trim</span><span>()
</span><span>         </span><span style="color:#f29668;">.</span><span style="color:#f07178;">parse</span><span>()
</span><span>         </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to parse try again answer.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>      </span><span style="color:#ff7733;">if</span><span> try_again </span><span style="color:#f29668;">== </span><span style="color:#c2d94c;">&#39;y&#39; </span><span>{
</span><span>            new_game </span><span style="color:#f29668;">= </span><span style="color:#f29718;">true</span><span style="color:#bfbab0cc;">;
</span><span>      } </span><span style="color:#ff7733;">else if</span><span> try_again </span><span style="color:#f29668;">== </span><span style="color:#c2d94c;">&#39;n&#39; </span><span>{
</span><span>            new_game </span><span style="color:#f29668;">= </span><span style="color:#f29718;">false</span><span style="color:#bfbab0cc;">;
</span><span>      } </span><span style="color:#ff7733;">else </span><span>{
</span><span>            </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;answer with y or n.&quot;</span><span>)
</span><span>      }
</span><span>    }
</span><span>}
</span></code></pre>
<h2 id="argumenty-komandnoi-stroki">Аргументы командной строки</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>env</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// check for required number of arguments
</span><span>    </span><span style="color:#ff7733;">if </span><span>env</span><span style="color:#f29668;">::</span><span>args()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() </span><span style="color:#f29668;">&lt;= </span><span style="color:#f29718;">2 </span><span>{
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;this program requires at least two arguments&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">return</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// args() returns an iterator over arguments passed to the program executable binary file
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// use enumerate() to get input args and their index
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// first argument is the executable path (but not always)
</span><span>    </span><span style="color:#ff7733;">for </span><span>(index</span><span style="color:#bfbab0cc;">,</span><span> arg) </span><span style="color:#f29668;">in </span><span>env</span><span style="color:#f29668;">::</span><span>args()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">enumerate</span><span>() {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;argument </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> index</span><span style="color:#bfbab0cc;">,</span><span> arg)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// get argument at specific index
</span><span>    </span><span style="color:#ff7733;">let</span><span> arg2 </span><span style="color:#f29668;">= </span><span>env</span><span style="color:#f29668;">::</span><span>args()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">nth</span><span>(</span><span style="color:#f29718;">2</span><span>)</span><span style="color:#f29668;">.</span><span style="color:#f07178;">unwrap</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">arg2 is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> arg2)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>&gt; cargo run toto &quot;titi.txt&quot; --flag -t
</span><span>argument 0 is target/debug/command_line_args
</span><span>argument 1 is toto
</span><span>argument 2 is titi.txt
</span><span>argument 3 is --flag
</span><span>argument 4 is -t
</span><span>arg2 is titi.txt
</span><span>Reading content from file
</span><span>create a fruits.txt file in your project folder with the following content:
</span><span>apple
</span><span>avocado
</span><span>banana
</span><span>cherry
</span><span>orange
</span><span>mango
</span><span>coconut
</span><span>pear
</span><span>lemon
</span></code></pre>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fs</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>path</span><span style="color:#f29668;">::</span><span>Path</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> path </span><span style="color:#f29668;">= </span><span>Path</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#c2d94c;">&quot;./fruits.txt&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> contents </span><span style="color:#f29668;">= </span><span>fs</span><span style="color:#f29668;">::</span><span>read_to_string(path)
</span><span>                      </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to read file.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;contents is: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> contents)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// process individual lines
</span><span>    </span><span style="color:#ff7733;">for</span><span> line </span><span style="color:#f29668;">in</span><span> contents</span><span style="color:#f29668;">.</span><span style="color:#f07178;">lines</span><span>() {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;line is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> line)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// read file as bytes
</span><span>    </span><span style="color:#ff7733;">let</span><span> contents</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Vec</span><span>&lt;</span><span style="color:#ff7733;">u8</span><span>&gt; </span><span style="color:#f29668;">= </span><span>fs</span><span style="color:#f29668;">::</span><span>read(path)
</span><span>                               </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to read file.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">contents is: </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> contents)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>contents is: apple
</span><span>avocado
</span><span>banana
</span><span>cherry
</span><span>orange
</span><span>mango
</span><span>coconut
</span><span>pear
</span><span>lemon
</span><span>line is apple
</span><span>line is avocado
</span><span>line is banana
</span><span>line is cherry
</span><span>line is orange
</span><span>line is mango
</span><span>line is coconut
</span><span>line is pear
</span><span>line is lemon
</span><span>contents is: [97, 112, 112, 108, 101, 10, 97, 118, 111, 99, 97, 100, 111, 10, 98, 97, 110, 97, 110, 97, 10, 99, 104, 101, 114, 114, 121, 10, 111, 114, 97, 109, 103, 101, 10, 109, 97, 110, 103, 111, 10, 99, 111, 99, 111, 110, 117, 116, 10, 112, 101, 97, 114, 10, 108, 101, 109, 111, 110, 10]
</span></code></pre>
<h2 id="zapis-soderzhimogo-v-fail">Запись содержимого в файл</h2>
<ul>
<li>скопируйте файл fruit.txt из предыдущего раздела </li>
</ul>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fs</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>path</span><span style="color:#bfbab0cc;">;
</span><span style="font-style:italic;color:#5c6773;">// import the Write trait of the io module prelude (more on traits later)
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>io</span><span style="color:#f29668;">::</span><span>prelude</span><span style="color:#f29668;">::*</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> path </span><span style="color:#f29668;">= </span><span>path</span><span style="color:#f29668;">::</span><span>Path</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#c2d94c;">&quot;./file.txt&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> contents </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>    contents</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push_str</span><span>(</span><span style="color:#c2d94c;">&quot;this is line 1</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    contents</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push_str</span><span>(</span><span style="color:#c2d94c;">&quot;this is line 2</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    contents</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push_str</span><span>(</span><span style="color:#c2d94c;">&quot;this is line 3</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// === write/replace file content ===
</span><span>    fs</span><span style="color:#f29668;">::</span><span>write(path</span><span style="color:#bfbab0cc;">,</span><span> contents)
</span><span>       </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to write to file.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// === append content to file ===
</span><span>    </span><span style="color:#ff7733;">let</span><span> path </span><span style="color:#f29668;">= </span><span>path</span><span style="color:#f29668;">::</span><span>Path</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#c2d94c;">&quot;./fruits.txt&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// new() function of the OpenOptions struct in the fs module
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> file </span><span style="color:#f29668;">= </span><span>fs</span><span style="color:#f29668;">::</span><span>OpenOptions</span><span style="color:#f29668;">::</span><span>new()
</span><span>        </span><span style="color:#f29668;">.</span><span style="color:#f07178;">append</span><span>(</span><span style="color:#f29718;">true</span><span>)
</span><span>        </span><span style="color:#f29668;">.</span><span style="color:#f07178;">open</span><span>(path)
</span><span>        </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to open file.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// uses the imported Write trait
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// expects an array of bytes as argument
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// notice the b in front of the string to convert to byte array
</span><span>    file</span><span style="color:#f29668;">.</span><span style="color:#f07178;">write</span><span>(</span><span style="color:#ff7733;">b</span><span style="color:#c2d94c;">&quot;</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">olive</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&quot;</span><span>)
</span><span>        </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to write to file.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<h2 id="poisk-fruktov">Поиск фруктов</h2>
<ul>
<li>скопируйте файл fruit.txt из предыдущих разделов в папку вашего проекта</li>
<li>создадим программу, которая ищет фрукты в списке</li>
<li>если фрукт есть в списке, он возвращает сообщение с его позицией в списке</li>
<li>если не найден, то добавляется в список </li>
</ul>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>env</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fs</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>io</span><span style="color:#f29668;">::</span><span>prelude</span><span style="color:#f29668;">::*</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>path</span><span style="color:#f29668;">::</span><span>Path</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">if </span><span>env</span><span style="color:#f29668;">::</span><span>args()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() </span><span style="color:#f29668;">!= </span><span style="color:#f29718;">3 </span><span>{
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;This programs takes two arguments&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        std</span><span style="color:#f29668;">::</span><span>process</span><span style="color:#f29668;">::</span><span>exit(</span><span style="color:#f29718;">1</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="color:#ff7733;">let</span><span> file_path </span><span style="color:#f29668;">= </span><span>env</span><span style="color:#f29668;">::</span><span>args()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">nth</span><span>(</span><span style="color:#f29718;">1</span><span>)</span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to get file path&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> search_name </span><span style="color:#f29668;">= </span><span>env</span><span style="color:#f29668;">::</span><span>args()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">nth</span><span>(</span><span style="color:#f29718;">2</span><span>)</span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to get search name&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> path </span><span style="color:#f29668;">= </span><span>Path</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29668;">&amp;</span><span>file_path)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> fruits </span><span style="color:#f29668;">= </span><span>fs</span><span style="color:#f29668;">::</span><span>read_to_string(path)</span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to read file&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for </span><span>(index</span><span style="color:#bfbab0cc;">,</span><span> fruit) </span><span style="color:#f29668;">in</span><span> fruits</span><span style="color:#f29668;">.</span><span style="color:#f07178;">lines</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">enumerate</span><span>() {
</span><span>        </span><span style="color:#ff7733;">if</span><span> fruit </span><span style="color:#f29668;">==</span><span> search_name {
</span><span>            </span><span style="color:#f07178;">println!</span><span>(
</span><span>                </span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> is the </span><span style="color:#f29718;">{}{}</span><span style="color:#c2d94c;"> fruit in the list&quot;</span><span style="color:#bfbab0cc;">,
</span><span>                search_name</span><span style="color:#bfbab0cc;">,
</span><span>                index </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">,
</span><span>                </span><span style="color:#ff7733;">if</span><span> index </span><span style="color:#f29668;">== </span><span style="color:#f29718;">0 </span><span>{
</span><span>                    </span><span style="color:#c2d94c;">&quot;st&quot;
</span><span>                } </span><span style="color:#ff7733;">else if</span><span> index </span><span style="color:#f29668;">== </span><span style="color:#f29718;">1 </span><span>{
</span><span>                    </span><span style="color:#c2d94c;">&quot;nd&quot;
</span><span>                } </span><span style="color:#ff7733;">else if</span><span> index </span><span style="color:#f29668;">== </span><span style="color:#f29718;">2 </span><span>{
</span><span>                    </span><span style="color:#c2d94c;">&quot;rd&quot;
</span><span>                } </span><span style="color:#ff7733;">else </span><span>{
</span><span>                    </span><span style="color:#c2d94c;">&quot;th&quot;
</span><span>                }
</span><span>            )</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#ff7733;">return</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> is not in the fruit list&quot;</span><span style="color:#bfbab0cc;">,</span><span> search_name)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> file </span><span style="color:#f29668;">= </span><span>fs</span><span style="color:#f29668;">::</span><span>OpenOptions</span><span style="color:#f29668;">::</span><span>new()
</span><span>        </span><span style="color:#f29668;">.</span><span style="color:#f07178;">append</span><span>(</span><span style="color:#f29718;">true</span><span>)
</span><span>        </span><span style="color:#f29668;">.</span><span style="color:#f07178;">open</span><span>(path)
</span><span>        </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to open file.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> new_fruit </span><span style="color:#f29668;">=</span><span> search_name</span><span style="color:#f29668;">.</span><span style="color:#f07178;">clone</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> fruits_bytes </span><span style="color:#f29668;">=</span><span> fruits</span><span style="color:#f29668;">.</span><span style="color:#f07178;">as_bytes</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">if</span><span> fruits_bytes[fruits_bytes</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() </span><span style="color:#f29668;">- </span><span style="color:#f29718;">1</span><span>] </span><span style="color:#f29668;">!= </span><span style="color:#ff7733;">b</span><span style="color:#c2d94c;">&#39;</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&#39; </span><span>{
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// insert newline at start of string
</span><span>        new_fruit</span><span style="color:#f29668;">.</span><span style="color:#f07178;">insert</span><span>(</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&#39;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    new_fruit</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="color:#c2d94c;">&#39;</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&#39;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    file</span><span style="color:#f29668;">.</span><span style="color:#f07178;">write</span><span>(new_fruit</span><span style="color:#f29668;">.</span><span style="color:#f07178;">as_bytes</span><span>())
</span><span>        </span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to write to file.&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> was added to fruit list&quot;</span><span style="color:#bfbab0cc;">,</span><span> search_name)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>&gt; cat fruits.txt 
</span><span>apple
</span><span>avocado
</span><span>banana
</span><span>cherry
</span><span>orange
</span><span>mango
</span><span>coconut
</span><span>pear
</span><span>lemon
</span><span>lime
</span><span>pineapple
</span><span>papaya
</span><span>grape
</span><span>guava
</span><span>kiwi
</span><span>elderberry
</span><span>raspberry
</span><span>tomato
</span><span>&gt; cargo run -q fruits.txt tomato
</span><span>tomato is the 18th fruit in the list
</span><span>&gt; cargo run -q fruits.txt avocado
</span><span>avocado is the 2nd fruit in the list
</span><span>&gt; cargo run -q fruits.txt peach
</span><span>peach is not in the fruit list
</span><span>peach was added to fruit list
</span><span>cargo run -q fruits.txt peach
</span><span>peach is the 19th fruit in the list
</span></code></pre>
<h2 id="fabriki-form">Фабрики форм</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Rectangle </span><span>{
</span><span>    width</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64</span><span>,
</span><span>    height</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64</span><span>,
</span><span>}
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Circle </span><span>{
</span><span>    radius</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64</span><span>,
</span><span>}
</span><span style="color:#ff7733;">impl </span><span style="color:#59c2ff;">Rectangle </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">new</span><span>(</span><span style="color:#f29718;">width</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64</span><span>, </span><span style="color:#f29718;">height</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64</span><span>) </span><span style="color:#bfbab0cc;">-&gt;</span><span> Rectangle {
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// notice the shorthand notation 
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// when creating instance of struct
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// because method params have same names as struct fields
</span><span>        Rectangle { width</span><span style="color:#bfbab0cc;">,</span><span> height }
</span><span>    }
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_area</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#ff7733;">f64 </span><span>{
</span><span>        </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>height </span><span style="color:#f29668;">* </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>width
</span><span>    }
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">scale</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut </span><span style="color:#f29718;">self</span><span>, </span><span style="color:#f29718;">scalar</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64</span><span>) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>width </span><span style="color:#f29668;">*=</span><span> scalar</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>height </span><span style="color:#f29668;">*=</span><span> scalar</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">impl </span><span style="color:#59c2ff;">Circle </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">new</span><span>(</span><span style="color:#f29718;">radius</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64</span><span>) </span><span style="color:#bfbab0cc;">-&gt;</span><span> Circle {
</span><span>        Circle { radius }
</span><span>    }
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_area</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#ff7733;">f64 </span><span>{
</span><span>        std</span><span style="color:#f29668;">::</span><span>f64</span><span style="color:#f29668;">::</span><span>consts</span><span style="color:#f29668;">::</span><span style="color:#f29718;">PI </span><span style="color:#f29668;">* </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>radius </span><span style="color:#f29668;">* </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>radius
</span><span>    }
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_diameter</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#ff7733;">f64 </span><span>{
</span><span>        </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>radius </span><span style="color:#f29668;">* </span><span style="color:#f29718;">2.0
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> rect </span><span style="color:#f29668;">= </span><span>Rectangle</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">1.2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">3.4</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(rect</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get_area</span><span>()</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">4.08</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    rect</span><span style="color:#f29668;">.</span><span style="color:#f07178;">scale</span><span>(</span><span style="color:#f29718;">0.5</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(rect</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get_area</span><span>()</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1.02</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> expected </span><span style="color:#f29668;">= </span><span style="color:#f29718;">16.0 </span><span style="color:#f29668;">* </span><span>std</span><span style="color:#f29668;">::</span><span>f64</span><span style="color:#f29668;">::</span><span>consts</span><span style="color:#f29668;">::</span><span style="color:#f29718;">PI</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(circ</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get_area</span><span>()</span><span style="color:#bfbab0cc;">,</span><span> expected)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Test passed!&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Test passed!
</span></code></pre>
<h2 id="opredelenie-struktur-s-dzhenerikami">Определение структур с дженериками</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// abstract stand-ins for concrete data types or other properties
</span><span style="font-style:italic;color:#5c6773;">// can be used with structs, functions, methods, etc. to help eliminate duplicate code
</span><span style="font-style:italic;color:#5c6773;">// gives flexibility to data types
</span><span style="font-style:italic;color:#5c6773;">// defined with&lt;T&gt;(T: generic type variable)
</span><span style="font-style:italic;color:#5c6773;">// the name of the generic variable is arbitrary, could be &lt;Toto&gt;
</span><span style="font-style:italic;color:#5c6773;">// similar to generics in TypeScrypt
</span><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">derive</span><span>(Debug)]
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Rectangle</span><span>&lt;T&gt; {
</span><span>    width</span><span style="color:#bfbab0cc;">:</span><span> T,
</span><span>    height</span><span style="color:#bfbab0cc;">:</span><span> T,
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// multiple generic types
</span><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">derive</span><span>(Debug)]
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Shape</span><span>&lt;T, U&gt; {
</span><span>    width</span><span style="color:#bfbab0cc;">:</span><span> T,
</span><span>    height</span><span style="color:#bfbab0cc;">:</span><span> U,
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// creating rectangle with f64 data
</span><span>    </span><span style="color:#ff7733;">let</span><span> rect </span><span style="color:#f29668;">=</span><span> Rectangle {
</span><span>        width</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">1.2</span><span style="color:#bfbab0cc;">,
</span><span>        height</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">3.4</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rect is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rect)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// creating rectangle with u32 data
</span><span>    </span><span style="color:#ff7733;">let</span><span> rect </span><span style="color:#f29668;">=</span><span> Rectangle {
</span><span>        width</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">,
</span><span>        height</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">11</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rect is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rect)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// creating rectangle with u8 data
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// notice we add u8 as a suffix to the number
</span><span>    </span><span style="color:#ff7733;">let</span><span> rect </span><span style="color:#f29668;">=</span><span> Rectangle {
</span><span>        width</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">7</span><span style="color:#ff7733;">u8</span><span style="color:#bfbab0cc;">,
</span><span>        height</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">23</span><span style="color:#ff7733;">u8</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rect is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rect)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// creating shape with u16 and f32 data
</span><span>    </span><span style="color:#ff7733;">let</span><span> rect </span><span style="color:#f29668;">=</span><span> Shape {
</span><span>        width</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">456</span><span style="color:#ff7733;">u16</span><span style="color:#bfbab0cc;">,
</span><span>        height</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">78.54</span><span style="color:#ff7733;">f32</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rect is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rect)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>rect is Rectangle { width: 1.2, height: 3.4 }
</span><span>rect is Rectangle { width: 5, height: 11 }
</span><span>rect is Rectangle { width: 7, height: 23 }
</span><span>rect is Shape { width: 456, height: 78.54 }
</span></code></pre>
<ul>
<li>Обобщения - это абстракция с нулевой стоимостью = более простое программирование без снижения производительности во время выполнения.</li>
<li>Компилятор Rust использует мономорфизацию для дженериков = заменяет заполнители конкретными типами данных</li>
<li>Во время компиляции код будет включать конкретные типы данных, а не общую абстракцию = если вы создаете Rectangle с данными f64, скомпилированный код будет иметь определение структуры для Rectangle с полями f64 и столько определений конкретных типов, сколько при создании экземпляров структуры.</li>
<li>Исходный код будет использовать общие типы данных, но скомпилированный код будет иметь конкретные типы данных, что не повлияет на производительность во время выполнения (никаких догадок о типах данных).</li>
</ul>
<h2 id="opredeleniia-metodov-s-obobshcheniiami">Определения методов с обобщениями</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">derive</span><span>(Debug)]
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Rectangle</span><span>&lt;T&gt; {
</span><span>    width</span><span style="color:#bfbab0cc;">:</span><span> T,
</span><span>    height</span><span style="color:#bfbab0cc;">:</span><span> T,
</span><span>}
</span><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">derive</span><span>(Debug)]
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Shape</span><span>&lt;T, U&gt; {
</span><span>    width</span><span style="color:#bfbab0cc;">:</span><span> T,
</span><span>    height</span><span style="color:#bfbab0cc;">:</span><span> U,
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// include the generic variable names after the impl keyword
</span><span style="font-style:italic;color:#5c6773;">// and after the struct identifier
</span><span style="font-style:italic;color:#5c6773;">// impl&lt;T, U&gt; tells the compiler that methods for generic struct definition
</span><span style="color:#ff7733;">impl</span><span>&lt;T, U&gt; </span><span style="color:#59c2ff;">Shape</span><span>&lt;T, U&gt; {
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_width</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span>T {
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// need to return a reference 
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// because not know by which type&lt;T&gt; will be replaced with
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// remember ownership for fixed / mutable-length data type
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// returning a reference works for both without transfer of ownership
</span><span>        </span><span style="color:#f29668;">&amp;</span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>width
</span><span>    }
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// implementing methods for a specific concrete type of Shape
</span><span style="font-style:italic;color:#5c6773;">// notice not putting generic types after impl keyword tells the compiler that these methods are for concrete struct defintition
</span><span style="color:#ff7733;">impl </span><span style="color:#59c2ff;">Shape</span><span>&lt;</span><span style="color:#ff7733;">u8</span><span>, </span><span style="color:#ff7733;">u8</span><span>&gt; {
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_perimeter</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#ff7733;">u8 </span><span>{
</span><span>        (</span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>height </span><span style="color:#f29668;">+ </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>width) </span><span style="color:#f29668;">* </span><span style="color:#f29718;">2
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> rect </span><span style="color:#f29668;">=</span><span> Rectangle {
</span><span>        width</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">1.2</span><span style="color:#bfbab0cc;">,
</span><span>        height</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">3.4</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rect is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rect)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> rect </span><span style="color:#f29668;">=</span><span> Rectangle {
</span><span>        width</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">,
</span><span>        height</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">11</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rect is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rect)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> rect </span><span style="color:#f29668;">=</span><span> Rectangle {
</span><span>        width</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">7</span><span style="color:#ff7733;">u8</span><span style="color:#bfbab0cc;">,
</span><span>        height</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">23</span><span style="color:#ff7733;">u8</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rect is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rect)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> rect </span><span style="color:#f29668;">=</span><span> Shape {
</span><span>        width</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">456</span><span style="color:#ff7733;">u16</span><span style="color:#bfbab0cc;">,
</span><span>        height</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">78.54</span><span style="color:#ff7733;">f32</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rect is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rect)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rect width is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rect</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get_width</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> rect </span><span style="color:#f29668;">=</span><span> Shape {
</span><span>        width</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">54</span><span style="color:#ff7733;">u8</span><span style="color:#bfbab0cc;">,
</span><span>        height</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">32</span><span style="color:#ff7733;">u8</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// get_perimeter() method is defined on this instance of Shape 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// because the fields are both u8 data
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// otherwise this method would be not be found
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;rect perimter is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> rect</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get_perimeter</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>rect is Rectangle { width: 1.2, height: 3.4 }
</span><span>rect is Rectangle { width: 5, height: 11 }
</span><span>rect is Rectangle { width: 7, height: 23 }
</span><span>rect is Shape { width: 456, height: 78.54 }
</span><span>rect width is 456
</span><span>rect perimter is 172
</span></code></pre>
<h2 id="opredeleniia-funktsii-s-dzhenerikami">Определения функций с дженериками</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// restrict the generic type
</span><span style="font-style:italic;color:#5c6773;">// to types that implement the Trait for values that can be compared for a sort-order (PartialOrd)
</span><span style="font-style:italic;color:#5c6773;">// PartialOrd trait is included in the std crate prelude (no need for full path)
</span><span style="font-style:italic;color:#5c6773;">// otherwise, how would the compiler know if the concrete types can be compared using &gt; ?
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_biggest</span><span>&lt;T</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">PartialOrd</span><span>&gt;(</span><span style="color:#f29718;">n1</span><span style="color:#bfbab0cc;">:</span><span> T, </span><span style="color:#f29718;">n2</span><span style="color:#bfbab0cc;">:</span><span> T) </span><span style="color:#bfbab0cc;">-&gt;</span><span> T {
</span><span>    </span><span style="color:#ff7733;">if</span><span> n1 </span><span style="color:#f29668;">&gt;</span><span> n2 {
</span><span>        n1
</span><span>    } </span><span style="color:#ff7733;">else </span><span>{
</span><span>        n2
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;biggest is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">get_biggest</span><span>(</span><span style="color:#f29718;">23</span><span style="color:#ff7733;">u8</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">121</span><span style="color:#ff7733;">u8</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;biggest is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">get_biggest</span><span>(</span><span style="color:#f29718;">12345</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">121</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;biggest is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">get_biggest</span><span>(</span><span style="color:#f29718;">123.45</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1.21</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>biggest is 121
</span><span>biggest is 12345
</span><span>biggest is 123.45
</span></code></pre>
<h2 id="tip-dannykh-box">Тип данных Box</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// Box&lt;T&gt; used to store data on the heap instead of the stack
</span><span style="font-style:italic;color:#5c6773;">// it consists of a pointer on the stack
</span><span style="font-style:italic;color:#5c6773;">// which points to a memory chunk on the heap
</span><span style="font-style:italic;color:#5c6773;">// that has been allocated large enough to hold&lt;T&gt; data
</span><span style="font-style:italic;color:#5c6773;">// Boxes are considered smart pointers
</span><span style="font-style:italic;color:#5c6773;">// provide more functionality than references:
</span><span style="font-style:italic;color:#5c6773;">// Box&lt;T&gt; has ownership of the data it points to
</span><span style="font-style:italic;color:#5c6773;">// Box&lt;T&gt; deallocates the heap memory when it goes out of scope
</span><span style="font-style:italic;color:#5c6773;">// Box data type is used to store a type whose size cannot be known at compile time
</span><span style="font-style:italic;color:#5c6773;">// but a size is still required
</span><span style="font-style:italic;color:#5c6773;">// ex: recursive types
</span><span style="font-style:italic;color:#5c6773;">// ex of recursive type: a struct which includes another struct of the same type as one of its fields (think about Iterators - like in JavaScript)
</span><span style="font-style:italic;color:#5c6773;">// you don&#39;t know the depth of layers at compile time and therefore not know the size of the overall structure
</span><span style="font-style:italic;color:#5c6773;">// another use case for boxes is to transfer ownership of data rather copying it on the stack
</span><span style="font-style:italic;color:#5c6773;">// to avoid copying large amounts of stack data
</span><span style="font-style:italic;color:#5c6773;">// potential performance improvement by moving data to heap where can be more easily transferred (because of pointers)
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>mem</span><span style="color:#bfbab0cc;">;
</span><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">derive</span><span>(Debug)]
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Team </span><span>{
</span><span>    name</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    size</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u8</span><span>,
</span><span>    capacity</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64</span><span>,
</span><span>    domain</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// remember the struct lives on the stack
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// except for mutable-length fields (ex: String) that leave on the heap
</span><span>    </span><span style="color:#ff7733;">let</span><span> lions </span><span style="color:#f29668;">=</span><span> Team {
</span><span>        name</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;The lions&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        size</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">7</span><span style="color:#bfbab0cc;">,
</span><span>        capacity</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">11.5</span><span style="color:#bfbab0cc;">,
</span><span>        domain</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Authentication&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;lions is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> lions)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// mem::size_of_val() gives the size in byte of what the given reference points to
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>      </span><span style="color:#c2d94c;">&quot;lions size is on stack </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> bytes&quot;</span><span style="color:#bfbab0cc;">, 
</span><span>      mem</span><span style="color:#f29668;">::</span><span>size_of_val(</span><span style="color:#f29668;">&amp;</span><span>lions)
</span><span>    )</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// this is not a copy operation, ownership is moved
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the lions variable looses ownership of the struct
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the lions variable can no longer be used
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the struct instance is transferred to to heap location allocated by the box
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the boxed_lions variable becomes the new owner of the struct
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// through the box smart pointer that lives on the stack
</span><span>    </span><span style="color:#ff7733;">let</span><span> boxed_lions</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Box</span><span>&lt;Team&gt; </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(lions)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;boxed_lions is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> boxed_lions)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// printing size in bytes of the box pointer
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>        </span><span style="color:#c2d94c;">&quot;boxed_lions size is on stack </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> bytes&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        mem</span><span style="color:#f29668;">::</span><span>size_of_val(</span><span style="color:#f29668;">&amp;</span><span>boxed_lions)
</span><span>    )</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// printing size in byte of the struct instance
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// need to pass a reference to the dereferenced box pointer (WTF...) to mem::size_of_val()
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// using the dereference operator &quot;*&quot; before the box pointer
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// referencing a pointer will represent the pointed-to location / data:
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// &amp;*boxed_lions is a reference to the data on the heap rather than the pointer on the stack
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>        </span><span style="color:#c2d94c;">&quot;boxed_lions team size is on heap </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> bytes&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        mem</span><span style="color:#f29668;">::</span><span>size_of_val(</span><span style="color:#f29668;">&amp;*</span><span>boxed_lions)
</span><span>    )</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// moving back the struct instance on the stack
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// by dereferencing the box pointer
</span><span>    </span><span style="color:#ff7733;">let</span><span> unboxed_lions</span><span style="color:#bfbab0cc;">:</span><span> Team </span><span style="color:#f29668;">= *</span><span>boxed_lions</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;unboxed_lions is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> unboxed_lions)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>        </span><span style="color:#c2d94c;">&quot;unboxed_lions team size is on stack </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> bytes&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        mem</span><span style="color:#f29668;">::</span><span>size_of_val(</span><span style="color:#f29668;">&amp;</span><span>unboxed_lions)
</span><span>    )</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>lions is Team { name: &quot;The lions&quot;, size: 7, capacity: 11.5, domain: &quot;Authentication&quot; }
</span><span>lions size is on stack 64 bytes
</span><span>boxed_lions is Team { name: &quot;The lions&quot;, size: 7, capacity: 11.5, domain: &quot;Authentication&quot; }
</span><span>boxed_lions size is on stack 8 bytes
</span><span>boxed_lions team size is on heap 64 bytes
</span><span>unboxed_lions is Team { name: &quot;The lions&quot;, size: 7, capacity: 11.5, domain: &quot;Authentication&quot; }
</span><span>unboxed_lions team size is on stack 64 bytes
</span></code></pre>
<h2 id="summiruem-boxes">Суммируем boxes</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>ops</span><span style="color:#f29668;">::</span><span>Add</span><span style="color:#bfbab0cc;">;
</span><span style="font-style:italic;color:#5c6773;">// restrict generic type T to concrete types that implement the Add trait (like u32, f64, etc.)
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">sum_boxes</span><span>&lt;T</span><span style="color:#bfbab0cc;">: </span><span>Add&lt;Output = T&gt;&gt;(</span><span style="color:#f29718;">b1</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Box</span><span>&lt;T&gt;, </span><span style="color:#f29718;">b2</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Box</span><span>&lt;T&gt;) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="font-style:italic;color:#39bae6;">Box</span><span>&lt;T&gt; {
</span><span>    </span><span style="color:#ff7733;">let</span><span> unboxed_b1 </span><span style="color:#f29668;">= *</span><span>b1</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> unboxed_b2 </span><span style="color:#f29668;">= *</span><span>b2</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> sum </span><span style="color:#f29668;">=</span><span> unboxed_b1 </span><span style="color:#f29668;">+</span><span> unboxed_b2</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(sum)
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> box1 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">11</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box2 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">44</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> sum_box </span><span style="color:#f29668;">= </span><span style="color:#f07178;">sum_boxes</span><span>(box1</span><span style="color:#bfbab0cc;">,</span><span> box2)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span>sum_box</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">55</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box1 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">1.1</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box2 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">4.4</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> sum_box </span><span style="color:#f29668;">= </span><span style="color:#f07178;">sum_boxes</span><span>(box1</span><span style="color:#bfbab0cc;">,</span><span> box2)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span>sum_box</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">5.5</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box1 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">1.1</span><span style="color:#ff7733;">f32</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box2 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">4.4</span><span style="color:#ff7733;">f32</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> sum_box </span><span style="color:#f29668;">= </span><span style="color:#f07178;">sum_boxes</span><span>(box1</span><span style="color:#bfbab0cc;">,</span><span> box2)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span>sum_box</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">5.5</span><span style="color:#ff7733;">f32</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box1 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">11</span><span style="color:#ff7733;">u8</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box2 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">44</span><span style="color:#ff7733;">u8</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> sum_box </span><span style="color:#f29668;">= </span><span style="color:#f07178;">sum_boxes</span><span>(box1</span><span style="color:#bfbab0cc;">,</span><span> box2)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span>sum_box</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">55</span><span style="color:#ff7733;">u8</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box1 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">11</span><span style="color:#ff7733;">u16</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box2 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">44</span><span style="color:#ff7733;">u16</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> sum_box </span><span style="color:#f29668;">= </span><span style="color:#f07178;">sum_boxes</span><span>(box1</span><span style="color:#bfbab0cc;">,</span><span> box2)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span>sum_box</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">55</span><span style="color:#ff7733;">u16</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;tests passed!&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>test passed!
</span></code></pre>
<h2 id="kompaktnaia-versiia">Компактная версия</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>ops</span><span style="color:#f29668;">::</span><span>Add</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">sum_boxes</span><span>&lt;T</span><span style="color:#bfbab0cc;">: </span><span>Add&lt;Output = T&gt;&gt;(</span><span style="color:#f29718;">b1</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Box</span><span>&lt;T&gt;, </span><span style="color:#f29718;">b2</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Box</span><span>&lt;T&gt;) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="font-style:italic;color:#39bae6;">Box</span><span>&lt;T&gt; {
</span><span>    </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29668;">*</span><span>b1 </span><span style="color:#f29668;">+ *</span><span>b2)
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span style="color:#f07178;">sum_boxes</span><span>(</span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">11</span><span>)</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">44</span><span>))</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">55</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span style="color:#f07178;">sum_boxes</span><span>(</span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">1.1</span><span>)</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">4.4</span><span>))</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">5.5</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span style="color:#f07178;">sum_boxes</span><span>(</span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">1.1</span><span style="color:#ff7733;">f32</span><span>)</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">4.4</span><span style="color:#ff7733;">f32</span><span>))</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">5.5</span><span style="color:#ff7733;">f32</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span style="color:#f07178;">sum_boxes</span><span>(</span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">11</span><span style="color:#ff7733;">u8</span><span>)</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">44</span><span style="color:#ff7733;">u8</span><span>))</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">55</span><span style="color:#ff7733;">u8</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span style="color:#f07178;">sum_boxes</span><span>(</span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">11</span><span style="color:#ff7733;">u16</span><span>)</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">44</span><span style="color:#ff7733;">u16</span><span>))</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">55</span><span style="color:#ff7733;">u16</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;tests passed!&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Более сложное ограничение универсального типа </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>ops</span><span style="color:#f29668;">::</span><span>{Add</span><span style="color:#bfbab0cc;">,</span><span> MulAssign}</span><span style="color:#bfbab0cc;">;
</span><span style="font-style:italic;color:#5c6773;">// remove the Copy trait restriction and see what happens
</span><span style="font-style:italic;color:#5c6773;">// more on this later
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">sum_boxes</span><span>&lt;T</span><span style="color:#bfbab0cc;">: </span><span>Add&lt;Output = T&gt; </span><span style="color:#f29668;">+</span><span> MulAssign </span><span style="color:#f29668;">+ </span><span style="font-style:italic;color:#39bae6;">Copy</span><span>&gt;(
</span><span>    </span><span style="color:#ff7733;">mut </span><span style="color:#f29718;">b1</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Box</span><span>&lt;T&gt;, 
</span><span>    </span><span style="color:#f29718;">b2</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Box</span><span>&lt;T&gt;
</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="font-style:italic;color:#39bae6;">Box</span><span>&lt;T&gt; {
</span><span>    </span><span style="color:#f29668;">*</span><span>b1 </span><span style="color:#f29668;">*= *</span><span>b2</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29668;">*</span><span>b1 </span><span style="color:#f29668;">+ *</span><span>b2)
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> box1 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">11</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box2 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">44</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span style="color:#f07178;">sum_boxes</span><span>(box1</span><span style="color:#bfbab0cc;">,</span><span> box2)</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">528</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box1 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">1.1</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box2 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">4.4</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span style="color:#f07178;">sum_boxes</span><span>(box1</span><span style="color:#bfbab0cc;">,</span><span> box2)</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">9.240000000000002</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box1 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">1.1</span><span style="color:#ff7733;">f32</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box2 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">4.4</span><span style="color:#ff7733;">f32</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span style="color:#f07178;">sum_boxes</span><span>(box1</span><span style="color:#bfbab0cc;">,</span><span> box2)</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">9.24</span><span style="color:#ff7733;">f32</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box1 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">11</span><span style="color:#ff7733;">u16</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> box2 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">44</span><span style="color:#ff7733;">u16</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">assert_eq!</span><span>(</span><span style="color:#f29668;">*</span><span style="color:#f07178;">sum_boxes</span><span>(box1</span><span style="color:#bfbab0cc;">,</span><span> box2)</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">528</span><span style="color:#ff7733;">u16</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;tests passed!&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<h2 id="treity">Трэйты</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// trait;
</span><span style="font-style:italic;color:#5c6773;">// abstract way to define capabilities for functionality of specific data types
</span><span style="font-style:italic;color:#5c6773;">// collection of methods
</span><span style="font-style:italic;color:#5c6773;">// representing a set of behaviors necessary to accomplish some task
</span><span style="font-style:italic;color:#5c6773;">// data types can implement a trait:
</span><span style="font-style:italic;color:#5c6773;">// the type implements those specific methods so they&#39;ll be available for use with it
</span><span style="font-style:italic;color:#5c6773;">// generics use traits to specify the capabilities of unknown data types:
</span><span style="font-style:italic;color:#5c6773;">// the trait act as a bound for which concrete types will be accepted
</span><span style="font-style:italic;color:#5c6773;">// as long as these concrete types implement the set of methods
</span><span style="font-style:italic;color:#5c6773;">// similar to interfaces in TypeScript and other languages supporting classical OOP
</span><span style="font-style:italic;color:#5c6773;">// Rust comes with default common traits (see the std::prelude)
</span><span style="font-style:italic;color:#5c6773;">// you can define your custom traits
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Car </span><span>{
</span><span>    model</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    brand</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u16</span><span>, </span><span style="font-style:italic;color:#5c6773;">// km/h
</span><span>}
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Plane </span><span>{
</span><span>    name</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    nick_name</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u16</span><span>, </span><span style="font-style:italic;color:#5c6773;">// km/h
</span><span>    crew</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u8</span><span>,
</span><span>    passengers</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u16</span><span>,
</span><span>    ceiling</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u32</span><span>,
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// custom trait
</span><span style="color:#ff7733;">trait </span><span style="color:#59c2ff;">Serialization </span><span>{
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// method signatures
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">describe</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt;</span><span> String</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// implementing trait for a specific type
</span><span style="color:#ff7733;">impl </span><span>Serialization </span><span style="color:#ff7733;">for </span><span style="color:#59c2ff;">Car </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">describe</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt;</span><span> String {
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// format! macro returns formatted string
</span><span>        </span><span style="color:#f07178;">format!</span><span>(
</span><span>            </span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> from </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> going at </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> km/h.&quot;</span><span style="color:#bfbab0cc;">,
</span><span>            </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>model</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>brand</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>velocity
</span><span>        )
</span><span>    }
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// implementing trait for another type
</span><span style="color:#ff7733;">impl </span><span>Serialization </span><span style="color:#ff7733;">for </span><span style="color:#59c2ff;">Plane </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">describe</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt;</span><span> String {
</span><span>        </span><span style="color:#f07178;">format!</span><span>(
</span><span>            </span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> (</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">) going at </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> km/h with a crew of </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> and up to </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> passengers at </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> m above.&quot;</span><span style="color:#bfbab0cc;">,
</span><span>            </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>name</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>nick_name</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>velocity</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>crew</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>passengers</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>ceiling
</span><span>        )
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> gle_class_coupe </span><span style="color:#f29668;">=</span><span> Car {
</span><span>        model</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;GLE-Class Coupe&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        brand</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Mercedes-Benz&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">280</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> g6 </span><span style="color:#f29668;">=</span><span> Plane {
</span><span>        name</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Gulfstream G650 &quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        nick_name</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;G6&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">956</span><span style="color:#bfbab0cc;">,
</span><span>        crew</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">4</span><span style="color:#bfbab0cc;">,
</span><span>        passengers</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">19</span><span style="color:#bfbab0cc;">,
</span><span>        ceiling</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">15545</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> gle_class_coupe</span><span style="color:#f29668;">.</span><span style="color:#f07178;">describe</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> g6</span><span style="color:#f29668;">.</span><span style="color:#f07178;">describe</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>GLE-Class Coupe from Mercedes-Benz going at 280 km/h.
</span><span>Gulfstream G650  (G6) going at 956 km/h with a crew of 4 and up to 19 passengers at 15545 m above.
</span></code></pre>
<h2 id="realizatsiia-treita-po-umolchaniiu">Реализация трэйта по умолчанию</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Car </span><span>{
</span><span>    model</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    brand</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u16</span><span>, </span><span style="font-style:italic;color:#5c6773;">// km/h
</span><span>}
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Plane </span><span>{
</span><span>    name</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    nick_name</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u16</span><span>, </span><span style="font-style:italic;color:#5c6773;">// km/h
</span><span>    crew</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u8</span><span>,
</span><span>    passengers</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u16</span><span>,
</span><span>    ceiling</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u32</span><span>,
</span><span>}
</span><span style="color:#ff7733;">trait </span><span style="color:#59c2ff;">Serialization </span><span>{
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// default trait implementation
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// to avoid having to implement it for each type that uses the trait
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">describe</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt;</span><span> String {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;some kind of vehicle.&quot;</span><span>)
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">impl </span><span>Serialization </span><span style="color:#ff7733;">for </span><span style="color:#59c2ff;">Car </span><span>{
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// specific trait implementation for Car structure
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// overriding the default implementation
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">describe</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt;</span><span> String {
</span><span>        </span><span style="color:#f07178;">format!</span><span>(
</span><span>            </span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> from </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> going at </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> km/h.&quot;</span><span style="color:#bfbab0cc;">,
</span><span>            </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>model</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>brand</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>velocity
</span><span>        )
</span><span>    }
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// will use the default trait implementation because no specific one
</span><span style="color:#ff7733;">impl </span><span>Serialization </span><span style="color:#ff7733;">for </span><span style="color:#59c2ff;">Plane </span><span>{}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> gle_class_coupe </span><span style="color:#f29668;">=</span><span> Car {
</span><span>        model</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;GLE-Class Coupe&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        brand</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Mercedes-Benz&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">280</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> g6 </span><span style="color:#f29668;">=</span><span> Plane {
</span><span>        name</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Gulfstream G650 &quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        nick_name</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;G6&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">956</span><span style="color:#bfbab0cc;">,
</span><span>        crew</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">4</span><span style="color:#bfbab0cc;">,
</span><span>        passengers</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">19</span><span style="color:#bfbab0cc;">,
</span><span>        ceiling</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">15545</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> gle_class_coupe</span><span style="color:#f29668;">.</span><span style="color:#f07178;">describe</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> g6</span><span style="color:#f29668;">.</span><span style="color:#f07178;">describe</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>GLE-Class Coupe from Mercedes-Benz going at 280 km/h.
</span><span>some kind of vehicle.
</span></code></pre>
<h2 id="proizvodnye-treity">Производные трэйты</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// by default new structs do not implement any trait
</span><span style="font-style:italic;color:#5c6773;">// you as the programmer give it the traits it needs
</span><span style="font-style:italic;color:#5c6773;">// derivable traits provide default implementations for common traits
</span><span style="font-style:italic;color:#5c6773;">// gives access to basic functionalities
</span><span style="font-style:italic;color:#5c6773;">// instead of having to implement custom traits
</span><span style="font-style:italic;color:#5c6773;">// when deriving traits,
</span><span style="font-style:italic;color:#5c6773;">// the compiler generates default code for the required methods
</span><span style="font-style:italic;color:#5c6773;">// derivable traits are (subject to change as the language evolves):
</span><span style="font-style:italic;color:#5c6773;">// Eq
</span><span style="font-style:italic;color:#5c6773;">// PartialEq
</span><span style="font-style:italic;color:#5c6773;">// Ord
</span><span style="font-style:italic;color:#5c6773;">// PartialOrd
</span><span style="font-style:italic;color:#5c6773;">// Clone
</span><span style="font-style:italic;color:#5c6773;">// Copy
</span><span style="font-style:italic;color:#5c6773;">// Hash
</span><span style="font-style:italic;color:#5c6773;">// Default - create empty instance of a data type
</span><span style="font-style:italic;color:#5c6773;">// Debug - provide formatted debug string
</span><span style="font-style:italic;color:#5c6773;">// to derivve traits:  #[ derive( trait_a, trait_b, ..) ]
</span><span style="font-style:italic;color:#5c6773;">// default implementation of PartialEq requires all fields of both structs to be equal to return true
</span><span style="font-style:italic;color:#5c6773;">// (check documentation  std::cmp::PartialEq)
</span><span style="font-style:italic;color:#5c6773;">// default implementation of PartialOrd compares the values of the fields,
</span><span style="font-style:italic;color:#5c6773;">// parses the fields in order of definition and
</span><span style="font-style:italic;color:#5c6773;">// once found a field that can be compared,
</span><span style="font-style:italic;color:#5c6773;">// will return result of comparison
</span><span style="font-style:italic;color:#5c6773;">// and not look at other fields (check documentation  std::cmp::PartialOrd)
</span><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">derive</span><span>(PartialEq</span><span style="color:#bfbab0cc;">,</span><span> PartialOrd</span><span style="color:#bfbab0cc;">,</span><span> Debug)]
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Car </span><span>{
</span><span>    model</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    brand</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u16</span><span>, </span><span style="font-style:italic;color:#5c6773;">// km/h
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> gle_class_coupe </span><span style="color:#f29668;">=</span><span> Car {
</span><span>        model</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;GLE-Class Coupe&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        brand</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Mercedes-Benz&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">280</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> gle_class </span><span style="color:#f29668;">=</span><span> Car {
</span><span>        model</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;GLE-Class&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        brand</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Mercedes-Benz&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">218</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// allowed because of derived PartialEq trait
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Are the cars equal: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> gle_class_coupe </span><span style="color:#f29668;">==</span><span> gle_class)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// allowed because of derived PartialOrd trait
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// here the name field is compared to assert which one is greater
</span><span>    </span><span style="color:#f07178;">println!</span><span>(
</span><span>        </span><span style="color:#c2d94c;">&quot;Is the coupe greater then the SUV: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        gle_class_coupe </span><span style="color:#f29668;">&gt;</span><span> gle_class
</span><span>    )</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// allowed because of derived Debug trait
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> gle_class)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Are the cars equal: false
</span><span>Is the coupe greater then the SUV: true
</span><span>Car { model: &quot;GLE-Class&quot;, brand: &quot;Mercedes-Benz&quot;, velocity: 218 }
</span></code></pre>
<h2 id="organicheniia-treitov">Органичения трейтов</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// when working with generics we can use traits
</span><span style="font-style:italic;color:#5c6773;">// in order to stipulate which functionalities the concrete types must implement
</span><span style="font-style:italic;color:#5c6773;">// trait bounds force a generic type to implement specific traits
</span><span style="font-style:italic;color:#5c6773;">// trait bounds guarantee a generic type will have the necessary behaviors
</span><span style="color:#ff7733;">use </span><span>core</span><span style="color:#f29668;">::</span><span>fmt</span><span style="color:#f29668;">::</span><span>Debug</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>any</span><span style="color:#bfbab0cc;">;
</span><span style="font-style:italic;color:#5c6773;">// To be able to print an item it must implement the Display trait
</span><span style="font-style:italic;color:#5c6773;">// but because not all type implement it, we will use the Debug trait
</span><span style="font-style:italic;color:#5c6773;">// which is more commonly implemented by default
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">print_type</span><span>&lt;T</span><span style="color:#bfbab0cc;">:</span><span> Debug&gt;(</span><span style="color:#f29718;">it</span><span style="color:#bfbab0cc;">:</span><span> T) {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// type_name() returns the name of a type as a string slice
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// by passing the type to the turbofish operator (::&lt;MY_TYPE&gt;)
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;"> is a </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> it</span><span style="color:#bfbab0cc;">, </span><span>any</span><span style="color:#f29668;">::</span><span>type_name</span><span style="color:#f29668;">::</span><span>&lt;T&gt;())</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">print_type</span><span>(</span><span style="color:#f29718;">1</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">print_type</span><span>(</span><span style="color:#f29718;">1.2</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">print_type</span><span>([</span><span style="color:#f29718;">12</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">34</span><span>])</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>1 is a i32
</span><span>1.2 is a f64
</span><span>[12, 34] is a [i32; 2]
</span></code></pre>
<h2 id="mnozhestvennye-granitsy-treitov-i-predlozhenie-where">Множественные границы трейтов и предложение where</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fmt</span><span style="color:#f29668;">::</span><span>Display</span><span style="color:#bfbab0cc;">;
</span><span style="font-style:italic;color:#5c6773;">// multiple trait bounds are separated by a + operator
</span><span style="font-style:italic;color:#5c6773;">// PartialEq/From/Copy are part of the prelude of the std library so no import
</span><span style="font-style:italic;color:#5c6773;">// fn compare_and_print&lt;T: Display + PartialEq + From&lt;U&gt;, U: Display + PartialEq + Copy&gt;(a: T, b: U) {
</span><span style="font-style:italic;color:#5c6773;">// the below function signature is equivalent to the above 
</span><span style="font-style:italic;color:#5c6773;">// but more readable with the were clause to declare trait bounds
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">compare_and_print</span><span>&lt;T, U&gt;(</span><span style="color:#f29718;">a</span><span style="color:#bfbab0cc;">:</span><span> T, </span><span style="color:#f29718;">b</span><span style="color:#bfbab0cc;">:</span><span> U)
</span><span style="color:#ff7733;">where
</span><span>    T</span><span style="color:#bfbab0cc;">:</span><span> Display + PartialEq + </span><span style="font-style:italic;color:#39bae6;">From</span><span>&lt;U&gt;,
</span><span>    U</span><span style="color:#bfbab0cc;">:</span><span> Display + PartialEq + Copy,
</span><span>{
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// T::from(b) =&gt; convert b to type T
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// From trait allows for a type 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// to define how to create itself from another type.
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// ex: creating a string from string slice
</span><span>    </span><span style="font-style:italic;color:#5c6773;">//      String::From(&quot;ttoto&quot;)
</span><span>    </span><span style="color:#ff7733;">if</span><span> a </span><span style="color:#f29668;">== </span><span>T</span><span style="color:#f29668;">::</span><span>from(b) {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> is equal to </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a</span><span style="color:#bfbab0cc;">,</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    } </span><span style="color:#ff7733;">else </span><span>{
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> is not equal to </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a</span><span style="color:#bfbab0cc;">,</span><span> b)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">compare_and_print</span><span>(</span><span style="color:#f29718;">22</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">55</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">compare_and_print</span><span>(</span><span style="color:#f29718;">2.2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">2.2</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>22 is not equal to 55
</span><span>2.2 is equal to 2.2
</span></code></pre>
<h2 id="tipy-vozvrashchaemykh-dannykh-i-realizovannye-treity">Типы возвращаемых данных и реализованные трейты</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fmt</span><span style="color:#f29668;">::</span><span>Display</span><span style="color:#bfbab0cc;">;
</span><span style="font-style:italic;color:#5c6773;">// the return value must implement the Display trait
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_displayable</span><span>() </span><span style="color:#bfbab0cc;">-&gt;</span><span> impl Display {
</span><span>    </span><span style="color:#f29718;">1
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Display: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">get_displayable</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Display: 1
</span></code></pre>
<h2 id="tipy-vozvrata-i-dinamicheskaia-dispetcherizatsiia-s-treitami">Типы возврата и динамическая диспетчеризация с трэйтами</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fmt</span><span style="color:#f29668;">::</span><span>Display</span><span style="color:#bfbab0cc;">;
</span><span style="font-style:italic;color:#5c6773;">// dynamic dispatch
</span><span style="font-style:italic;color:#5c6773;">// when the retun type cannot be known until runtime
</span><span style="font-style:italic;color:#5c6773;">// notice the dyn keyword and the use of a Box pointers
</span><span style="font-style:italic;color:#5c6773;">// Returns a value that implements the Display trait, 
</span><span style="font-style:italic;color:#5c6773;">// but we do not know which one at compile time.
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_dynamic_displayable</span><span>(</span><span style="color:#f29718;">a</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">bool</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="font-style:italic;color:#39bae6;">Box</span><span>&lt;dyn Display&gt; {
</span><span>    </span><span style="color:#ff7733;">if</span><span> a {
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// returns u32
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#f29718;">1</span><span>)
</span><span>    } </span><span style="color:#ff7733;">else </span><span>{
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// returns string slice
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Box</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#c2d94c;">&quot;one&quot;</span><span>)
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Display: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f07178;">get_dynamic_displayable</span><span>(</span><span style="color:#f29718;">false</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Display: one
</span></code></pre>
<h2 id="sravnenie-reaktivnykh-samoletov">Сравнение реактивных самолетов</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>cmp</span><span style="color:#f29668;">::*</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fmt</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Jet </span><span>{
</span><span>    name</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">f64</span><span>, </span><span style="font-style:italic;color:#5c6773;">// km/h
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// custom implementation of the Display trait
</span><span style="color:#ff7733;">impl </span><span>fmt</span><span style="color:#f29668;">::</span><span>Display </span><span style="color:#ff7733;">for </span><span style="color:#59c2ff;">Jet </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">fmt</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>, </span><span style="color:#f29718;">f</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut </span><span>fmt</span><span style="color:#f29668;">::</span><span>Formatter&lt;&#39;</span><span style="color:#f29668;">_</span><span>&gt;) </span><span style="color:#bfbab0cc;">-&gt; </span><span>fmt</span><span style="color:#f29668;">::</span><span>Result {
</span><span>        </span><span style="color:#f07178;">write!</span><span>(f, </span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">, flying at </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> km/h&quot;</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>name</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>velocity)
</span><span>    }
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// custom implementation of the PartialOrd trait
</span><span style="color:#ff7733;">impl </span><span>PartialOrd </span><span style="color:#ff7733;">for </span><span style="color:#59c2ff;">Jet </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">partial_cmp</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>, </span><span style="color:#f29718;">other</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">Self</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="font-style:italic;color:#39bae6;">Option</span><span>&lt;Ordering&gt; {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>velocity</span><span style="color:#f29668;">.</span><span style="color:#f07178;">partial_cmp</span><span>(</span><span style="color:#f29668;">&amp;</span><span>other</span><span style="color:#f29668;">.</span><span>velocity)
</span><span>    }
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// custom implementation of the PartialEq trait
</span><span style="color:#ff7733;">impl </span><span>PartialEq </span><span style="color:#ff7733;">for </span><span style="color:#59c2ff;">Jet </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">eq</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>, </span><span style="color:#f29718;">other</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">Self</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#ff7733;">bool </span><span>{
</span><span>        </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>velocity </span><span style="color:#f29668;">==</span><span> other</span><span style="color:#f29668;">.</span><span>velocity
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> g6 </span><span style="color:#f29668;">=</span><span> Jet {
</span><span>        name</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Gulfstream G650&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">956.0</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> g7 </span><span style="color:#f29668;">=</span><span> Jet {
</span><span>        name</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Gulfstream G700&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        velocity</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29718;">937.0</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;G6 jet is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> g6)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Does G6 velocity equal to G7&#39;s: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> g6</span><span style="color:#f29668;">.</span><span style="color:#f07178;">eq</span><span>(</span><span style="color:#f29668;">&amp;</span><span>g7))</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Is G6 faster than G7: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> g6</span><span style="color:#f29668;">.</span><span style="color:#f07178;">gt</span><span>(</span><span style="color:#f29668;">&amp;</span><span>g7))</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>G6 jet is Gulfstream G650, flying at 956 km/h
</span><span>Does G6 velocity equal to G7&#39;s: false
</span><span>Is G6 faster than G7: true
</span></code></pre>
<h2 id="proverki-zaimstvovaniia-borrow-checker">Проверки заимствования - Borrow checker</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// borrow checker
</span><span style="font-style:italic;color:#5c6773;">// compares scopes to determine whether all borrows are valid
</span><span style="font-style:italic;color:#5c6773;">// lifetime (how long it is alive) of variables annotated like &quot; &#39;a &quot;
</span><span style="font-style:italic;color:#5c6773;">// the lifetime of a variable is related to its scope
</span><span style="font-style:italic;color:#5c6773;">// Rust analyses the scope / lifetime of the values referenced by a variable
</span><span style="font-style:italic;color:#5c6773;">// using the borrow checker
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> fuel</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// ========= START lifetime (&#39;a) of fuel ==========
</span><span>    {        
</span><span>        </span><span style="color:#ff7733;">let</span><span> gasoil </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;gasoil&quot;</span><span>)</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// ===== START lifetime (&#39;b) of gasoil =======
</span><span>        fuel </span><span style="color:#f29668;">= &amp;</span><span>gasoil</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;fuel is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> fuel)</span><span style="color:#bfbab0cc;">;
</span><span>    } </span><span style="font-style:italic;color:#5c6773;">// ========= END lifetime of gasoil ================
</span><span>} </span><span style="font-style:italic;color:#5c6773;">// ========= END lifetime of fuel ================
</span></code></pre>
<p>Программа проверки заимствований обнаружила ошибку: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> fuel</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// ========= START &#39;a ================
</span><span>    {
</span><span>       
</span><span>        </span><span style="color:#ff7733;">let</span><span> gasoil </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;gasoil&quot;</span><span>)</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// ===== START &#39;b =====
</span><span>        fuel </span><span style="color:#f29668;">= &amp;</span><span>gasoil</span><span style="color:#bfbab0cc;">;
</span><span>    } </span><span style="font-style:italic;color:#5c6773;">// ========= END &#39;b ================
</span><span>    
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// fuel stores a borrowed reference to gasoil
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// gasoil lifetime is done
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// fuel contains a dangling reference, the program will not compile
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;fuel is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> fuel)</span><span style="color:#bfbab0cc;">;
</span><span>} </span><span style="font-style:italic;color:#5c6773;">// ========= END &#39;a ================
</span></code></pre>
<p>Исправление ошибки срока службы путем увеличения срока службы gasoil: </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> fuel</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// ========= START &#39;a ================
</span><span>    </span><span style="color:#ff7733;">let</span><span> gasoil </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;gasoil&quot;</span><span>)</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// ======= START &#39;b ========
</span><span>    {
</span><span>        fuel </span><span style="color:#f29668;">= &amp;</span><span>gasoil</span><span style="color:#bfbab0cc;">;
</span><span>    } 
</span><span>    
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;fuel is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> fuel)</span><span style="color:#bfbab0cc;">;
</span><span>} </span><span style="font-style:italic;color:#5c6773;">// ========= END &#39;a and &#39;b ================
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>fuel is gasoil
</span></code></pre>
<h2 id="annotatsiia-vremeni-zhizni">Аннотация времени жизни</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// defining a generic lifetime &#39;a
</span><span style="font-style:italic;color:#5c6773;">// explicitly defining a generic lifetime for parameters 
</span><span style="font-style:italic;color:#5c6773;">// is called lifetime annotation
</span><span style="font-style:italic;color:#5c6773;">// must begin with apostrophe (&#39;x)
</span><span style="font-style:italic;color:#5c6773;">// convention is to use a single lowercase letter (&#39;a, &#39;b, &#39;c)
</span><span style="font-style:italic;color:#5c6773;">// but you are free to name it whatever (&#39;a_lifetime, &#39;toto)
</span><span style="font-style:italic;color:#5c6773;">// pay attention to the lifetime annotation
</span><span style="font-style:italic;color:#5c6773;">// which follows the borrow operator followed by a space then the type
</span><span style="font-style:italic;color:#5c6773;">// in this example, by annotating the return type,
</span><span style="font-style:italic;color:#5c6773;">// we tell the compiler that the returned value has the same lifetime as the params
</span><span style="font-style:italic;color:#5c6773;">// in case there are different lifetimes,
</span><span style="font-style:italic;color:#5c6773;">// the compiler will take the smallest
</span><span style="font-style:italic;color:#5c6773;">// by annotating the lifetime of the parameters,
</span><span style="font-style:italic;color:#5c6773;">// we give the borrow checker the info to validate the returned reference
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_longest_name</span><span>&lt;</span><span style="color:#ff7733;">&#39;a</span><span>&gt;(</span><span style="color:#f29718;">x</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;a str</span><span>, </span><span style="color:#f29718;">y</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;a str</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;a str </span><span>{
</span><span>    </span><span style="color:#ff7733;">if</span><span> x</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() </span><span style="color:#f29668;">&gt;</span><span> y</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() {
</span><span>        x
</span><span>    } </span><span style="color:#ff7733;">else </span><span>{
</span><span>        y
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> result</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> name1 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Deep Space 9&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> name2 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Voyager&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    result </span><span style="color:#f29668;">= </span><span style="color:#f07178;">get_longest_name</span><span>(</span><span style="color:#f29668;">&amp;</span><span>name1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">&amp;</span><span>name2)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;result is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> result)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>result is Deep Space 9
</span></code></pre>
<h2 id="mnozhestvennye-annotatsii-vremeni-zhizni">Множественные аннотации времени жизни</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// notice here that although the return type has the same lifetime as one param
</span><span style="font-style:italic;color:#5c6773;">// we must annotate the other param with another lifetime
</span><span style="font-style:italic;color:#5c6773;">// even if never returned
</span><span style="font-style:italic;color:#5c6773;">// to avoid any confusion
</span><span style="font-style:italic;color:#5c6773;">// remember that here thhe code is simple
</span><span style="font-style:italic;color:#5c6773;">// but the input and the returned value could coming from a compiled library
</span><span style="font-style:italic;color:#5c6773;">// that the compiler does not have access to the source code
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_longest_name</span><span>&lt;</span><span style="color:#ff7733;">&#39;a</span><span>, </span><span style="color:#ff7733;">&#39;b</span><span>&gt;(</span><span style="color:#f29718;">x</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;a str</span><span>, </span><span style="color:#f29718;">y</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;b str</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;a str </span><span>{
</span><span>    </span><span style="color:#ff7733;">if</span><span> x</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() </span><span style="color:#f29668;">&gt;</span><span> y</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() {
</span><span>        x
</span><span>    } </span><span style="color:#ff7733;">else </span><span>{
</span><span>        x
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> result</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// START &#39;a
</span><span>    </span><span style="color:#ff7733;">let</span><span> name1 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Deep Space 9&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    {
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// START &#39;b
</span><span>        </span><span style="color:#ff7733;">let</span><span> name2 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Voyager&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        result </span><span style="color:#f29668;">= </span><span style="color:#f07178;">get_longest_name</span><span>(</span><span style="color:#f29668;">&amp;</span><span>name1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">&amp;</span><span>name2)</span><span style="color:#bfbab0cc;">;
</span><span>    } </span><span style="font-style:italic;color:#5c6773;">// END &#39;b
</span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;result is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> result)</span><span style="color:#bfbab0cc;">;
</span><span>} </span><span style="font-style:italic;color:#5c6773;">// END &#39;a
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>result is Deep Space 9
</span></code></pre>
<h2 id="pravila-iskliucheniia-vremeni-zhizni">Правила исключения времени жизни</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// lifetime elision rules
</span><span style="font-style:italic;color:#5c6773;">// set of rules for the compiler to analyze reference lifetimes
</span><span style="font-style:italic;color:#5c6773;">// describes situations that do not require explicit lifetime annotations
</span><span style="font-style:italic;color:#5c6773;">// if any ambiguity remains, explicit lifetime annotation will be required
</span><span style="font-style:italic;color:#5c6773;">// currently, 3 lifetime elision rules:
</span><span style="font-style:italic;color:#5c6773;">// #1
</span><span style="font-style:italic;color:#5c6773;">// each input parameter that is a reference is assigned its own lifetime
</span><span style="font-style:italic;color:#5c6773;">// fn get_first_word&lt;&#39;a&gt;(s: &amp;&#39;a str) -&gt; &amp;str {
</span><span style="font-style:italic;color:#5c6773;">// lifetimes only apply for parameters that are references,
</span><span style="font-style:italic;color:#5c6773;">// non-reference parameters don&#39;t need them
</span><span style="font-style:italic;color:#5c6773;">// fn get_first_word&lt;&#39;a&gt;(s: &amp;&#39;a str, t: i32) -&gt; &amp;str {
</span><span style="font-style:italic;color:#5c6773;">// fn get_first_word&lt;&#39;a, &#39;b&gt;(s: &amp;&#39;a str, t: &amp;&#39;b str) -&gt; &amp;str {
</span><span style="font-style:italic;color:#5c6773;">// fn get_first_word&lt;&#39;a, &#39;b, &#39;c&gt;(s: &amp;&#39;a str, t: &amp;&#39;b str, u: &amp;&#39;c str) -&gt; &amp;str {
</span><span style="font-style:italic;color:#5c6773;">// #2
</span><span style="font-style:italic;color:#5c6773;">// if there&#39;s only one input lifetime,
</span><span style="font-style:italic;color:#5c6773;">// assign it to all output lifetimes
</span><span style="font-style:italic;color:#5c6773;">// (the output lifetime must necessarily match one of the input lifetime)
</span><span style="font-style:italic;color:#5c6773;">// qualifies for elision thus lifetimes can be omitted:
</span><span style="font-style:italic;color:#5c6773;">// fn get_first_word&lt;&#39;a&gt;(s: &amp;&#39;a str) -&gt; &amp;&#39;a str {
</span><span style="font-style:italic;color:#5c6773;">// ==&gt;``fn get_first_word(s: &amp;str) -&gt; &amp;str {
</span><span style="font-style:italic;color:#5c6773;">// #3
</span><span style="font-style:italic;color:#5c6773;">// if there&#39;s a &amp;self or &amp;mut self input parameter,
</span><span style="font-style:italic;color:#5c6773;">// its lifetime will be assigned to all output lifetimes
</span><span style="font-style:italic;color:#5c6773;">// fn do_stuff(&amp;self, input: &amp;str) -&gt; &amp;str {
</span><span style="font-style:italic;color:#5c6773;">// rule #1 ==&gt; fn do_stuff&lt;&#39;a,&#39;b&gt;(&amp;&#39;a self, input: &amp;&#39;b str) -&gt; &amp;str {
</span><span style="font-style:italic;color:#5c6773;">// rule #3 ==&gt; fn do_stuff&lt;&#39;a,&#39;b&gt;(&amp;&#39;a self, input: &amp;&#39;b str) -&gt; &amp;&#39;a str {
</span><span style="font-style:italic;color:#5c6773;">// these elision rules are for the compiler
</span><span style="font-style:italic;color:#5c6773;">// but it&#39;s good to know when you can omit lifetimes
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> message </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Hi there&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> first_word </span><span style="color:#f29668;">= </span><span style="color:#f07178;">get_first_word</span><span>(</span><span style="color:#f29668;">&amp;</span><span>message)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;first_word is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> first_word)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_first_word</span><span>(</span><span style="color:#f29718;">s</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str </span><span>{
</span><span>    </span><span style="color:#ff7733;">let</span><span> bytes </span><span style="color:#f29668;">=</span><span> s</span><span style="color:#f29668;">.</span><span style="color:#f07178;">as_bytes</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for </span><span>(index</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">&amp;</span><span>item) </span><span style="color:#f29668;">in</span><span> bytes</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">enumerate</span><span>() {
</span><span>        </span><span style="color:#ff7733;">if</span><span> item </span><span style="color:#f29668;">== </span><span style="color:#ff7733;">b</span><span style="color:#c2d94c;">&#39; &#39; </span><span>{
</span><span>            </span><span style="color:#ff7733;">return </span><span style="color:#f29668;">&amp;</span><span>s[</span><span style="color:#f29668;">..</span><span>index]</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// found blank space
</span><span>        }
</span><span>    }
</span><span>    </span><span style="color:#f29668;">&amp;</span><span>s </span><span style="font-style:italic;color:#5c6773;">// no blank space found, input is a single word
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>first_word is Hi
</span></code></pre>
<h2 id="annotatsii-vremeni-zhizni-struktur">Аннотации времени жизни структур</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">Spaceship</span><span>&lt;</span><span style="color:#ff7733;">&#39;a</span><span>&gt; {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the struct has ownership of that string
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// when the struct goes out of scope,
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// that string data will be dropped and removed from the heap
</span><span>    name</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the struct does not own the data referenced by this field
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// there is ambiguity if the struct can still use that reference
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// need to add explicit lifetime annotation
</span><span>    nickname</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;a str</span><span>,
</span><span>}
</span><span style="font-style:italic;color:#5c6773;">// Annotate lifetimes to impl.
</span><span style="color:#ff7733;">impl</span><span>&lt;</span><span style="color:#ff7733;">&#39;a</span><span>, </span><span style="color:#ff7733;">&#39;b</span><span>&gt; </span><span style="color:#59c2ff;">Spaceship</span><span>&lt;</span><span style="color:#ff7733;">&#39;a</span><span>&gt; {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// because of lifetime elision rule #3,
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// no need for explicit lifetime annotation
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the output lifetimes will have the lifetime as the &amp;self parameter
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">send_transmission</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>, </span><span style="color:#f29718;">msg</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>, </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>) {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Transmitting message: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> msg)</span><span style="color:#bfbab0cc;">;
</span><span>        (</span><span style="color:#f29668;">&amp;</span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>name</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>nickname)
</span><span>    }
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// here, because the output lifetime is different from the &amp;self input lifetie,
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// need for explicit lifetime annotation
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">test_send_transmission</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;a </span><span style="color:#f29718;">self</span><span>, </span><span style="color:#f29718;">msg</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;b str</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;b str </span><span>{
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Transmitting message: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> msg)</span><span style="color:#bfbab0cc;">;
</span><span>        msg
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> saucer </span><span style="color:#f29668;">=</span><span> Spaceship {
</span><span>        name</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;TR95 MCC Enterprise 9&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>        nickname</span><span style="color:#bfbab0cc;">: </span><span style="color:#c2d94c;">&quot;TR95&quot;</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> sender </span><span style="color:#f29668;">=</span><span> saucer</span><span style="color:#f29668;">.</span><span style="color:#f07178;">send_transmission</span><span>(</span><span style="color:#c2d94c;">&quot;All aboard!&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;sender is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> sender</span><span style="color:#f29668;">.</span><span style="color:#f29718;">1</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> test_msg </span><span style="color:#f29668;">=</span><span> saucer</span><span style="color:#f29668;">.</span><span style="color:#f07178;">test_send_transmission</span><span>(</span><span style="color:#c2d94c;">&quot;this is a test&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;test_msg is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> test_msg)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Transmitting message: All aboard!
</span><span>sender is TR95
</span><span>Transmitting message: this is a test
</span><span>test_msg is this is a test
</span></code></pre>
<h2 id="staticheskoe-vremia-zhizni">Статическое время жизни</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// &#39;static lifetime
</span><span style="font-style:italic;color:#5c6773;">// indicates references available for the entire duration of the program
</span><span style="font-style:italic;color:#5c6773;">// example: a string literal is stored in the program binary
</span><span style="font-style:italic;color:#5c6773;">// so it never goes away
</span><span style="font-style:italic;color:#5c6773;">// the data is available from start to finish
</span><span style="font-style:italic;color:#5c6773;">// all string literals have a static lifetime:
</span><span style="font-style:italic;color:#5c6773;">//  let literal: &amp;&#39;static str = &quot;I am a string slice&quot;;
</span><span style="font-style:italic;color:#5c6773;">// will never become invalid and lives longer than other lifetimes
</span><span style="font-style:italic;color:#5c6773;">// &#39;static lifetime as a trait bound
</span><span style="font-style:italic;color:#5c6773;">// ensures the data type will only contain &#39;static elements
</span><span style="font-style:italic;color:#5c6773;">// so that the receiver can hold onto it 
</span><span style="font-style:italic;color:#5c6773;">// and use it as long as they want knowing it will never become invalid:
</span><span style="font-style:italic;color:#5c6773;">// &lt;T: Display + &#39;static&gt;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_toto</span><span>&lt;</span><span style="color:#ff7733;">&#39;a</span><span>&gt;() </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;a str </span><span>{
</span><span>    </span><span style="color:#c2d94c;">&quot;toto here&quot;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>  </span><span style="color:#ff7733;">let</span><span> toto</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">&#39;static str </span><span style="color:#f29668;">= </span><span style="color:#f07178;">get_toto</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>  </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;toto is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> toto)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>toto is toto here
</span></code></pre>
<h2 id="podrobnee-o-perechisleniiakh">Подробнее о перечислениях</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">derive</span><span>(Debug)]
</span><span style="color:#ff7733;">enum </span><span style="color:#59c2ff;">Shape </span><span>{
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// storing data in enum variants by declaring parameter types
</span><span>    Triangle(</span><span style="color:#ff7733;">f64</span><span style="color:#bfbab0cc;">, </span><span style="color:#ff7733;">f64</span><span style="color:#bfbab0cc;">, </span><span style="color:#ff7733;">f64</span><span>)</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#5c6773;">// sides a, b, c
</span><span>    Rectangle(</span><span style="color:#ff7733;">f64</span><span style="color:#bfbab0cc;">, </span><span style="color:#ff7733;">f64</span><span>)</span><span style="color:#bfbab0cc;">,     </span><span style="font-style:italic;color:#5c6773;">// width, height
</span><span>    Circle(</span><span style="color:#ff7733;">f64</span><span>)</span><span style="color:#bfbab0cc;">,             </span><span style="font-style:italic;color:#5c6773;">// radius
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> a_shape </span><span style="color:#f29668;">= </span><span>Shape</span><span style="color:#f29668;">::</span><span>Triangle(</span><span style="color:#f29718;">1.1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">2.2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">3.3</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a_shape is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a_shape)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> a_shape </span><span style="color:#f29668;">= </span><span>Shape</span><span style="color:#f29668;">::</span><span>Rectangle(</span><span style="color:#f29718;">1.3</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">5.7</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a_shape is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a_shape)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> a_shape </span><span style="color:#f29668;">= </span><span>Shape</span><span style="color:#f29668;">::</span><span>Circle(</span><span style="color:#f29718;">1.13</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a_shape is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a_shape)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// match operator
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// compares a value to a series of patterns 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// to determine which code to execute
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// similar to switch statements in other languages
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// match expression used to control flow of program
</span><span>    </span><span style="color:#ff7733;">match</span><span> a_shape {
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// enumerate all possible values
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// capture the stored data 
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// using a positional parameter name (a, b, c)
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// the logic to execute, when a match, is after the &quot; =&gt; &quot;
</span><span>        Shape</span><span style="color:#f29668;">::</span><span>Triangle(a</span><span style="color:#bfbab0cc;">,</span><span> b</span><span style="color:#bfbab0cc;">,</span><span> c) </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(
</span><span>            </span><span style="color:#c2d94c;">&quot;a_shape is a triangle with sides a = </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">, b = </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">, c = </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>            a</span><span style="color:#bfbab0cc;">,</span><span> b</span><span style="color:#bfbab0cc;">,</span><span> c
</span><span>        )</span><span style="color:#bfbab0cc;">,
</span><span>        Shape</span><span style="color:#f29668;">::</span><span>Rectangle(width</span><span style="color:#bfbab0cc;">,</span><span> height) </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(
</span><span>            </span><span style="color:#c2d94c;">&quot;a_shape is a rectangle with width = </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> and height = </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,
</span><span>            width</span><span style="color:#bfbab0cc;">,</span><span> height
</span><span>        )</span><span style="color:#bfbab0cc;">,
</span><span>        Shape</span><span style="color:#f29668;">::</span><span>Circle(radius) </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a_shape is a circle with radius </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> radius)</span><span style="color:#bfbab0cc;">,
</span><span>    }
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>a_shape is Triangle(1.1, 2.2, 3.3)
</span><span>a_shape is Rectangle(1.3, 5.7)
</span><span>a_shape is Circle(1.13)
</span><span>a_shape is a circle with radius 1.13
</span></code></pre>
<h2 id="sootvetstvie-shablonu-podstanovki">Соответствие шаблону подстановки</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> number </span><span style="color:#f29668;">= </span><span style="color:#f29718;">123</span><span style="color:#ff7733;">u8</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// match expression returning values based on case
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// match arms are evaluated sequentially from top to bottom
</span><span>   </span><span style="color:#ff7733;">let</span><span> result</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match</span><span> number {
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// match arm
</span><span>        </span><span style="color:#f29718;">0 </span><span style="color:#f29668;">=&gt; </span><span style="color:#c2d94c;">&quot;zero&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// match arm
</span><span>        </span><span style="color:#f29718;">1 </span><span style="color:#f29668;">=&gt; </span><span style="color:#c2d94c;">&quot;one&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// match arm
</span><span>        </span><span style="color:#f29718;">2 </span><span style="color:#f29668;">=&gt; </span><span style="color:#c2d94c;">&quot;two&quot;</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// wildcard pattern (default case)
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// represented by an underscore symbol (_)
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// should be used last, 
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// otherwise the following arms will not be evaluated.
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// useful when you don&#39;t want to define all possible match arms explicitly 
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// (or simply because there is a high or infinite number of possibilities)
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// notice the code block when more than one line
</span><span>        </span><span style="color:#f29668;">_ =&gt; </span><span>{
</span><span>            </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> did not match any arm&quot;</span><span style="color:#bfbab0cc;">,</span><span> number)</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#c2d94c;">&quot;unmatched&quot;
</span><span>        }
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;result is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> result)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>123 did not match any arm
</span><span>result is unmatched
</span></code></pre>
<h2 id="enum-metody">Enum методы</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">derive</span><span>(Debug)]
</span><span style="color:#ff7733;">enum </span><span style="color:#59c2ff;">Shape </span><span>{
</span><span>    Triangle(</span><span style="color:#ff7733;">f64</span><span style="color:#bfbab0cc;">, </span><span style="color:#ff7733;">f64</span><span style="color:#bfbab0cc;">, </span><span style="color:#ff7733;">f64</span><span>)</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#5c6773;">// sides a, b, c
</span><span>    Rectangle(</span><span style="color:#ff7733;">f64</span><span style="color:#bfbab0cc;">, </span><span style="color:#ff7733;">f64</span><span>)</span><span style="color:#bfbab0cc;">,     </span><span style="font-style:italic;color:#5c6773;">// width, height
</span><span>    Circle(</span><span style="color:#ff7733;">f64</span><span>)</span><span style="color:#bfbab0cc;">,             </span><span style="font-style:italic;color:#5c6773;">// radius
</span><span>}
</span><span style="color:#ff7733;">impl </span><span style="color:#59c2ff;">Shape </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">get_perimeter</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="color:#ff7733;">f64 </span><span>{
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// no need to dereference the self variable
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// the compiler will automatically reference/dereference patterns in match expressions
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// match *self {
</span><span>        </span><span style="color:#ff7733;">match </span><span style="font-style:italic;color:#39bae6;">self </span><span>{
</span><span>            Shape</span><span style="color:#f29668;">::</span><span>Rectangle(width</span><span style="color:#bfbab0cc;">,</span><span> height) </span><span style="color:#f29668;">=&gt; </span><span>(width </span><span style="color:#f29668;">+</span><span> height) </span><span style="color:#f29668;">* </span><span style="color:#f29718;">2.0</span><span style="color:#bfbab0cc;">,
</span><span>            Shape</span><span style="color:#f29668;">::</span><span>Triangle(a</span><span style="color:#bfbab0cc;">,</span><span> b</span><span style="color:#bfbab0cc;">,</span><span> c) </span><span style="color:#f29668;">=&gt;</span><span> a </span><span style="color:#f29668;">+</span><span> b </span><span style="color:#f29668;">+</span><span> c</span><span style="color:#bfbab0cc;">,
</span><span>            Shape</span><span style="color:#f29668;">::</span><span>Circle(radius) </span><span style="color:#f29668;">=&gt;</span><span> radius </span><span style="color:#f29668;">* </span><span style="color:#f29718;">2.0 </span><span style="color:#f29668;">* </span><span>std</span><span style="color:#f29668;">::</span><span>f64</span><span style="color:#f29668;">::</span><span>consts</span><span style="color:#f29668;">::</span><span style="color:#f29718;">PI</span><span style="color:#bfbab0cc;">,
</span><span>        }
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> a_shape </span><span style="color:#f29668;">= </span><span>Shape</span><span style="color:#f29668;">::</span><span>Triangle(</span><span style="color:#f29718;">1.1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">2.2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">3.3</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a_shape is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a_shape)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a_shape perimeter is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a_shape</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get_perimeter</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> a_shape </span><span style="color:#f29668;">= </span><span>Shape</span><span style="color:#f29668;">::</span><span>Rectangle(</span><span style="color:#f29718;">1.3</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">5.7</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a_shape is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a_shape)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a_shape perimeter is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a_shape</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get_perimeter</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> a_shape </span><span style="color:#f29668;">= </span><span>Shape</span><span style="color:#f29668;">::</span><span>Circle(</span><span style="color:#f29718;">1.13</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a_shape is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a_shape)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;a_shape perimeter is </span><span style="color:#f29718;">{:.2}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> a_shape</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get_perimeter</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>a_shape is Triangle(1.1, 2.2, 3.3)
</span><span>a_shape perimeter is 6.6
</span><span>a_shape is Rectangle(1.3, 5.7)
</span><span>a_shape perimeter is 14
</span><span>a_shape is Circle(1.13)
</span><span>a_shape perimeter is 7.10
</span></code></pre>
<h2 id="option-enum">Option<T> enum</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// in many languages,
</span><span style="font-style:italic;color:#5c6773;">//  errors occur when using a null value in a not-null context
</span><span style="font-style:italic;color:#5c6773;">// Rust does not have a traditional null value
</span><span style="font-style:italic;color:#5c6773;">// instead Rust uses a generic enum named Option
</span><span style="font-style:italic;color:#5c6773;">// which can be of two variants:
</span><span style="font-style:italic;color:#5c6773;">// enum Option&lt;T&gt; {
</span><span style="font-style:italic;color:#5c6773;">//   Some(T),
</span><span style="font-style:italic;color:#5c6773;">//   None
</span><span style="font-style:italic;color:#5c6773;">// }
</span><span style="font-style:italic;color:#5c6773;">// 1) Some: indicates that has a value
</span><span style="font-style:italic;color:#5c6773;">// 2) None : indicates that no value
</span><span style="font-style:italic;color:#5c6773;">// the Option enum is included in the prelude
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// instantiate an option enum
</span><span>    </span><span style="color:#ff7733;">let</span><span> someone</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Option</span><span>&lt;</span><span style="color:#ff7733;">i32</span><span>&gt; </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(</span><span style="color:#f29718;">1</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;someone is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> someone)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> something</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Option</span><span>&lt;</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>&gt; </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(</span><span style="color:#c2d94c;">&quot;thing&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;something is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> something)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> nothing</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Option</span><span>&lt;</span><span style="color:#ff7733;">i32</span><span>&gt; </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">None</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;nothing is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> nothing)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> countdown </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">4</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">3</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// use get() on slices to get an option enum holding
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// a reference to the value at the specified index
</span><span>    </span><span style="color:#ff7733;">let</span><span> item </span><span style="color:#f29668;">=</span><span> countdown</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get</span><span>(</span><span style="color:#f29718;">5</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;item is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> item)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> item </span><span style="color:#f29668;">=</span><span> countdown</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get</span><span>(</span><span style="color:#f29718;">0</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;item is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> item)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> item </span><span style="color:#f29668;">=</span><span> countdown</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get</span><span>(</span><span style="color:#f29718;">2</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> item </span><span style="color:#f29668;">=</span><span> item</span><span style="color:#f29668;">.</span><span style="color:#f07178;">unwrap_or</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">0</span><span>) </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;item is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> item)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> item </span><span style="color:#f29668;">=</span><span> countdown</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get</span><span>(</span><span style="color:#f29718;">20</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// unwrap_or(&amp;default_value): 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// if variant is Option::Some returns the stored data
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// if the variant is Option::None, the passed argument is used instead
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// notice that the argument is a reference
</span><span>    </span><span style="color:#ff7733;">let</span><span> item </span><span style="color:#f29668;">=</span><span> item</span><span style="color:#f29668;">.</span><span style="color:#f07178;">unwrap_or</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">0</span><span>) </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;item is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> item)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>someone is Some(1)
</span><span>something is Some(&quot;thing&quot;)
</span><span>nothing is None
</span><span>item is None
</span><span>item is Some(5)
</span><span>item is 4
</span><span>item is 1
</span></code></pre>
<h2 id="sootvetstvie-option">Соответствие Option<T></h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> countdown </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">4</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">3</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> item </span><span style="color:#f29668;">=</span><span> countdown</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get</span><span>(</span><span style="color:#f29718;">5</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;item is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> item)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> item </span><span style="color:#f29668;">=</span><span> countdown</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get</span><span>(</span><span style="color:#f29718;">0</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;item is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> item)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> item </span><span style="color:#f29668;">=</span><span> countdown</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get</span><span>(</span><span style="color:#f29718;">3</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// using match expression to return value
</span><span>    </span><span style="color:#ff7733;">let</span><span> item </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match</span><span> item {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(value) </span><span style="color:#f29668;">=&gt;</span><span> value </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#39bae6;">None </span><span style="color:#f29668;">=&gt; </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;item is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> item)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> item </span><span style="color:#f29668;">=</span><span> countdown</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get</span><span>(</span><span style="color:#f29718;">20</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> item </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match</span><span> item {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(value) </span><span style="color:#f29668;">=&gt;</span><span> value </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#39bae6;">None </span><span style="color:#f29668;">=&gt; </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;item is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> item)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>item is None
</span><span>item is Some(5)
</span><span>item is 3
</span><span>item is 0
</span></code></pre>
<h2 id="sootvetstvie-if-let">Соответствие if-let</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// if let syntax
</span><span style="font-style:italic;color:#5c6773;">// use when matching only one variant
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> number </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(</span><span style="color:#f29718;">1</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// notice the syntax:
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// if let PATTERN = VALUE {}
</span><span>    </span><span style="color:#ff7733;">if let </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(</span><span style="color:#f29718;">1</span><span>) </span><span style="color:#f29668;">=</span><span> number {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;You are the one&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>You are the one
</span></code></pre>
<h2 id="location-enum">Location enum</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fmt</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">enum </span><span style="color:#59c2ff;">Location </span><span>{
</span><span>    Unknown</span><span style="color:#bfbab0cc;">,
</span><span>    Anonymous</span><span style="color:#bfbab0cc;">,
</span><span>    Known(</span><span style="color:#ff7733;">f64</span><span style="color:#bfbab0cc;">, </span><span style="color:#ff7733;">f64</span><span>)</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#5c6773;">// latitude, longitude
</span><span>}
</span><span style="color:#ff7733;">impl </span><span>fmt</span><span style="color:#f29668;">::</span><span>Display </span><span style="color:#ff7733;">for </span><span style="color:#59c2ff;">Location </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">fmt</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>, </span><span style="color:#f29718;">f</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut </span><span>fmt</span><span style="color:#f29668;">::</span><span>Formatter&lt;&#39;</span><span style="color:#f29668;">_</span><span>&gt;) </span><span style="color:#bfbab0cc;">-&gt; </span><span>fmt</span><span style="color:#f29668;">::</span><span>Result {
</span><span>        </span><span style="color:#ff7733;">match </span><span style="font-style:italic;color:#39bae6;">self </span><span>{
</span><span>            Location</span><span style="color:#f29668;">::</span><span>Anonymous </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">write!</span><span>(f, </span><span style="color:#c2d94c;">&quot;Location is anonymous&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>            Location</span><span style="color:#f29668;">::</span><span>Unknown </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">write!</span><span>(f, </span><span style="color:#c2d94c;">&quot;Location is unknown&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>            Location</span><span style="color:#f29668;">::</span><span>Known(latitude</span><span style="color:#bfbab0cc;">,</span><span> longitude) </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>                </span><span style="color:#f07178;">write!</span><span>(f, </span><span style="color:#c2d94c;">&quot;latitude: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> longitude: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> latitude</span><span style="color:#bfbab0cc;">,</span><span> longitude)
</span><span>            }
</span><span>        }
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> address </span><span style="color:#f29668;">= </span><span>Location</span><span style="color:#f29668;">::</span><span>Anonymous</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;address is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> address)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> address </span><span style="color:#f29668;">= </span><span>Location</span><span style="color:#f29668;">::</span><span>Unknown</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;address is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> address)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> address </span><span style="color:#f29668;">= </span><span>Location</span><span style="color:#f29668;">::</span><span>Known(</span><span style="color:#f29718;">123.4</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">456.7</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;address is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> address)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>address is Location is anonymous
</span><span>address is Location is unknown
</span><span>address is latitude: 123.4 longitude: 456.7
</span></code></pre>
<h2 id="nevosstanovimye-oshibki">Невосстановимые ошибки</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// two types of runtime errors in Rust
</span><span style="font-style:italic;color:#5c6773;">// Recoverable (ex: file not found error)
</span><span style="font-style:italic;color:#5c6773;">// Unrecoverable (ex: index out of array bounds)
</span><span style="font-style:italic;color:#5c6773;">// most languages do not distinguish between these errors
</span><span style="font-style:italic;color:#5c6773;">// and use Exceptions to handle all of them
</span><span style="font-style:italic;color:#5c6773;">// Rust does not have traditional Exceptions:
</span><span style="font-style:italic;color:#5c6773;">// Rust uses the Result&lt;T, E&gt; enum type for recoverable errors
</span><span style="font-style:italic;color:#5c6773;">// Rust uses panics for unrecoverable errors
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// panic! macro
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// immediately terminates the program 
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// and provides feedback to caller of program
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// panic!(&quot;Something went wrong.&quot;);
</span><span>    </span><span style="color:#ff7733;">let</span><span> countdown</span><span style="color:#bfbab0cc;">: </span><span>[</span><span style="color:#ff7733;">i32</span><span style="color:#bfbab0cc;">; </span><span style="color:#f29718;">4</span><span>] </span><span style="color:#f29668;">= </span><span>[</span><span style="color:#f29718;">3</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for</span><span> left </span><span style="color:#f29668;">in</span><span> countdown</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>() {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;T-minus </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> left)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// the program will panic when diving by zero
</span><span>        </span><span style="color:#ff7733;">let</span><span> q </span><span style="color:#f29668;">= </span><span style="color:#f29718;">1 </span><span style="color:#f29668;">/</span><span> left</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;q is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> q)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>T-minus 3
</span><span>q is 0
</span><span>T-minus 2
</span><span>q is 0
</span><span>T-minus 1
</span><span>q is 1
</span><span>T-minus 0
</span><span>thread &#39;main&#39; panicked at &#39;attempt to divide by zero&#39;, /home/&lt;USER&gt;/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/ops/arith.rs:474:1
</span><span>note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</span></code></pre>
<h2 id="vosstanovimye-oshibki">Восстановимые ошибки</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// recoverable errors
</span><span style="font-style:italic;color:#5c6773;">// errors that do not cause the program to fail
</span><span style="font-style:italic;color:#5c6773;">// and can be corrected
</span><span style="font-style:italic;color:#5c6773;">// Rust uses the Result&lt;T,E&gt; enum type to handle recoverable errors
</span><span style="font-style:italic;color:#5c6773;">// enum Result&lt;T, E&gt; {
</span><span style="font-style:italic;color:#5c6773;">//     Ok(T),
</span><span style="font-style:italic;color:#5c6773;">//     Err(E),
</span><span style="font-style:italic;color:#5c6773;">// }
</span><span style="font-style:italic;color:#5c6773;">// the Ok variant stores the value of the successful operation
</span><span style="font-style:italic;color:#5c6773;">// the Err variant stores the value of the error
</span><span style="font-style:italic;color:#5c6773;">// the Result enum is included in the prelude
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fs</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>io</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// read_to_string() returns a Result&lt;T, E&gt; enum
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// create a file named file.txt in the root of the project folder:
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// $ echo 42 &gt; file.txt
</span><span>    </span><span style="color:#ff7733;">let</span><span> content</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Result</span><span>&lt;</span><span style="font-style:italic;color:#39bae6;">String</span><span>, io</span><span style="color:#f29668;">::</span><span>Error&gt; </span><span style="color:#f29668;">= </span><span>fs</span><span style="color:#f29668;">::</span><span>read_to_string(</span><span style="color:#c2d94c;">&quot;file.txt&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// avoid the unwrap() method
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// because will panic if this is the Err variant of the Result enum
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;content is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> content</span><span style="color:#f29668;">.</span><span style="color:#f07178;">unwrap</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// for custom error message, use expect()
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// not the best way to handle recoverable errors
</span><span>    </span><span style="color:#ff7733;">let</span><span> content</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Result</span><span>&lt;</span><span style="font-style:italic;color:#39bae6;">String</span><span>, io</span><span style="color:#f29668;">::</span><span>Error&gt; </span><span style="color:#f29668;">= </span><span>fs</span><span style="color:#f29668;">::</span><span>read_to_string(</span><span style="color:#c2d94c;">&quot;file-x.txt&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;content is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> content</span><span style="color:#f29668;">.</span><span style="color:#f07178;">expect</span><span>(</span><span style="color:#c2d94c;">&quot;failed reading file&quot;</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>content is &quot;42\n&quot;
</span><span>thread &#39;main&#39; panicked at &#39;failed reading file: Os { code: 2, kind: NotFound, message: &quot;No such file or directory&quot; }&#39;, src/main.rs:35:41
</span></code></pre>
<h2 id="matching-result-t-e-enum-dlia-obrabotki-oshibok">Matching Result&lt;T, E&gt;enum для обработки ошибок</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fs</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>io</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> result </span><span style="color:#f29668;">= </span><span>fs</span><span style="color:#f29668;">::</span><span>read_to_string(</span><span style="color:#c2d94c;">&quot;does-not-exist.txt&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> content </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match</span><span> result {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(text) </span><span style="color:#f29668;">=&gt;</span><span> text</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// handle I/O error based on kind
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(error) </span><span style="color:#f29668;">=&gt; </span><span style="color:#ff7733;">match</span><span> error</span><span style="color:#f29668;">.</span><span style="color:#f07178;">kind</span><span>() {
</span><span>            io</span><span style="color:#f29668;">::</span><span>ErrorKind</span><span style="color:#f29668;">::</span><span>NotFound </span><span style="color:#f29668;">=&gt; </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;File not found&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>            io</span><span style="color:#f29668;">::</span><span>ErrorKind</span><span style="color:#f29668;">::</span><span>PermissionDenied </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>              </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Permission denied&quot;</span><span>)
</span><span>            }</span><span style="color:#bfbab0cc;">,
</span><span>            </span><span style="color:#f29668;">_ =&gt;</span><span> error</span><span style="color:#f29668;">.</span><span style="color:#f07178;">to_string</span><span>()</span><span style="color:#bfbab0cc;">,
</span><span>        }</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;content is </span><span style="color:#95e6cb;">\&quot;</span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\&quot;</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> content)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>content is &quot;File not found&quot;
</span></code></pre>
<h2 id="rasprostranenie-oshibok">Распространение ошибок</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fs</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>io</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">read_and_combine</span><span>(</span><span style="color:#f29718;">f1</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>, </span><span style="color:#f29718;">f2</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>) </span><span style="color:#bfbab0cc;">-&gt; </span><span style="font-style:italic;color:#39bae6;">Result</span><span>&lt;</span><span style="font-style:italic;color:#39bae6;">String</span><span>, io</span><span style="color:#f29668;">::</span><span>Error&gt; {
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> s1 </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match </span><span>fs</span><span style="color:#f29668;">::</span><span>read_to_string(f1) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(s) </span><span style="color:#f29668;">=&gt;</span><span> s</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#5c6773;">// propagating the error to caller
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(e) </span><span style="color:#f29668;">=&gt; </span><span style="color:#ff7733;">return </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(e)</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// Rust provides a shorthand syntax for propagating errors
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// by removing the match expression
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// and putting a question mark (?) after the Result enum
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// it is equivalent to the above syntax
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// the ? can only be used with functions that return a Result enum
</span><span>    </span><span style="color:#ff7733;">let</span><span> s2 </span><span style="color:#f29668;">= </span><span>fs</span><span style="color:#f29668;">::</span><span>read_to_string(f2)</span><span style="color:#f29668;">?</span><span style="color:#bfbab0cc;">;
</span><span>    s1</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="color:#c2d94c;">&#39;</span><span style="color:#95e6cb;">\n</span><span style="color:#c2d94c;">&#39;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    s1</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push_str</span><span>(</span><span style="color:#f29668;">&amp;</span><span>s2)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(s1)
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">match </span><span style="color:#f07178;">read_and_combine</span><span>(</span><span style="color:#c2d94c;">&quot;file1.txt&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&quot;file2.txt&quot;</span><span>) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(text_result) </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;result is:</span><span style="color:#95e6cb;">\n</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> text_result)</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(e) </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Got error: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> e)</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Got error: No such file or directory (os error 2)
</span></code></pre>
<h2 id="vozvrashchenie-k-igre-v-ugadyvanie-s-obrabotkoi-oshibok">Возвращение к игре в угадывание с обработкой ошибок</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>rand</span><span style="color:#f29668;">::</span><span>prelude</span><span style="color:#f29668;">::*</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>io</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#f07178;">guess_with_infinite_retry</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">guess_with_infinite_retry</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let</span><span> secret_number </span><span style="color:#f29668;">= </span><span style="color:#f07178;">thread_rng</span><span>()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">gen_range</span><span>(</span><span style="color:#f29718;">1</span><span style="color:#f29668;">..</span><span style="color:#f29718;">101</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> invalid_numberretry_limit </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Guess a number between 1 and 100:&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">loop </span><span>{
</span><span>        </span><span style="color:#ff7733;">let mut</span><span> buffer </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">let</span><span> guess </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match </span><span>io</span><span style="color:#f29668;">::</span><span>stdin()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">read_line</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut</span><span> buffer) {
</span><span>            </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(</span><span style="color:#f29668;">_</span><span>) </span><span style="color:#f29668;">=&gt; </span><span style="color:#ff7733;">match</span><span> buffer</span><span style="color:#f29668;">.</span><span style="color:#f07178;">trim</span><span>()</span><span style="color:#f29668;">.</span><span>parse</span><span style="color:#f29668;">::</span><span>&lt;</span><span style="color:#ff7733;">u32</span><span>&gt;() {
</span><span>                </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(number) </span><span style="color:#f29668;">=&gt;</span><span> number</span><span style="color:#bfbab0cc;">,
</span><span>                </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(e) </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>                    invalid_numberretry_limit </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>                    </span><span style="color:#ff7733;">if</span><span> invalid_numberretry_limit </span><span style="color:#f29668;">== </span><span style="color:#f29718;">3 </span><span>{
</span><span>                        </span><span style="color:#f07178;">panic!</span><span>(</span><span style="color:#c2d94c;">&quot;Too many invalid numbers entered&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>                    }
</span><span>                    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to parse guess: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> e)</span><span style="color:#bfbab0cc;">;
</span><span>                    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Please enter a valid number:&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>                    </span><span style="color:#ff7733;">continue</span><span style="color:#bfbab0cc;">;
</span><span>                }
</span><span>            }</span><span style="color:#bfbab0cc;">,
</span><span>            </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(e) </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>                </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to read line: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> e)</span><span style="color:#bfbab0cc;">;
</span><span>                </span><span style="color:#ff7733;">continue</span><span style="color:#bfbab0cc;">;
</span><span>            }
</span><span>        }</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">if</span><span> guess </span><span style="color:#f29668;">&lt;</span><span> secret_number {
</span><span>            </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;guess too low, guess higher:&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        } </span><span style="color:#ff7733;">else if</span><span> guess </span><span style="color:#f29668;">&gt;</span><span> secret_number {
</span><span>            </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;guess too high, guess lower:&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        } </span><span style="color:#ff7733;">else </span><span>{
</span><span>            </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;you found it!&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>            </span><span style="color:#ff7733;">break</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Guess a number between 1 and 100:
</span><span>Failed to parse guess: cannot parse integer from empty string
</span><span>Please enter a valid number:
</span><span>Failed to parse guess: cannot parse integer from empty string
</span><span>Please enter a valid number:
</span><span>thread &#39;main&#39; panicked at &#39;Too many invalid numbers entered&#39;, src/main.rs:19:25
</span><span>note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</span></code></pre>
<p>Или</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Guess a number between 1 and 100:
</span><span>44
</span><span>guess too low, guess higher:
</span><span>77
</span><span>guess too low, guess higher:
</span><span>99
</span><span>guess too high, guess lower:
</span><span>88
</span><span>guess too high, guess lower:
</span><span>80
</span><span>you found it!
</span></code></pre>
<h2 id="vektory-s-obrabotkoi-oshibok">Векторы с обработкой ошибок</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// create an empty vector
</span><span>   </span><span style="color:#ff7733;">let mut</span><span> presidents</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Vec</span><span>&lt;</span><span style="font-style:italic;color:#39bae6;">String</span><span>&gt; </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Vec</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>    presidents</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Chirac&quot;</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>    presidents</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Sarkozy&quot;</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>    presidents</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Hollande&quot;</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>    presidents</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(</span><span style="font-style:italic;color:#39bae6;">String</span><span style="color:#f29668;">::</span><span>from(</span><span style="color:#c2d94c;">&quot;Macron&quot;</span><span>))</span><span style="color:#bfbab0cc;">;
</span><span>   </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;presidents are </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> presidents)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> last </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match</span><span> presidents</span><span style="color:#f29668;">.</span><span style="color:#f07178;">pop</span><span>() {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(president) </span><span style="color:#f29668;">=&gt;</span><span> president</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#39bae6;">None </span><span style="color:#f29668;">=&gt; </span><span style="color:#c2d94c;">&quot;not found&quot;</span><span style="color:#f29668;">.</span><span style="color:#f07178;">to_string</span><span>()</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;last is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> last)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> fourth </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match</span><span> presidents</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get</span><span>(</span><span style="color:#f29718;">3</span><span>) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(president) </span><span style="color:#f29668;">=&gt;</span><span> president</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#39bae6;">None </span><span style="color:#f29668;">=&gt; </span><span style="color:#c2d94c;">&quot;not found&quot;</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;fourth president is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> fourth)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// creating a vector with the vec![] macro
</span><span>    </span><span style="color:#ff7733;">let</span><span> countdown </span><span style="color:#f29668;">= </span><span style="color:#f07178;">vec!</span><span>[</span><span style="color:#f29718;">4</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">3</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span>]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;countdown is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> countdown)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>presidents are [&quot;Chirac&quot;, &quot;Sarkozy&quot;, &quot;Hollande&quot;, &quot;Macron&quot;]
</span><span>last is Macron
</span><span>fourth president is not found
</span><span>countdown is [4, 3, 2, 1]
</span></code></pre>
<h2 id="tip-dannykh-hashmap-k-v">Тип данных HashMap&lt;K, V&gt;</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="font-style:italic;color:#5c6773;">// stores data in key / value pairs
</span><span style="font-style:italic;color:#5c6773;">// use the keys to lookup corresponding values
</span><span style="font-style:italic;color:#5c6773;">// key -&gt; value mapping is one way
</span><span style="font-style:italic;color:#5c6773;">// Rust uses a hash function to determine how to store data
</span><span style="font-style:italic;color:#5c6773;">// keys and values can be different data types
</span><span style="font-style:italic;color:#5c6773;">// all keys must have the same type
</span><span style="font-style:italic;color:#5c6773;">// all values must have the same type
</span><span style="font-style:italic;color:#5c6773;">// each key can only have one value associated with it at a time
</span><span style="font-style:italic;color:#5c6773;">// you need to import the type
</span><span style="font-style:italic;color:#5c6773;">// updating hashmap entries, approaches:
</span><span style="font-style:italic;color:#5c6773;">// #1: overwrite existing key/value pair
</span><span style="font-style:italic;color:#5c6773;">// #2: insert a new entry if a key does not exist
</span><span style="font-style:italic;color:#5c6773;">// #3: modify a value based on its existing value
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>collections</span><span style="color:#f29668;">::</span><span>HashMap</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> missions </span><span style="color:#f29668;">= </span><span>HashMap</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>    missions</span><span style="color:#f29668;">.</span><span style="color:#f07178;">insert</span><span>(</span><span style="color:#c2d94c;">&quot;Toto&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">23</span><span>)</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// HashMap&lt;&amp;str, i32&gt;
</span><span>    missions</span><span style="color:#f29668;">.</span><span style="color:#f07178;">insert</span><span>(</span><span style="color:#c2d94c;">&quot;Toto&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">33</span><span>)</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// #1 update
</span><span>    missions</span><span style="color:#f29668;">.</span><span style="color:#f07178;">insert</span><span>(</span><span style="color:#c2d94c;">&quot;Titi&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">45</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    missions</span><span style="color:#f29668;">.</span><span style="color:#f07178;">insert</span><span>(</span><span style="color:#c2d94c;">&quot;Tata&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">67</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    missions</span><span style="color:#f29668;">.</span><span style="color:#f07178;">entry</span><span>(</span><span style="color:#c2d94c;">&quot;Tutu&quot;</span><span>)</span><span style="color:#f29668;">.</span><span style="color:#f07178;">or_insert</span><span>(</span><span style="color:#f29718;">77</span><span>)</span><span style="color:#bfbab0cc;">; </span><span style="font-style:italic;color:#5c6773;">// #2 update
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// #3 update
</span><span>    </span><span style="color:#ff7733;">let</span><span> tyty </span><span style="color:#f29668;">=</span><span> missions</span><span style="color:#f29668;">.</span><span style="color:#f07178;">entry</span><span>(</span><span style="color:#c2d94c;">&quot;Titi&quot;</span><span>)</span><span style="color:#f29668;">.</span><span style="color:#f07178;">or_insert</span><span>(</span><span style="color:#f29718;">0</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f29668;">*</span><span>tyty </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;missions is </span><span style="color:#f29718;">{:?}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> missions</span><span style="color:#f29668;">.</span><span style="color:#f07178;">clone</span><span>())</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> toto_missions </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match</span><span> missions</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get</span><span>(</span><span style="color:#c2d94c;">&quot;Toto&quot;</span><span>) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(value) </span><span style="color:#f29668;">=&gt;</span><span> value</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#39bae6;">None </span><span style="color:#f29668;">=&gt; &amp;</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Toto_missions is </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> toto_missions)</span><span style="color:#bfbab0cc;">;
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>missions is {&quot;Tata&quot;: 67, &quot;Titi&quot;: 46, &quot;Toto&quot;: 33, &quot;Tutu&quot;: 77}
</span><span>Toto_missions is 33
</span></code></pre>
<h2 id="schetchik-slov">Счетчик слов</h2>
<p>Создайте файл с именем «lorem.txt» со следующим содержимым: </p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis porta velit quis mattis bibendum. Fusce sed nulla eget arcu lacinia placerat ac eget dui. Nam a ante tellus. Aliquam varius tincidunt nisi a efficitur. Donec non malesuada odio. Donec vitae arcu eu magna efficitur pulvinar. Proin feugiat, erat et congue aliquet, ipsum turpis volutpat ante, a ullamcorper magna elit nec libero. Maecenas lacus magna, gravida id tristique at, lobortis sit amet libero.
</span><span>Donec vel nunc ac sapien tempus vehicula. Aenean vulputate quam eget felis elementum suscipit. Aliquam vehicula odio dui, id varius lectus gravida consequat. Maecenas sit amet dolor erat. Duis rhoncus mollis nulla. Etiam pellentesque arcu sed pretium fermentum. Phasellus metus velit, dapibus eu pellentesque eu, pulvinar eu nunc. In posuere massa non elementum varius. Donec et vehicula urna, id dignissim ex.
</span><span>Nunc vitae sem volutpat, malesuada odio vel, ornare arcu. Nunc dictum tincidunt turpis, sed tristique tellus hendrerit at. In ac tempor lacus. Pellentesque tempus velit eu pharetra consectetur. Integer ultricies sem sem, a tincidunt urna tempus quis. Nullam porttitor turpis ut lacus mollis dignissim nec vel ipsum. Integer volutpat quam et enim pellentesque, ut imperdiet nibh faucibus. Vestibulum varius, libero eget porta congue, enim risus porttitor lacus, at pretium mauris ligula sit amet ligula.
</span><span>Donec at pharetra elit. Sed nulla dui, consectetur sollicitudin magna a, consequat maximus erat. Maecenas ultricies libero orci, a cursus justo blandit non. Vivamus non fringilla ante. In cursus finibus elit quis cursus. Maecenas at arcu id ex consectetur eleifend. Aenean nec purus eget odio commodo ullamcorper. Integer maximus quis turpis id finibus. Etiam mi nunc, fringilla eget diam non, gravida blandit nisl. Curabitur finibus bibendum consequat. Nunc eleifend aliquam risus a iaculis.
</span><span>Nullam id lacus sem. Suspendisse a nunc facilisis, rutrum purus aliquet, pulvinar libero. Etiam ornare, enim at egestas varius, mi justo feugiat purus, eget congue nisi nibh vitae mauris. Integer malesuada, diam et placerat mollis, purus nulla molestie lacus, in egestas nisl lacus et odio. Fusce feugiat odio eget justo lacinia placerat. In rutrum et quam sed gravida. Vivamus vel blandit metus, sed imperdiet turpis. Sed facilisis ipsum ipsum, egestas mattis dolor tempus at. Morbi eu scelerisque ante.
</span></code></pre>
<p>Исходный код </p>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>collections</span><span style="color:#f29668;">::</span><span>HashMap</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>env</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fmt</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fs</span><span style="color:#bfbab0cc;">;
</span><span style="color:#bfbab0cc;">#</span><span>[</span><span style="color:#ffb454;">derive</span><span>(Debug)]
</span><span style="color:#ff7733;">struct </span><span style="color:#59c2ff;">MostCommonWord </span><span>{
</span><span>    value</span><span style="color:#bfbab0cc;">:</span><span> String,
</span><span>    occurrence</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u32</span><span>,
</span><span>}
</span><span style="color:#ff7733;">impl </span><span>fmt</span><span style="color:#f29668;">::</span><span>Display </span><span style="color:#ff7733;">for </span><span style="color:#59c2ff;">MostCommonWord </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">fmt</span><span>(</span><span style="color:#f29668;">&amp;</span><span style="color:#f29718;">self</span><span>, </span><span style="color:#f29718;">f</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">mut </span><span>fmt</span><span style="color:#f29668;">::</span><span>Formatter&lt;&#39;</span><span style="color:#f29668;">_</span><span>&gt;) </span><span style="color:#bfbab0cc;">-&gt; </span><span>fmt</span><span style="color:#f29668;">::</span><span>Result {
</span><span>        </span><span style="color:#f07178;">write!</span><span>(
</span><span>            f,
</span><span>            </span><span style="color:#c2d94c;">&quot;</span><span style="color:#95e6cb;">\&quot;</span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\&quot;</span><span style="color:#c2d94c;"> is the most common word with </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> occurrences&quot;</span><span style="color:#bfbab0cc;">,
</span><span>            </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>value</span><span style="color:#bfbab0cc;">, </span><span style="font-style:italic;color:#39bae6;">self</span><span style="color:#f29668;">.</span><span>occurrence
</span><span>        )
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">impl </span><span style="color:#59c2ff;">MostCommonWord </span><span>{
</span><span>    </span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">new</span><span>(</span><span style="color:#f29718;">value</span><span style="color:#bfbab0cc;">: </span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>, </span><span style="color:#f29718;">occurrence</span><span style="color:#bfbab0cc;">: </span><span style="color:#ff7733;">u32</span><span>) </span><span style="color:#bfbab0cc;">-&gt;</span><span> MostCommonWord {
</span><span>        MostCommonWord {
</span><span>            value</span><span style="color:#bfbab0cc;">:</span><span> value</span><span style="color:#f29668;">.</span><span style="color:#f07178;">to_string</span><span>()</span><span style="color:#bfbab0cc;">,
</span><span>            occurrence</span><span style="color:#bfbab0cc;">,
</span><span>        }
</span><span>    }
</span><span>}
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="color:#ff7733;">if </span><span>env</span><span style="color:#f29668;">::</span><span>args()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() </span><span style="color:#f29668;">!= </span><span style="color:#f29718;">2 </span><span>{
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;this program requires one argument&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">return</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="color:#ff7733;">let</span><span> filepath </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match </span><span>env</span><span style="color:#f29668;">::</span><span>args()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">nth</span><span>(</span><span style="color:#f29718;">1</span><span>) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(text) </span><span style="color:#f29668;">=&gt;</span><span> text</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#39bae6;">None </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">panic!</span><span>(</span><span style="color:#c2d94c;">&quot;Failed to get file path&quot;</span><span>)</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// println!(&quot;filepath is {}&quot;, filepath);
</span><span>    </span><span style="color:#ff7733;">let</span><span> file_content </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match </span><span>fs</span><span style="color:#f29668;">::</span><span>read_to_string(filepath) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(content) </span><span style="color:#f29668;">=&gt;</span><span> content</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(e) </span><span style="color:#f29668;">=&gt; </span><span style="color:#f07178;">panic!</span><span>(</span><span style="color:#c2d94c;">&quot;Err: {}&quot;</span><span style="color:#bfbab0cc;">,</span><span> e)</span><span style="color:#bfbab0cc;">,
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// println!(&quot;file_content is:\n {}&quot;, file_content);
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> word_count</span><span style="color:#bfbab0cc;">: </span><span>HashMap&lt;</span><span style="font-style:italic;color:#39bae6;">String</span><span>, </span><span style="color:#ff7733;">u32</span><span>&gt; </span><span style="color:#f29668;">= </span><span>HashMap</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for</span><span> word </span><span style="color:#f29668;">in</span><span> file_content</span><span style="color:#f29668;">.</span><span style="color:#f07178;">split_whitespace</span><span>() {
</span><span>        </span><span style="color:#ff7733;">let</span><span> lowercase_word </span><span style="color:#f29668;">=</span><span> word</span><span style="color:#f29668;">.</span><span style="color:#f07178;">to_lowercase</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">match</span><span> word_count</span><span style="color:#f29668;">.</span><span style="color:#f07178;">get</span><span>(</span><span style="color:#f29668;">&amp;</span><span>lowercase_word) {
</span><span>            </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(count) </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>                </span><span style="color:#ff7733;">let</span><span> increment </span><span style="color:#f29668;">= *</span><span>count </span><span style="color:#f29668;">+ </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>                word_count</span><span style="color:#f29668;">.</span><span style="color:#f07178;">insert</span><span>(lowercase_word</span><span style="color:#bfbab0cc;">,</span><span> increment)</span><span style="color:#bfbab0cc;">;
</span><span>            }
</span><span>            </span><span style="font-style:italic;color:#39bae6;">None </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>                word_count</span><span style="color:#f29668;">.</span><span style="color:#f07178;">insert</span><span>(lowercase_word</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>            }
</span><span>        }</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> most_common </span><span style="color:#f29668;">= </span><span>MostCommonWord</span><span style="color:#f29668;">::</span><span>new(</span><span style="color:#c2d94c;">&quot;&quot;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> most_common_words </span><span style="color:#f29668;">= </span><span style="color:#f07178;">vec!</span><span>[]</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for </span><span>(word</span><span style="color:#bfbab0cc;">,</span><span> count) </span><span style="color:#f29668;">in &amp;</span><span>word_count {
</span><span>        </span><span style="color:#ff7733;">if</span><span> most_common</span><span style="color:#f29668;">.</span><span>occurrence </span><span style="color:#f29668;">&lt; *</span><span>count {
</span><span>            most_common</span><span style="color:#f29668;">.</span><span>value </span><span style="color:#f29668;">=</span><span> word</span><span style="color:#f29668;">.</span><span style="color:#f07178;">to_string</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>            most_common</span><span style="color:#f29668;">.</span><span>occurrence </span><span style="color:#f29668;">= *</span><span>count</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    most_common_words</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(most_common)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for </span><span>(word</span><span style="color:#bfbab0cc;">,</span><span> count) </span><span style="color:#f29668;">in &amp;</span><span>word_count {
</span><span>        </span><span style="color:#ff7733;">if</span><span> most_common_words[</span><span style="color:#f29718;">0</span><span>]</span><span style="color:#f29668;">.</span><span>value </span><span style="color:#f29668;">!=</span><span> word</span><span style="color:#f29668;">.</span><span style="color:#f07178;">to_string</span><span>()
</span><span>            </span><span style="color:#f29668;">&amp;&amp;</span><span> most_common_words[</span><span style="color:#f29718;">0</span><span>]</span><span style="color:#f29668;">.</span><span>occurrence </span><span style="color:#f29668;">== *</span><span>count
</span><span>        {
</span><span>            </span><span style="color:#ff7733;">let</span><span> other_most_common </span><span style="color:#f29668;">= </span><span>MostCommonWord</span><span style="color:#f29668;">::</span><span>new(word</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">*</span><span>count)</span><span style="color:#bfbab0cc;">;
</span><span>            most_common_words</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(other_most_common)</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    </span><span style="color:#ff7733;">if</span><span> most_common_words</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() </span><span style="color:#f29668;">&gt; </span><span style="color:#f29718;">1 </span><span>{
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;The most common words in the text are;&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        </span><span style="color:#ff7733;">for</span><span> most_common </span><span style="color:#f29668;">in</span><span> most_common_words {
</span><span>            </span><span style="color:#f07178;">println!</span><span>(
</span><span>                </span><span style="color:#c2d94c;">&quot;</span><span style="color:#95e6cb;">\&quot;</span><span style="color:#f29718;">{}</span><span style="color:#95e6cb;">\&quot;</span><span style="color:#c2d94c;"> with </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> occurrences&quot;</span><span style="color:#bfbab0cc;">,
</span><span>                most_common</span><span style="color:#f29668;">.</span><span>value</span><span style="color:#bfbab0cc;">,</span><span> most_common</span><span style="color:#f29668;">.</span><span>occurrence
</span><span>            )</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    } </span><span style="color:#ff7733;">else if</span><span> most_common_words</span><span style="color:#f29668;">.</span><span style="color:#f07178;">len</span><span>() </span><span style="color:#f29668;">== </span><span style="color:#f29718;">1 </span><span>{
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> most_common_words[</span><span style="color:#f29718;">0</span><span>])</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span></code></pre>
<p>Вывод</p>
<pre style="background-color:#0f1419;color:#bfbab0;"><code><span>$ cargo run lorem.txt
</span><span>&quot;eget&quot; is the most common word with 8 occurrences
</span></code></pre>
<h2 id="al-ternativnaia-realizatsiia">Альтернативная реализация</h2>
<pre data-lang="rust" style="background-color:#0f1419;color:#bfbab0;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>env</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>fs</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">use </span><span>std</span><span style="color:#f29668;">::</span><span>collections</span><span style="color:#f29668;">::</span><span>HashMap</span><span style="color:#bfbab0cc;">;
</span><span style="color:#ff7733;">fn </span><span style="color:#ffb454;">main</span><span>() {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// read file and build vector of individual words
</span><span>    </span><span style="color:#ff7733;">let</span><span> contents </span><span style="color:#f29668;">= </span><span style="color:#ff7733;">match </span><span>env</span><span style="color:#f29668;">::</span><span>args()</span><span style="color:#f29668;">.</span><span style="color:#f07178;">nth</span><span>(</span><span style="color:#f29718;">1</span><span>) {
</span><span>        </span><span style="font-style:italic;color:#39bae6;">Some</span><span>(f) </span><span style="color:#f29668;">=&gt; </span><span style="color:#ff7733;">match </span><span>fs</span><span style="color:#f29668;">::</span><span>read_to_string(f) {
</span><span>            </span><span style="font-style:italic;color:#39bae6;">Ok</span><span>(s) </span><span style="color:#f29668;">=&gt;</span><span> s</span><span style="color:#f29668;">.</span><span style="color:#f07178;">to_lowercase</span><span>()</span><span style="color:#bfbab0cc;">,
</span><span>            </span><span style="font-style:italic;color:#39bae6;">Err</span><span>(e) </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>                </span><span style="color:#f07178;">eprintln!</span><span>(</span><span style="color:#c2d94c;">&quot;Could not read file: </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> e)</span><span style="color:#bfbab0cc;">;
</span><span>                std</span><span style="color:#f29668;">::</span><span>process</span><span style="color:#f29668;">::</span><span>exit(</span><span style="color:#f29718;">1</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>            }
</span><span>        }</span><span style="color:#bfbab0cc;">,
</span><span>        </span><span style="font-style:italic;color:#39bae6;">None </span><span style="color:#f29668;">=&gt; </span><span>{
</span><span>            </span><span style="color:#f07178;">eprintln!</span><span>(</span><span style="color:#c2d94c;">&quot;Program requires an argument: &lt;file path&gt;&quot;</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>            std</span><span style="color:#f29668;">::</span><span>process</span><span style="color:#f29668;">::</span><span>exit(</span><span style="color:#f29718;">2</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let</span><span> all_words </span><span style="color:#f29668;">=</span><span> contents</span><span style="color:#f29668;">.</span><span style="color:#f07178;">split_whitespace</span><span>()</span><span style="color:#f29668;">.</span><span>collect</span><span style="color:#f29668;">::</span><span>&lt;</span><span style="font-style:italic;color:#39bae6;">Vec</span><span>&lt;</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>&gt;&gt;()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// count how many times each unique word occurs
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> word_counts</span><span style="color:#bfbab0cc;">: </span><span>HashMap&lt;</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>, </span><span style="color:#ff7733;">u32</span><span>&gt; </span><span style="color:#f29668;">= </span><span>HashMap</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for</span><span> word </span><span style="color:#f29668;">in</span><span> all_words</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>() {
</span><span>        </span><span style="color:#f29668;">*</span><span>word_counts</span><span style="color:#f29668;">.</span><span style="color:#f07178;">entry</span><span>(word)</span><span style="color:#f29668;">.</span><span style="color:#f07178;">or_insert</span><span>(</span><span style="color:#f29718;">1</span><span>) </span><span style="color:#f29668;">+= </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>    
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// determine the most commonly used word(s)
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> top_count </span><span style="color:#f29668;">= </span><span style="color:#f29718;">0</span><span style="color:#ff7733;">u32</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">let mut</span><span> top_words</span><span style="color:#bfbab0cc;">: </span><span style="font-style:italic;color:#39bae6;">Vec</span><span>&lt;</span><span style="color:#f29668;">&amp;</span><span style="color:#ff7733;">str</span><span>&gt; </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">Vec</span><span style="color:#f29668;">::</span><span>new()</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for </span><span>(</span><span style="color:#f29668;">&amp;</span><span>key</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29668;">&amp;</span><span>val) </span><span style="color:#f29668;">in</span><span> word_counts</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>() {
</span><span>        </span><span style="color:#ff7733;">if</span><span> val </span><span style="color:#f29668;">&gt;</span><span> top_count {
</span><span>            top_count </span><span style="color:#f29668;">=</span><span> val</span><span style="color:#bfbab0cc;">;
</span><span>            top_words</span><span style="color:#f29668;">.</span><span style="color:#f07178;">clear</span><span>()</span><span style="color:#bfbab0cc;">;
</span><span>            top_words</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(key)</span><span style="color:#bfbab0cc;">;
</span><span>        } </span><span style="color:#ff7733;">else if</span><span> val </span><span style="color:#f29668;">==</span><span> top_count {
</span><span>            top_words</span><span style="color:#f29668;">.</span><span style="color:#f07178;">push</span><span>(key)</span><span style="color:#bfbab0cc;">;
</span><span>        }
</span><span>    }
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// display results
</span><span>    </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;Top word(s) occurred </span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;"> times:&quot;</span><span style="color:#bfbab0cc;">,</span><span> top_count)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">for</span><span> word </span><span style="color:#f29668;">in</span><span> top_words</span><span style="color:#f29668;">.</span><span style="color:#f07178;">iter</span><span>() {
</span><span>        </span><span style="color:#f07178;">println!</span><span>(</span><span style="color:#c2d94c;">&quot;</span><span style="color:#f29718;">{}</span><span style="color:#c2d94c;">&quot;</span><span style="color:#bfbab0cc;">,</span><span> word)</span><span style="color:#bfbab0cc;">;
</span><span>    }
</span><span>}
</span></code></pre>










<script src="https://giscus.app/client.js"
    data-repo="dudochkin-victor&#x2F;dudochkin-victor.github.io"
    data-repo-id="MDEwOlJlcG9zaXRvcnkzNzgwNTYx"
    data-category="General"
    data-category-id="DIC_kwDOADmv0c4CAhvj"
    data-mapping="pathname"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-theme="light"
    data-lang="en"
    crossorigin="anonymous"
    async>
</script>



        </div>

        
        
    </main>

    
    <footer>
        <small class="subtext">
            <a href="https://angular-rust.github.io">Dudochkin Victor</a> © 2021
        </small>
    </footer>
    
</body>
<script>
    function highlightNav(heading) {
        let pathname = location.pathname;
        document.querySelectorAll(".toc a").forEach((item) => {
            item.classList.remove("active");
        });
        document.querySelector(".toc a[href$='" + pathname + "#" + heading + "']").classList.add("active");
    }

    let currentHeading = "";
    window.onscroll = function () {
        let h = document.querySelectorAll("h1,h2,h3,h4,h5,h6");
        let elementArr = [];

        h.forEach(item => {
            if (item.id !== "") {
                elementArr[item.id] = item.getBoundingClientRect().top;
            }
        });
        elementArr.sort();
        for (let key in elementArr) {
            if (!elementArr.hasOwnProperty(key)) {
                continue;
            }
            if (elementArr[key] > 0 && elementArr[key] < 300) {
                if (currentHeading !== key) {
                    highlightNav(key);
                    currentHeading = key;
                }
                break;
            }
        }
    }
</script>

</html>
