<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>ERC20 на WASM | Dudochkin Victor </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="google-site-verification" content="Kepqb6k6uptlwngnHbBVJmqQtwNW8zfHyQBbTXLYAgA" />
    <meta name="yandex-verification" content="8e8bc73c2566b473" />
    <style>
    :root {
        /* Primary theme color */
        /* --primary-color: #121A26; */
        --primary-color: #0f1419;
        /* Primary theme text color */
        /* --primary-text-color: #121A26; */
        --primary-text-color: #0f1419;
        /* Primary theme link color */
        --primary-link-color: #053961;
        /* Secondary color: the background body color */
        --secondary-color: #F0F0F0;
        --secondary-text-color: #1C2834;
        /* Highlight text color of table of content */
        --toc-highlight-text-color: #053961;
    }
</style>
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-47MMPLLY44"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-47MMPLLY44');
    </script>
    

    
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
    
        ym('87064264', "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
        });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/87064264" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    
    
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/mdl.min.css">
    <link rel="stylesheet" href="https://dudochkin-victor.github.io/style.css">
    
    
</head>

<body>
    
<header class="box-shadow">
    

<a href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;">
    <div class="logo">
        <img src="https://dudochkin-victor.github.io/ferris.png" alt="logo">
        Dudochkin Victor
    </div>
</a>

<nav>
    <!-- 
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;showcases&#x2F;">Showcases</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;changelog&#x2F;">Changelog</a>
    
    <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;dudochkin-victor.github.io&#x2F;about&#x2F;">About</a>
     -->

    
        
        <a class="nav-item subtitle-text" href="&#x2F;solana&#x2F;">Solana</a>
        
        <a class="nav-item subtitle-text" href="&#x2F;edgeware&#x2F;">Edgeware</a>
        
        <a class="nav-item subtitle-text" href="&#x2F;blog&#x2F;">Блог</a>
        
        <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;github.com&#x2F;dudochkin-victor">Github</a>
        
    
</nav>

</header>

 
    <main>
        
        
        
        
        
        <div class="toc">
            <div class="toc-sticky">
                
                <div class="toc-item">
                    <a class="subtext" href="https://dudochkin-victor.github.io/edgeware/development/develop/smart-contracts/wasm-smart-contracts/tutorials/wasm-erc20/readme/#vvedenie">Введение </a>
                </div>
                
                
                <div class="toc-item-child">
                    <a class="subtext" href="https://dudochkin-victor.github.io/edgeware/development/develop/smart-contracts/wasm-smart-contracts/tutorials/wasm-erc20/readme/#standart-erc20"><small>- Стандарт ERC20 </small></a>
                </div>
                
                
                
            </div>
        </div>
        
        

        <div class="content text">
            
<h1>ERC20 на WASM</h1>

<h2 id="vvedenie">Введение <a id="introduction"></a></h2>
<p>В этой главе мы покажем вам, как вы можете создать контракт токена ERC20 с помощью ink!.</p>
<p>В ходе главы мы рассмотрим:</p>
<ul>
<li>Первоначальная чеканка токенов</li>
<li>Переводы токенов</li>
<li>Утверждения и передача третьей стороне</li>
<li>Выдача событий времени выполнения через Substrate</li>
</ul>
<p>Но сначала мы рассмотрим стандарт ERC20 для тех из вас, кто не знаком с ним.</p>
<h3 id="standart-erc20">Стандарт ERC20 <a id="erc20-standard"></a></h3>
<p><a href="https://eips.ethereum.org/EIPS/eip-20">Стандарт токена ERC20</a> определяет интерфейс для самого популярного смарт-контракта Ethereum.</p>
<pre data-lang="javascript" style="background-color:#0f1419;color:#bfbab0;" class="language-javascript "><code class="language-javascript" data-lang="javascript"><span style="font-style:italic;color:#5c6773;">// ----------------------------------------------------------------------------
</span><span style="font-style:italic;color:#5c6773;">// ERC Token Standard #20 Interface
</span><span style="font-style:italic;color:#5c6773;">// https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md
</span><span style="font-style:italic;color:#5c6773;">// ----------------------------------------------------------------------------
</span><span>
</span><span>contract ERC20Interface {
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// Storage Getters
</span><span>    </span><span style="color:#ff7733;">function </span><span style="color:#ffb454;">totalSupply</span><span>() </span><span style="color:#ffb454;">public view returns </span><span>(</span><span style="color:#f29718;">uint</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">function </span><span style="color:#ffb454;">balanceOf</span><span>(</span><span style="color:#f29718;">address tokenOwner</span><span>) </span><span style="color:#ffb454;">public view returns </span><span>(</span><span style="color:#f29718;">uint balance</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">function </span><span style="color:#ffb454;">allowance</span><span>(</span><span style="color:#f29718;">address tokenOwner</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">address spender</span><span>) </span><span style="color:#ffb454;">public view returns </span><span>(</span><span style="color:#f29718;">uint remaining</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// Public Functions
</span><span>    </span><span style="color:#ff7733;">function </span><span style="color:#ffb454;">transfer</span><span>(</span><span style="color:#f29718;">address to</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">uint tokens</span><span>) </span><span style="color:#ffb454;">public returns </span><span>(</span><span style="color:#f29718;">bool success</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">function </span><span style="color:#ffb454;">approve</span><span>(</span><span style="color:#f29718;">address spender</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">uint tokens</span><span>) </span><span style="color:#ffb454;">public returns </span><span>(</span><span style="color:#f29718;">bool success</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>    </span><span style="color:#ff7733;">function </span><span style="color:#ffb454;">transferFrom</span><span>(</span><span style="color:#f29718;">address from</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">address to</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">uint tokens</span><span>) </span><span style="color:#ffb454;">public returns </span><span>(</span><span style="color:#f29718;">bool success</span><span>)</span><span style="color:#bfbab0cc;">;
</span><span>
</span><span>    </span><span style="font-style:italic;color:#5c6773;">// Contract Events
</span><span>    event </span><span style="color:#ffb454;">Transfer</span><span>(address indexed from</span><span style="color:#bfbab0cc;">, </span><span>address indexed to</span><span style="color:#bfbab0cc;">, </span><span>uint tokens)</span><span style="color:#bfbab0cc;">;
</span><span>    event </span><span style="color:#ffb454;">Approval</span><span>(address indexed tokenOwner</span><span style="color:#bfbab0cc;">, </span><span>address indexed spender</span><span style="color:#bfbab0cc;">, </span><span>uint tokens)</span><span style="color:#bfbab0cc;">;
</span><span>}Copy to clipboardErrorCopied
</span></code></pre>
<p>Таким образом, это позволяет людям развертывать свою собственную криптовалюту поверх существующей платформы смарт-контрактов. В этом контракте не происходит много волшебства. Балансы пользователей хранятся в HashMap, и создан набор API-интерфейсов, позволяющих пользователям передавать токены, которыми они владеют, или позволять третьей стороне передавать некоторое количество токенов от их имени. Самое главное, что вся эта логика реализована таким образом, чтобы средства не создавались и не уничтожались непреднамеренно, а средства пользователя были защищены от злоумышленников.</p>
<p>Обратите внимание, что все общедоступные функции возвращают <code>bool</code>, который указывает, был ли вызов успешным или нет. Мы будем придерживаться этой спецификации.</p>










<script src="https://giscus.app/client.js"
    data-repo="dudochkin-victor&#x2F;dudochkin-victor.github.io"
    data-repo-id="MDEwOlJlcG9zaXRvcnkzNzgwNTYx"
    data-category="General"
    data-category-id="DIC_kwDOADmv0c4CAhvj"
    data-mapping="pathname"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-theme="light"
    data-lang="en"
    crossorigin="anonymous"
    async>
</script>



        </div>

        
        
    </main>

    
    <footer>
        <small class="subtext">
            <a href="https://angular-rust.github.io">Dudochkin Victor</a> © 2021
        </small>
    </footer>
    
</body>
<script>
    function highlightNav(heading) {
        let pathname = location.pathname;
        document.querySelectorAll(".toc a").forEach((item) => {
            item.classList.remove("active");
        });
        document.querySelector(".toc a[href$='" + pathname + "#" + heading + "']").classList.add("active");
    }

    let currentHeading = "";
    window.onscroll = function () {
        let h = document.querySelectorAll("h1,h2,h3,h4,h5,h6");
        let elementArr = [];

        h.forEach(item => {
            if (item.id !== "") {
                elementArr[item.id] = item.getBoundingClientRect().top;
            }
        });
        elementArr.sort();
        for (let key in elementArr) {
            if (!elementArr.hasOwnProperty(key)) {
                continue;
            }
            if (elementArr[key] > 0 && elementArr[key] < 300) {
                if (currentHeading !== key) {
                    highlightNav(key);
                    currentHeading = key;
                }
                break;
            }
        }
    }
</script>

</html>
